{"version":3,"sources":["assets/tileJS.png","assets/tileTS.png","assets/tileBlockly.png","assets/blockly2js.png","Components/assets/state.png","Components/assets/channel.png","Components/assets/device.png","Components/assets/empty.png","assets/copy-content.svg","Theme.js","createTheme.js","i18n.js","Dialogs/Rename.js","Dialogs/Delete.js","Dialogs/AddNewScript.js","Dialogs/New.js","Dialogs/Error.js","SideMenu.js","Log.js","Components/ScriptEditorVanilaMonaco.js","Components/BlocklyEditor.js","Dialogs/Message.js","Dialogs/Export.js","Dialogs/Import.js","Dialogs/Confirmation.js","Components/cp-react-tree-table/src/component/Column.js","Components/cp-react-tree-table/src/component/ColumnWrapper.js","Components/cp-react-tree-table/src/component/VirtualListRow.js","Components/cp-react-tree-table/src/model/row.js","Components/cp-react-tree-table/src/util/index.js","Components/cp-react-tree-table/src/model/bt_node.js","Components/cp-react-tree-table/src/model/bt_leaf.js","Components/cp-react-tree-table/src/model/bt_root.js","Components/cp-react-tree-table/src/component/VirtualList.js","Components/cp-react-tree-table/src/component/TreeDataTable.js","Components/cp-react-tree-table/src/util/search.js","Components/cp-react-tree-table/src/index.js","Components/Utils.js","Components/SelectID.js","Dialogs/SelectID.js","Components/simple-cron/cron2text.js","Components/simple-cron/jquery.cron.locale.js","Components/simple-cron/cronText.js","Components/ComplexCron.js","Components/simple-cron/SimpleCron.js","Components/Schedule.js","Dialogs/Cron.js","Dialogs/ScriptEditor.js","Editor.js","Connection.js","Components/Loader.js","Dialogs/ImportFile.js","App.js","serviceWorker.js","index.js","assets/js.png","assets/blockly.png","assets/typescript.png"],"names":["module","exports","__webpack_require__","p","Theme","type","root","flexGrow","display","width","height","menu","depthOffset","colors","primary","secondary","selected","background","color","error","toolbar","tabs","createTheme","createMuiTheme","palette","light","main","dark","contrastText","I18n","lang","word","arg1","arg2","arg3","translations","w","console","log","concat","undefined","replace","en","require","ru","de","window","sysLang","DialogRename","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleCancel","onClose","handleOk","onRename","oldId","state","id","name","instance","handleChange","setState","getId","isShowInstance","folder","instances","length","prefix","getPrefix","parts","split","pop","join","nextProps","_this2","react_default","a","createElement","Dialog_default","disableBackdropClick","disableEscapeKeyDown","maxWidth","fullWidth","open","aria-labelledby","DialogTitle_default","t","DialogContent_default","noValidate","autoComplete","TextField_default","style","label","value","onKeyPress","ev","key","preventDefault","setTimeout","onChange","e","target","margin","disabled","FormControl_default","InputLabel_default","htmlFor","Select_default","parseInt","inputProps","map","MenuItem_default","DialogActions_default","Button_default","onClick","React","Component","DialogDelete","onDelete","md","fontSize","fontWeight","DialogAddNew","html","focus","Card_default","className","classes","card","CardActionArea_default","CardMedia_default","media","image","ImgJS","title","CardContent_default","text","CardActions_default","size","openHtml","_this3","ImgTS","_this4","ImgBlockly","textAlign","getJSCard","getBlocklyCard","getTSCard","withStyles","DialogNew","onAdd","parent","minWidth","parents","splice","names","forEach","n","i","el","find","item","push","DialogError","aria-describedby","titleBackground","titleColor","DialogContentText_default","autoFocus","theme","Themes","&>h2","images","Blockly","Javascript/js","def","TypeScript/ts","ImgTypeScript","getObjectName","obj","getLanguage","common","prepareList","data","modified","result","ids","keys","sort","b","enabled","depth","engineType","engine","startsWith","index","it","parentIndex","SideDrawer","onDragUpdate","update","provided","destination","listItems","dragDepth","expanded","localStorage","getItem","JSON","parse","inputRef","createRef","scripts","reorder","draggedId","creatingScript","creatingFolder","copingScript","renaming","deleting","choosingType","errorText","menuOpened","menuAnchorEl","searchMode","expertMode","searchText","runningInstances","newExp","ensureSelectedIsVisible","scriptsHash","filterTimer","isAllZeroInstances","getIsAllZeroInstances","isDisable","cb","noUpdate","stringify","changed","newState","toLowerCase","filteredPartly","found","indexOf","objects","source","pos","lastIndexOf","substring","filtered","filterList","selectId","setItem","err","stopPropagation","saveExpanded","newId","draggableId","event","children","IconButton_default","iconButtons","onEnableDisable","green","red","onEdit","Promise","resolve","isExpanded","_this5","gripHandle","noGripHandle","expandButton","onCollapse","onExpand","padding","overflow","flex","items","_this6","filter","depthPx","assign","marginLeft","cursor","opacity","iconStyle","inner","ListItem_default","element","onDoubleClick","onDblClick","renderFolderButtons","ListItemIcon_default","fa","scriptIcon","alt","src","ListItemText_default","getTextStyle","ListItemSecondaryAction_default","renderItemButtons","react_beautiful_dnd_esm","isDragDisabled","snapshot","ref","innerRef","draggableProps","dragHandleProps","isDragging","draggableStyle","objectSpread","userSelect","renderOneItem","dragging","_this7","List_default","dense","disablePadding","_this8","_this9","copyId","_this10","m","match","_this11","_this12","RootRef_default","rootRef","Input_default","toolbarSearch","placeholder","clearTimeout","onSearch","toolbarButtons","float","mini","marginTop","aria-label","aria-owns","aria-haspopup","currentTarget","selectedItem","Menu_default","anchorEl","PaperProps","maxHeight","MENU_ITEM_HEIGHT","showError","then","iconDropdownMenu","onExpertModeChange","onExport","onImport","onThemeChange","onAddNew","onCopy","onAddNewFolder","folders","_this13","renamingItem","copingItem","Drawer_default","variant","paper","drawerPaper","anchor","getToolbarButtons","Divider_default","onDragStart","onDragEnd","droppableId","innerMenu","renderAllItems","Rename","newName","newInstance","Delete","AddNewScript","New","getUniqueName","getFolders","getUniqueFolderName","Dialogs_Error","position","lineHeight","paddingRight","overflowX","overflowY","borderRadius","Log","lines","goBottom","editing","lastIndex","messagesEnd","logHandlerBound","logHandler","bind","assertThisInitialized","message","ts","severity","trTime","d","getHours","toString","getMinutes","getSeconds","getMilliseconds","getTimeString","Date","trSeverity","current","scrollIntoView","behavior","allLines","generateLine","ms","date","toLocaleString","connection","registerLogHandler","unregisterLogHandler","scrollToBottom","hasOwnProperty","str","document","body","appendChild","select","execCommand","removeChild","copyToClipboard","logBox","toolbox","clearLog","logBoxInner","table","clear","paddingLeft","info","warn","debug","silly","fontFamily","top","left","boxShadow","toolboxXml","ScriptEditor","isDark","language","readOnly","alive","check","monacoDiv","editor","monaco","insert","originalCode","code","globalTypingHandles","typings","lastSearch","forceUpdate","onRegisterSelect","getModel","getValueInRange","getSelection","compilerOptions","languages","typescript","typescriptDefaults","ScriptTarget","ES2015","allowJs","checkJs","noLib","lib","moduleResolution","ModuleResolutionKind","NodeJs","setCompilerOptions","setTypeCheck","create","lineNumbers","scrollBeyondLastLine","automaticLayout","onDidChangeModelContent","getValue","scriptAdapterInstance","getScripts","sendTo","setEditorTypings","addCommand","KeyMod","CtrlCmd","KeyCode","KEY_S","onForceSave","options","selectOnLineNumbers","setEditorOptions","setValue","setEditorLanguage","updateOptions","lineWrap","wordWrap","typeCheck","setTheme","dispose","model","uri","path","filenameWithoutExtension","substr","extension","newLanguage","newModel","createModel","Uri","from","setModel","noSemanticValidation","noSyntaxValidation","setDiagnosticsOptions","isGlobal","handle","addExtraLib","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","return","isGlobalScript","test","partialDeclarationsPath","_arr","_i","addTypingsToEditor","selection","range","Range","startLineNumber","startColumn","endLineNumber","endColumn","executeEdits","forceMoveMarkers","findMatches","r","setSelection","revealLine","row","getPosition","lineNumber","col","column","highlightText","insertTextIntoEditor","onInserted","newValue","bottom","right","zIndex","DialogMessage","DialogExport","popper","getElementById","dialog","textArea","Popper_default","placement","transition","_ref","TransitionProps","Fade_default","timeout","Paper_default","typography","tabIndex","aria-hidden","spacing","unit","DialogImport","fullHeight","resize","languageBlocklyLoaded","languageOwnLoaded","toolboxText","scriptsLoaded","BlocklyEditor","blockly","blocklyWorkspace","exportText","importText","someSelected","onResizeBind","onResize","lastCommand","blinkBlock","loadLanguages","dom","Xml","workspaceToDom","blocks","domToPrettyText","getAllBlocks","searchBlocks","addSelect","command","blocklyCheckBlocks","badBlock","blocklyBlinkBlock","exportBlocks","importBlocks","searchId","updateBackground","loadCode","fileLang","setAttribute","onload","onreadystatechange","readyState","getElementsByTagName","fileCustom","svgResize","xml","l","decodeURIComponent","atob","block","unselect","warningText","blocklyGetUnconnectedBlock","blocklyGetBlockWithWarning","connections","getConnections_","conn","j","sourceBlock_","INPUT_VALUE","OUTPUT_VALUE","targetConnection","_optional","warning","oneWay","JavaScript","workspaceToCode","domToText","btoa","encodeURIComponent","xmlBlock","blockToDom","dragMode_","DRAG_FREE","deleteNext","xy","getRelativeToSurfaceXY","RTL","x","y","trim","xmlBlocks","textToDom","nodeName","paste","ignoreChanges","jsCode2Blockly","domToWorkspace","alert","didUpdate","addEventListener","getToolbox","inject","zoom","controls","wheel","startScale","maxScale","minScale","scaleSpeed","trashcan","grid","colour","snap","addChangeListener","masterEvent","allBlocks","removeSelect","Events","UI","CREATE","getElementsByClassName","classList","darkBackground","add","remove","removeEventListener","blocklyCode2JSCode","outerHTML","p1","MSG","CustomBlocks","_b","Words","HUE","componentDidUpdate","Message","Export","Import","onImportBlocks","url","callback","location","scriptTag","adapter","loadJS","loadScripts","toLoad","stroke","fill","DialogConfirm","onOk","question","ok","cancel","Column","ColumnWrapper","_this$props","rowData","toggle","rowMetadata","renderCell","classNameColumn","_width","cWidth","baseClass","STYLE_COLUMN","boxSizing","VirtualListRow","overscanHeight","topOffset","hasVisibleChildren","onToggle","columns","classNameRow","classNameSelected","metadata","getMetadata","STYLE_ROW","getHeight","data-rindex","onRowClick","data-depth","Children","toArray","ColumnWrapper_ColumnWrapper","Row","hasChildren","arguments","isVisible","_height","_cacheHeight","_hasChildren","_updateHeight","hide","show","diff","processData","rowHeightDefault","processLevel","needle","haystack","noop","BTNode","_size","ch","getSize","at","child","sz","rm","Math","min","oldHeight","removeInner","BTLeaf","rows","collapse","insertInner","remaining","leaf","slice","maybeSpill","me","sibling","myIndex","copy","op","used","mapRange","apply","BTRoot","get","prototype","Error","node","cur","chunk","rHeight","getRow","rowObj","VirtualList","_handleScroll","onScroll","container","scrollTop","_setHeight","offsetHeight","lastVisibleRowIndex","classNamePartlyVisible","classNameMover","classNameInner","_this$state","startYMax","max","startY","startIndex","getIndexAtY","endY","endIndex","contentTopOffset","getYAtIndex","visibleRowsData","visibleRows","relativeIndex","visible","VirtualListRow_VirtualListRow","STYLE_LIST","elem","STYLE_WRAPPER","STYLE_CONTENT","posY","parentNode","WebkitOverflowScrolling","minHeight","TreeDataTable","_handleOnToggle","delta","_toggleRow","hasChange","toggleOpen","currentDepth","rowIndex","getRowIndex","rowHeight","VirtualList_VirtualList","virtualList","expandAncestors","dataNode","mapAll","findNodeData","ancestors","currentRowIndex","previousDepth","currentRow","currentRoot","scrollTo","to","_from","_to","_isOpRangeValid","hasChanged","_walkOne","expandOrCollapse","_showRowsInRange","_hideRowsInRange","maxTo","days","months","Utils","toUpperCase","settings","isDesc","attr","desc","CapitalWords","forEnumId","custom","user","subOrder","order","subURLs","URLs","list","dest","Array","_result$splice","removed","slicedToArray","defaultEnabling","_id","useCustom","icon","s","useCommon","pathname","defaultValue","g","rgb","seconds","parseFloat","isNaN","hours","floor","minutes","secs","angle","num","format","dateFormat","now","year","day","abs","getTime","getDay","getDate","getMonth","namespace","INSTANCES","binarySearch","applyFilter","filters","context","filteredOut","role","room","members","func","expert","fID","fName","getName","_item","formatDate","dateObj","getFullYear","v","formatValue","texts","valFull","states","ex","getStates","isCommon","valText","val","lc","ack","quality","q","quality2text","getSelectIdIcon","_id_","IconDefaultDevice","IconDefaultChannel","IconDefaultState","IconDefault","SelectID","loaded","selectedFound","copyContentImg","CopyContentImg","treeTableRef","mainRef","getObjects","_buildTree","currentPathArr","currentPath","currentPathLen","funcEnums","roomEnums","roles","croot","_loop","statesOnly","repeat","u","move","curPath","_loop2","k","_croot","buildTree","onSelect","isDouble","toggleChildren","__installed","cellCopy","div","img","A200","dataset","cellCopyPressed","installCopyButtons","findNode","_parts","_path","_level","isState","data-index","cellWrapper","toggleButtonWrapper","cellWrapperElement","findRoomsForObject","withParentInfo","rooms","origin","findFunctionsForObject","funcs","headerCellInput","marginBottom","underline","onFilter","values","displayEmpty","selectNone","selectIcon","getFilterSelect","expandAll","collapseAll","Toolbar_default","onExpandAll","onCollapseAll","visibleButtons","onExpandVisible","onCollapseVisible","WIDTHS","mainDiv","getToolbar","header","headerCell","getFilterInput","getFilterSelectRole","getFilterSelectRoom","getFilterSelectFunction","tableDiv","cp_react_tree_table_src","partlyVisible","treeTable","treeTableRow","isDoubleClick","grow","renderIndexColumn","cellDivId","renderColumnName","cellDiv","renderColumnRole","renderColumnRoom","renderColumnFunc","renderColumnValue","CircularProgress_default","borderTop","borderBottom","verticalAlign","alignItems","selectSpan","border","paddingTop","A700","DialogSelectID","headerID","content","Components_SelectID","fontStyle","cronToText","cronspec","withSeconds","locale","NAMES","JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC","SUN","MON","TUE","WED","THU","FRI","SAT","REPLACEMENTS","* * * * * *","@YEARLY","@ANNUALLY","@MONTHLY","@WEEKLY","@DAILY","@HOURLY","FIELDS","h","D","M","Y","offset","sched","inc","addHash","schedules","curSched","hash","dc","field","clone","cloneSchedule","except1","except2","exceptions","addWeekday","incSplit","rangeSplit","addRange","isHash","itemSorter","toInt","argumentForCoercion","number","coercedNumber","isFinite","ceil","ordinal","ORDINALS","th","st","nd","rd","numberList","numbers","lastVal","numberToDateName","DOW","MONTH","dateList","outputText","zeroPad","schedule","Every","hm","and","scheduleToSentence","expr","hasSeconds","prepared","prepareExpr","f","component","components","parseExpr","parseCron","JQUERY_CRON_LOCALE","every day","minute past the","hour","minute","minute of","second","second in minute","second of every","minute every hour","on the","of every month","and every","At","on","in","convertCronToText","cron","correctCasus","WEEKDAYS","MONTHS","convertMinusIntoArray","iMax","convertArrayIntoMinus","newParts","start","end","ComplexCron","cronExpression","cron2state","extended","tab","state2cron","modes","dates","dows","defineProperty","recalcCron","nums","numberButton","every","everyN","periodSelect","_this5$setState","_this5$setState2","_this5$setState3","InputLabelProps","shrink","getDigitsSelector","FormControlLabel_default","control","Checkbox_default","checked","AppBar_default","appBar","Tabs_default","active","Tab_default","tabContent","getPeriodsTab","cronParts","slider","numberButtonBreak","PERIODIC","once","interval","intervalBetween","specific","PERIODIC_TYPES","DEFAULT_STATE","mode","period","SimpleCron","time","timeFrom","timeTo","weekdays","formControl","getControlsTime","getControlsDate","getControlsPeriodElements","getControlsWeekdaysElements","onModeChange","getOnceElements","getIntervalElements","getIntervalBetweenElements","getSpecificTimeElements","part","dow","text2weekdays","periodArray2text","partsDate","month","PERIODS","ASTRO","DEFAULT","exactTime","weeks","years","yearMonth","yearDate","valid","string2USdate","Schedule","now2string","state2text","force","isDiff","string2date","today","setHours","setMinutes","setSeconds","setMilliseconds","validFrom","tDows","last","tMonths","wholeDay","night","fromTo","rowDiv","modeDiv","Radio_default","inputRadio","_schedule","settingsDiv","inputTime","marginRight","getPeriodSettingsMinutes","isAstro","hr","isOnce","rowOnce","inputDate","rowDays","getPeriodSettingsDaily","getPeriodSettingsWeekdays","rowDows","getPeriodSettingsWeekly","rowDowsDows","rowMonths","getPeriodSettingsMonthly","rowMonthsDates","getPeriodSettingsDates","rowYears","getPeriodSettingsYearly","inputEvery","isSpecific","FormGroup_default","inputGroup","inputGroupElement","inputSmallCheck","parsedDates","inputDateDay","inputDateDayCheck","pointerEvents","parsedMonths","isEnd","setDate","scrollWindow","getTimePeriodElements","getTimeExactElements","getDivider","getPeriodModes","getValidSettings","rowDates","rowWeeks","rowDaysDows","paddingBottom","DialogCron","simple","dialogPaper","setMode","simple_cron_SimpleCron","Components_Schedule","Components_ComplexCron","radio","DialogScriptEditor","isReturn","args","argsTitle","ScriptEditorVanilaMonaco","Editor","tabsRef","showBlocklyCode","showSelectId","showCron","showScript","cmdToBlockly","initValue","scriptDialog","systemLang","selectIdDialog","cronDialog","showScriptDialog","onSelectedChange","onBrowserCloseBound","onBrowserClose","isChanged","returnValue","_changed","commonLocal","nextCommon","onRestart","getSelect","showConfirmDialog","nowSelected","isScriptChanged","onTabClose","confirmCallback","confirm","cmd","onTabChange","indicatorColor","textColor","scrollable","scrollButtons","tabIcon","tabText","tabChanged","tabChangedIcon","closeButton","tabButton","hintButton","hintIcon","isInstanceRunning","isScriptRunning","onLocate","notRunning","textButton","onSave","onCancel","sendCommandToBlockly","onConvert2JS","ImgBlockly2Js","editorDiv","Components_BlocklyEditor","resizing","Confirmation","Dialogs_SelectID","Cron","_this14","Dialogs_ScriptEditor","_this15","getTabs","getScriptEditor","getBlocklyEditor","getConfirmDialog","getSelectIdDialog","getCronDialog","getEditorDialog","hintText","textOverflow","whiteSpace","PROGRESS","CONNECTING","CONNECTED","OBJECTS_LOADED","READY","Connection","autoSubscribes","autoSubscribeLog","socket","io","connect","protocol","host","query","hosts","groups","acl","firstConnect","waitForRestart","connected","statesSubscribes","onProgress","onError","emit","systemConfig","navigator","userLanguage","onLanguage","onReady","subscribe","reload","subscribed","onLog","onLogHandler","operation","objectChange","stateChange","cbs","reg","RegExp","getState","_rev","oldObj","onBlocklyChanges","onObjectChange","task","disableProgressUdpate","res","STATES_LOADED","reject","refresh","isEnable","newCommon","_obj","verbose","originalGroup","confirmed","deleted","deleteId","onConfirmDelete","_deleteGroup","_list","nId","renameGroup","handler","PropTypes","Loader","borderWidth","DialogImportFile","imageStatus","files","file","readFileDataUrl","dropzone","dropzoneAccepted","dropzoneRejected","es","maxSize","acceptClassName","rejectClassName","onDrop","handleDropFile","multiple","accept","isDragActive","isDragReject","reader","FileReader","onabort","onerror","readAsDataURL","borderStyle","borderColor","transform","App","progress","ready","updateScripts","updating","logMessage","menuSelectId","importFile","themeType","logSize","menuSize","round","setLanguage","subscribeState","isReady","nScripts","compareScripts","loadCustomBlockly","newScripts","oldIds","newIds","oldScript","newScript","promise","updateScript","catch","delObject","isFolder","setObject","shift","getLiveHost","link","href","click","download","onImportConfirmed","showMessage","menuOpenCloseButton","lib_default","vertical","primaryMinSize","secondaryInitialSize","onSecondaryPaneSizeChange","src_Editor","onUpdateScript","extendObject","src_Log","ImportFile","primaryIndex","secondaryMinSize","customClassName","splitterDivs","menuDivWithoutMenu","SideMenu","renderMain","Components_Loader","menuDiv","&>div","& .layout-splitter","backgroundColor","default","splitterDivWithMenu","&>div:first-child","&>.layout-splitter","&:hover","Boolean","hostname","build","Map","ReactDOM","render","core_styles","src_App","_theme","serviceWorker","registration","unregister"],"mappings":"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,EAAI,KAAOA,GAG5BkjC,CAAU1F,EAAUC,GA0NFuC,UAAU,GAAIvC,IC7fjD0F,GAAqB,CAEzBA,GAAwB,CACpB5B,SAAU,CACNC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,MAERM,MAAO,CACH,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJD,IAAK,CACD,MACA,MACA,MACA,MACA,MACA,MACA,OAEJM,MAAoB,QACpBE,IAAoB,MACpBY,YAAoB,YACpBC,kBAAoB,kBACpBC,KAAoB,OACpBC,OAAoB,SACpBC,YAAoB,YACpBC,OAAoB,SACpBC,mBAAoB,mBACpBC,kBAAoB,kBACpBC,oBAAqB,oBACrBC,SAAoB,SACpBC,iBAAoB,iBACpBC,YAAoB,YACpBC,GAAoB,KACpBC,GAAoB,KACpBC,GAAoB,MAGxBf,GAAwB,CACpB5B,SAAU,CACNC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,IAERM,MAAO,CACH,SACA,UACA,UACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,YAEJD,IAAK,CACD,UACA,SACA,WACA,WACA,aACA,UACA,WAEJM,MAAoB,UACpBE,IAAoB,MACpBY,YAAoB,YACpBC,kBAAoB,eACpBC,KAAoB,SACpBC,OAAoB,SACpBC,YAAoB,cACpBC,OAAoB,UACpBC,mBAAoB,wBACpBC,kBAAoB,aACpBC,oBAAqB,qBACrBC,SAAoB,KACpBC,iBAAoB,iBACpBC,YAAoB,eACpBC,GAAoB,KACpBC,GAAoB,KACpBC,GAAoB,MAGxBf,GAAwB,CACpB5B,SAAU,CACNC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,IAERM,MAAO,CACH,uCACA,6CACA,iCACA,uCACA,2BACA,2BACA,2BACA,6CACA,mDACA,6CACA,uCACA,8CAEJD,IAAK,CACD,qEACA,qEACA,6CACA,iCACA,6CACA,6CACA,8CAEJM,MAAoB,qDACpBE,IAAoB,SACpBY,YAAoB,gEACpBC,kBAAoB,8CACpBC,KAAoB,yCACpBC,OAAoB,uCACpBC,YAAoB,gDACpBC,OAAoB,6CACpBC,mBAAoB,yFACpBC,kBAAoB,gGACpBC,oBAAqB,+FACrBC,SAAoB,GACpBC,iBAAoB,iHACpBC,YAAoB,8CACpBC,GAAoB,SACpBC,GAAoB,SACpBC,GAAoB,UAGxBf,GAAwB,CACpB5B,SAAU,CACNC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,MAERM,MAAO,CACH,SACA,MACA,MACA,MACA,MACA,OACA,MACA,MACA,MACA,MACA,UAGJD,IAAK,CACD,MACA,MACA,MACA,MACA,MACA,MACA,OAGJM,MAAoB,SACpBE,IAAoB,KACpBY,YAAoB,iBACpBC,kBAAoB,qBACpBC,KAAoB,QACpBC,OAAoB,SACpBC,YAAoB,YACpBC,OAAoB,UACpBC,mBAAoB,oBACpBC,kBAAoB,sBACpBC,oBAAoB,2BACpBC,SAAoB,SACpBC,iBAAoB,iBACpBC,YAAoB,UACpBC,GAAoB,OACpBC,GAAoB,MACpBC,GAAoB,QAGxBf,GAAwB,CACpB5B,SAAU,CACNC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,IAERM,MAAO,CACH,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJD,IAAK,CACD,MACA,MACA,MACA,MACA,MACA,KACA,OAEJM,MAAqB,OACrBE,IAAqB,IACrBY,YAAqB,cACrBC,kBAAqB,cACrBC,KAAqB,MACrBC,OAAqB,SACrBC,YAAqB,YACrBC,OAAqB,UACrBC,mBAAqB,oBACrBC,kBAAqB,kBACrBC,oBAAqB,kBACrBC,SAAqB,MACrBC,iBAAqB,eACrBC,YAAqB,SACrBC,GAAqB,IACrBC,GAAqB,QACrBC,GAAqB,MAGzBf,GAAwB,CACpB5B,SAAU,CACNC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,IAERM,MAAO,CACH,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEJD,IAAK,CACD,MACA,MACA,MACA,MACA,MACA,MACA,OAEJM,MAAwB,OACxBE,IAAwB,IACxBY,YAAwB,WAC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","file":"static/js/main.f3366ad4.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABiCAYAAABEZ20wAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAT3SURBVHhe7V0tUxxBEKVSkREIZCQiMhKZH4BKRSAQCAQmLgKBQ/AD8gMQSEREJAKBRCAQkYiIiIiIiIiISz+qu2pqs9zN3rzh5nafmDo+dofufvO6Z7p7l43ZbLah0YYNBERDi1FgCIw23EJr7lnMEDPEjD5WihlihpghZjTEAoEhMOSScrfQCuANsUVgCAy5LgXwhlggMKYMxov3H1/Z2LdxYePexi8bszUckBvyX9o4sLGZu0Macl21AG4C79r4voaGz1ksP02vD0MMnXMtHQxnw+cEhCv7+tDGNn6XI1Rr17hOb1wP6BOAnTNZQgXDhf7mwoLaB60ZliGPu6pwuQ8sQNhgBCNuTMDXDMVbnQP62YCeYMk5Q04aGB4jIBhWzKiBCMM7IMGQ3VJAKGC4e4pgPUrX9JSh3WVhEUL/opjIAgPbVwh0Vbo61vF+0/va9d8vkZ8FBs4RAOOwRJh1vdf0PnH9L0p0YIGBAxHA2C4RZl3vTeLlfYkOLDAiiBX5zBJFVnmvgbEV2/kSOVhgPB6CSgRZ93sdjCIbCAxS8lBgkAzJYKXAEBj/V+kYq4KxOlc5B8MGihkkdgkMkiEZjBIYAmP1McMTk3v2iTTMnSfpIlmH71EeRb7s2Q6hk2OGKbxp48zGn1B+wSeuw/VVatape5sUGKYsmJA2NNza90jQ7dh4rJ/g07/Hz6PwEzUWes16cmCYUV/aOE0YgHT1u5yg68BEehugnObct8w1k2BGAsRf+/p4SUMd2724vxogowfDXRMMCEMWuRncnwBSNFffghg1GAi6SYxYihFdo9l8R240xB5qUB87GNgFgRXXy7imOTXrrz7vGXne4jJCk+kQMxbaQmP7mhWscw1r8751MDA/7RwyWmYkseI218hDrgPb3Hh7Q+6bd+2YwYgGhxOWsTpngk9uvKIGgkmcM8xQSGnAB+9UAgMHRcx/x5p/zMyIhrgqnYlmOJzUH3NZAmNBtpWxyhYZmf03GPO1upv64cqJGYtWVc9hqniP3QmG0RSnmNEAGKhHAODau6nLobrOOUwWL8hW3VQ0Ut+wjNVhXjx9VNSoPJWtbXoCp7oqYxseB0PiUSfw3JVuxlJuKtdYbIr2bAqUtW0FDMiR5KhUz8gFhnHgmbNLiZIrADnKlanDXNQxVOlbxngdQ3Zr4F+QBs+Z14N11C+qlVydxePc2vYZ2l1W2h2CNDiyr33dIfg5tq/BBtxHL7Wy42aT54w5Lkt9U4tcQs2Y8QRLcA5RR+ETxin2l4sAb/33jAW5Vm6qZUAEhrrQV9+F3iJDxAwxQ8yotYlRACexS26KZEhGDGoJjN8uDK1dkmGg55rDdG/q3SHxXkK9VaeArayYEQ0EU3/fVFGDAwsMvHgXKZGpv4mt6JWALDCQTcWLdwFIkUDP5edZfwf6ut7Qv+gBHAoYXlzBY1rxZGmVTkCWAVnzmL7o2Y0aS3G9hAaGAxKt/FN7r21RrIjFwQYD7uohYcgoXZa7pmAE+oK3GGyjguHsACDncQiyT5RH8ZA8XlRPEZqh+JA5/BwB+aFH+lw5dpE0nehghJJufP2XgAHnjmpgOEv0/zNaAWOIK9C1s42qzJCBh/2jL4ExwI3UXlwCQ2AMo2/tFdnK/GKGmCFm9LFRzBAzxAwxoyEWCAyBIZeUu3VWAG+ILQJDYMh1KYA3xAKB0TgY/wCrKvMDWcWHNQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABiCAYAAABEZ20wAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAR7SURBVHhe7Z2hUhxBEIap6AhEZAQCkQeIiIjgAVApJAKBTVUkAkFVHiEPgEAikQhEREQkIhIREYFAREZc+j96iq27pdid+Xe2b/cXUyHczl7PfP13z8zODluLxWJLJUYfCEQgZxQMwYgRFqKFZylDypAy2lQpZUgZUoaUEUgFgiEYCkldh9BK4IHUIhiCodClBB5IBYIxZxivPn1+beXQyoWVWysPVhYbWGA37L+0cmRlu+sIqc91gyVwM3jfyu8N7PguznJv7Tro09FdrqXDcDV8a0C4tp+Prezisy5GRbvG2/TO24H2JGDnTJVQYbjRv9xYSPsoWscy7PFQlULuHQsIG0ZSxHcz8C2j4VHvgfZZQTuhknOGnTQYniNgGDxm0iBSxzuQpJD9UiAUGB6eUrKeZGh6rqM9ZMEJ0f6inMiCgeErDLou9Y5NrG/tvvH2H5bYz4KBeQRgHJcYk1PXvvPMv/sspz6jjn3/qdtwUXI/FgxMiABjt8SYnLpBYGBOhfbf5rQh1WHBSEmsKGbmNKQRsykjmkwb3jiMh5z6bBjLSVCJIbl1I8CA7Q6jqA9YyhAMn5XnOhXqTQFGGskVJc+STpQyfDncwsOeh4ib0g4tqa8w9RirBaPpRQyvyPVKwVh5YjYyjA/+/T9ygTLqMfpgCgl8xzvijtGpufcQjMecIRiBcoZgBIKRliLuc0MMo57C1NNcY7QVgARSMARjfWsmwytKQsXY36/lkMZcx2CkJfxBNpd1cRSGQ2z8PMO9EttlkDd2unTcENfMFkZq+Ev/DtHpz91TMF7YtysYFXZ6r3qh/f+n/+49K5n2BTl7ZTTG+GmrzJ5gEB459vHEFmUIBnP2mQNDCbwlJzDipWBMYEOC5wi8J4F5xmj7fBkOOZVJn2CMlTNWQ5p5pWAEgvHVw8Rpn9zDvFZh6mkJPcJO9OJnKlPJGYIRKEwJRhQYzNifey/ljAqLkl3hCIZgxHsG3tV7h7xOypAypIw2hUkZUkYsZZhHfrRyZQXHDqHg5+UTv5pl9sqwDvhi5V/LQyb8ruo61axhuCLQ6cuOt4JTblBOGoCqKWTuMBCOsDi3pgCHg8+uaoWqucNAfkCHrx2n5ArBZ9VeExAMwWgdTf11z6h2doiPmuD9Jy1P/pA3qoUp+65QZ4ekcwmrnaqD4asn6tETuNkR6lQdnPda/bypRqJePmVbKdXOn2rYcVkyYKBMjMwYHLw7yklsrpBRJ31mQ9rRWLRViAVjGyMXB1JkUIlnjVG34Yhof9HLOhQYvpHswGHgLaI5nt5ZfAI0DYYDSWcVzu1c26JckRTNhoFwlV7pgkImGbI8NKX3CP9gaMsIkVQYrg4ASTv8kNSR3LB2hOEfxWhGw/vcw+cRsB/tSMkabcMoktYmOozGjhH9lYCey/iDwXCV6O9n9AAyKIw+oUDXkt7PUEdynipKGT3CyNBOJxiCwZH10J5a+/5ShpQhZbSpTsqQMqQMKSOQCgRDMBSSug6RlcADqUUwBEOhSwk8kAoEIziM/5ZTLyXvAlkpAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABiCAYAAABEZ20wAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAUXSURBVHhe7V2rUlxBEE1FRyCQEQhEPiAiIoIPQKWQCAQ2VZEIBFX5hHwAAolEIhAREZGISEREBAIRGbHpQ/VUpnYvl57pvtne3SOmCnZnhp4+fU7P497hxWw2e8GSwwcEIlEwEgyCkUMWsskzmUFmkBlDrCQzyAwyg8xIxAKCQTAoSdYpNBN4IrYQDIJB6WICT8QCgrHJYLz88PGVlEMpF1JupTxIma1ggd2w/1LKkZQt6wyppd5kCVwM3pfycwUdbwmWexnXQYujLXXDwVA2fKlAuJafj6Xs4juLUdnq6Jje6DgwngLYeSRLQsFQo3+osaD2UTbHRtijUlUk9y4KkGgwCiO+ioGvIwaetQ+MTwrGCZacR9gZBobmCBiGiFlrIIrjFZDCkH0vICFgqDyVZL2W0vSUo1WyEIQYvysnRoGB6SsMuvZGxyq2l3Hf6PgPPfZHgYF1BMA4bjVG2pxp27PWtqjvbV9JTrcdYsOpjuGiZwylTRQYWBABjN1WY7zO9LYPAgNrKoz/tnX8df0oMEoSa9ZMrzMrzXbNaDx2SNttBeMhAxiPi6AeQzxOUJnC9oR7ehlgR7cPomXKbIg6zrLlYAI3AzM0KMw+eCpoo2TKbMgEYJSZnCt5bjQzxhJnAcwie1J3T+vfWOpXf9fETqv8tticjhkEY/G0c2kylQWMQDvMUp2OGZbcYZEd6eed9vXNUn9epgiG8bTP4lwBYkfBuLPUJxgjZ88BsxgXGIEMXT2Zmo9egvEvkf/3BD4BGGUr4r5Fpiawg8yIWv0GMJRgEIy5hOxZfXojkmDkA6Ns4Xc/XOYNCk9ALm3XNjpxKjPwuAw0e6c3iROMzmNTy9rAusE3tgJvAXZjmUEwxlfR3dO6HnmYj0L5/bt+9rY3offYUTNn45lRSUx5VGaPYOjGX4vGerR6gBkE46kd0BZQeuSBOSNhzngOlKmDgjljICgElHMFpvs53x6GEgyCMf6qsGda541InT2RGctK4ANbKp81IE5b8sSczHQ/+Nw7nZ63deUPl9QRLkdG9OFRh3XbKCQYiWSKYESA0avx2dqthUxlc2qvPQQj0V0gBINgLC4AI6KiVx6ytIvwwdLXGVmc6bWDYFCm4mRKoum9lCspuDIIBT8/ntZZi7cPb/vI6b150GPO6aGotPkk5c/AmQQ+M+0xefvwtl+LLXSNRjj90fFScEMNykkF0ChDvH142w9sVnY/lLHUvSmVIxi/wAAFB99dPcNGSFp3HxE2rAszkB/gyIWrkJQh+G70EX/NMd19eNuvEzMIxsAkJSqB/9ZIN90dUknEyUCEIW+0yFRXHxE2VDOpVHeHlHsJTbfqiCPwIr03gbv6iLChAiPVrTq477XpvqkqUQ/dVGC6e8rbh7d9BUa5b+rSuj4aqhclU+Vmm6ab2DQ6vYs+MKS7jyAbyhON3Y8KAZwoMLaq2YnLIE9kLaOtjLsEIiYl3S/rhIGhB/oHKlV4i2gTb+903wAdwoxKO8tdhZt2r60rV4SuwCswIFfllS4wZC0lS6WpvEf4S37fjpDIUGaoXAGQ8oQfZkpIbphtYPoXYnTEwFv6gN1qP8ZRkjXGhllk2JjCwZibe/O/BDQcB0wGhrKE/z8jCxgtUsC6QesMOtJ+Mjnmq0lliiC1gUQwGjR96uAiGASjjb5TR2SW/skMMoPMmOw8IwvNV90OyhRlijJFmUrEAoJBMChJ1okFE3githAMgkHpGpKuv887tA5HhhPjAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABiCAYAAABEZ20wAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAPhJREFUeF7tyKEBADAQhLDff+nrAngqEDG5bfkEZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZgy7B/6DRu7DB74QAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/copy-content.770c7d5d.svg\";","export default {\r\n    type: 'dark',\r\n    root: {\r\n        flexGrow: 1,\r\n        display: 'flex',\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    menu: {\r\n        width: 300,\r\n        depthOffset: 20\r\n    },\r\n    colors: {\r\n        primary: '#3399CC',\r\n        secondary: '#164477',\r\n        selected: {\r\n            background: '#164477',\r\n            color: 'white'\r\n        },\r\n        error: {\r\n            background: '#dc0300',\r\n            color: '#FFFFFF'\r\n        }\r\n    },\r\n    toolbar: {\r\n        height: 48\r\n    },\r\n    tabs: {\r\n        height: 48\r\n    }\r\n};","import {createMuiTheme} from '@material-ui/core/styles';\r\nimport Theme from './Theme';\r\n\r\nexport default type => {\r\n    if (type === 'dark') {\r\n        return createMuiTheme({\r\n            palette: {\r\n                type: type,\r\n                primary: {\r\n                    light: '#5F6975',\r\n                    main: '#2978d0',\r\n                    dark: '#053C72',\r\n                    contrastText: '#C00',\r\n                },\r\n                secondary: {\r\n                    light: '#7EB2CC',\r\n                    main: '#3399CC',\r\n                    dark: '#068ACC',\r\n                    contrastText: '#ee0000',\r\n                },\r\n            }\r\n        });\r\n    } else {\r\n        return createMuiTheme({\r\n            palette: {\r\n                type: type,\r\n                primary: {\r\n                    light: '#5F6975',\r\n                    main: '#164477',\r\n                    dark: '#053C72',\r\n                    contrastText: '#C00',\r\n                },\r\n                secondary: {\r\n                    light: '#7EB2CC',\r\n                    main: '#3399CC',\r\n                    dark: '#068ACC',\r\n                    contrastText: '#ee0000',\r\n                },\r\n            }\r\n        });\r\n\r\n    }\r\n}","/**\n * Copyright 2018 bluefox <dogafox@gmail.com>\n *\n * Licensed under the Creative Commons Attribution-NonCommercial License, Version 4.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * https://creativecommons.org/licenses/by-nc/4.0/legalcode.txt\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n\nclass I18n {\n    static translations = {\n        'en': require('./i18n/en'),\n        'ru': require('./i18n/ru'),\n        'de': require('./i18n/de'),\n    };\n\n    static lang = window.sysLang || 'en';\n\n    static setLanguage(lang) {\n        if (lang) {\n            I18n.lang = lang;\n        }\n    }\n    static getLanguage() {\n        return I18n.lang;\n    }\n    static t(word, arg1, arg2, arg3) {\n        if (I18n.translations[I18n.lang]) {\n            const w = I18n.translations[I18n.lang][word];\n            if (w) {\n                word = w;\n            } else {\n                console.log(`Translate: ${word}`);\n            }\n        }\n        if (arg1 !== undefined) {\n            word = word.replace('%s', arg1);\n            if (arg2 !== undefined) {\n                word = word.replace('%s', arg2);\n                if (arg3 !== undefined) {\n                    word = word.replace('%s', arg3);\n\n                }\n            }\n        }\n        return word;\n    }\n}\n\n/*I18n.translations = {\n    'en': require('./i18n/en'),\n    'ru': require('./i18n/ru'),\n    'de': require('./i18n/de'),\n};\nI18n.fallbacks = true;\nI18n.t = function () {};*/\n\nexport default I18n;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from '@material-ui/core/Button';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nimport I18n from '../i18n';\r\n\r\nclass DialogRename extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: props.name,\r\n            id: props.id,\r\n            instance: props.instance || 0\r\n        };\r\n        this.isShowInstance = !props.folder && props.instances && (props.instance || props.instances[0] || props.instances.length > 1);\r\n        this.prefix = this.getPrefix(props.id);\r\n        this.oldId = props.id;\r\n    }\r\n\r\n    getPrefix(id) {\r\n        const parts = (id || '').split('.');\r\n        parts.pop();\r\n        return parts.join('.');\r\n    }\r\n\r\n    getId(name) {\r\n        name = (name || '').replace(/[\\\\/\\][*,;'\"`<>?\\s]/g, '_');\r\n        return this.prefix + '.' + name;\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.name !== this.props.name) {\r\n            this.setState({name: nextProps.name});\r\n        }\r\n        if (nextProps.id !== this.props.id) {\r\n            this.prefix = this.getPrefix(nextProps.id);\r\n            this.setState({id: nextProps.id});\r\n        }\r\n    }\r\n\r\n    handleCancel = () => {\r\n        this.props.onClose();\r\n    };\r\n\r\n    handleOk = () => {\r\n        this.props.onRename(this.oldId, this.state.id, this.state.name, this.state.instance);\r\n        this.props.onClose();\r\n    };\r\n\r\n    handleChange = name => {\r\n        this.setState({name, id: this.getId(name)});\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Dialog\r\n                disableBackdropClick\r\n                disableEscapeKeyDown\r\n                maxWidth=\"md\"\r\n                fullWidth={true}\r\n                open={true}\r\n                aria-labelledby=\"confirmation-dialog-title\"\r\n            >\r\n                <DialogTitle id=\"confirmation-dialog-title\">{I18n.t('Rename')}</DialogTitle>\r\n                <DialogContent>\r\n                    <form noValidate autoComplete=\"off\">\r\n                        <TextField\r\n                            style={{width: '100%'}}\r\n                            id=\"standard-name\"\r\n                            label={I18n.t('Name')}\r\n                            value={this.state.name}\r\n                            onKeyPress={(ev) => {\r\n                                if (ev.key === 'Enter') {\r\n                                    // Do code here\r\n                                    ev.preventDefault();\r\n                                    setTimeout(() => this.handleOk(), 200);\r\n                                }\r\n                            }}\r\n                            onChange={e => this.handleChange(e.target.value)}\r\n                            margin=\"normal\"\r\n                        />\r\n                        <TextField\r\n                            id=\"standard-name-id\"\r\n                            style={{width: '100%'}}\r\n                            label={I18n.t('ID')}\r\n                            value={this.state.id}\r\n                            disabled={true}\r\n                            margin=\"normal\"\r\n                        />\r\n                        {\r\n                            this.isShowInstance && (\r\n                                <FormControl>\r\n                                    <InputLabel htmlFor=\"instance\">{I18n.t('Instance')}</InputLabel>\r\n                                    <Select\r\n                                        value={this.state.instance}\r\n                                        onChange={e => this.setState({instance: parseInt(e.target.value, 10)})}\r\n                                        inputProps={{name: 'instance', id: 'instance'}}\r\n                                    >\r\n                                        {this.props.instances.map(instance => (<MenuItem key={instance} value={instance}>{instance || '0'}</MenuItem>))}\r\n                                    </Select>\r\n                                </FormControl>)\r\n                        }\r\n                    </form>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={this.handleOk} color=\"primary\">{I18n.t('Ok')}</Button>\r\n                    <Button onClick={this.handleCancel} color=\"primary\">{I18n.t('Cancel')}</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nDialogRename.propTypes = {\r\n    onClose: PropTypes.func,\r\n    onRename: PropTypes.func,\r\n    name: PropTypes.string,\r\n    id: PropTypes.string,\r\n    instance: PropTypes.number,\r\n    instances: PropTypes.array,\r\n    folder: PropTypes.bool,\r\n};\r\n\r\nexport default DialogRename;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from '@material-ui/core/Button';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\n\r\nimport I18n from '../i18n';\r\n\r\nclass DialogDelete extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: props.name,\r\n            id: props.id,\r\n        };\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.name !== this.props.name) {\r\n            this.setState({name: nextProps.name});\r\n        }\r\n        if (nextProps.id !== this.props.id) {\r\n            this.setState({id: nextProps.id});\r\n        }\r\n    }\r\n\r\n    handleCancel = () => {\r\n        this.props.onClose(null);\r\n    };\r\n\r\n    handleOk = () => {\r\n        this.props.onDelete(this.state.id);\r\n        this.props.onClose(this.props.value);\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Dialog\r\n                disableBackdropClick\r\n                disableEscapeKeyDown\r\n                maxWidth=\"md\"\r\n                fullWidth={true}\r\n                open={true}\r\n                aria-labelledby=\"confirmation-dialog-title\"\r\n            >\r\n                <DialogTitle id=\"confirmation-dialog-title\">{I18n.t('Are you sure?')}</DialogTitle>\r\n                <DialogContent>\r\n                    <IconDelete/>\r\n                    <span style={{fontSize: 14, fontWeight: 'bold'}}>{I18n.t('Delete %s', this.state.name)}</span>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={this.handleOk} color=\"primary\">{I18n.t('Ok')}</Button>\r\n                    <Button onClick={this.handleCancel} color=\"primary\">{I18n.t('Cancel')}</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nDialogDelete.propTypes = {\r\n    onClose: PropTypes.func,\r\n    onDelete: PropTypes.func,\r\n    name: PropTypes.string,\r\n    id: PropTypes.string,\r\n};\r\n\r\nexport default DialogDelete;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\n\r\nimport ImgJS from '../assets/tileJS.png';\r\nimport ImgTS from '../assets/tileTS.png';\r\nimport ImgBlockly from '../assets/tileBlockly.png';\r\n\r\nimport I18n from '../i18n';\r\n\r\nconst styles = {\r\n    card: {\r\n        maxWidth: 345,\r\n        display: 'inline-block',\r\n        margin: '0 10px 0 10px'\r\n    },\r\n    media: {\r\n        height: 100,\r\n    },\r\n    text: {\r\n        maxWidth: 200,\r\n    }\r\n};\r\nclass DialogAddNew extends React.Component {\r\n    handleCancel = () => {\r\n        this.props.onClose();\r\n    };\r\n\r\n    handleOk = type => {\r\n        this.props.onClose(type);\r\n    };\r\n\r\n    openHtml(html) {\r\n        const win = window.open(html, '_blank');\r\n        win.focus();\r\n    }\r\n\r\n    getJSCard() {\r\n        return (<Card className={this.props.classes.card}>\r\n            <CardActionArea\r\n                onClick={() => this.props.onClose && this.props.onClose('Javascript/js')}>\r\n                <CardMedia\r\n                    className={this.props.classes.media}\r\n                    image={ImgJS}\r\n                    title=\"Javascript\"\r\n                />\r\n                <CardContent>\r\n                    <h2>Javascript</h2>\r\n                    <div className={this.props.classes.text}>{I18n.t('JS description')}</div>\r\n                </CardContent>\r\n            </CardActionArea>\r\n            <CardActions>\r\n                <Button size=\"small\" color=\"primary\" onClick={() => this.props.onClose && this.props.onClose('Javascript/js')}>{I18n.t('Add')}</Button>\r\n                <Button size=\"small\" color=\"primary\" onClick={() => this.openHtml('https://github.com/ioBroker/ioBroker.javascript/blob/master/doc/en/javascript.md')}>{I18n.t('Learn More')}</Button>\r\n            </CardActions>\r\n        </Card>);\r\n    }\r\n    getTSCard() {\r\n        return (<Card className={this.props.classes.card}>\r\n            <CardActionArea\r\n                onClick={() => this.props.onClose && this.props.onClose('TypeScript/ts')}>\r\n                <CardMedia\r\n                    className={this.props.classes.media}\r\n                    image={ImgTS}\r\n                    title=\"Typescript\"\r\n                />\r\n                <CardContent>\r\n                    <h2>Typescript</h2>\r\n                    <div className={this.props.classes.text}>{I18n.t('TS description')}</div>\r\n                </CardContent>\r\n            </CardActionArea>\r\n            <CardActions>\r\n                <Button size=\"small\" color=\"primary\" onClick={() => this.props.onClose && this.props.onClose('TypeScript/ts')}>{I18n.t('Add')}</Button>\r\n                <Button size=\"small\" color=\"primary\" onClick={() => this.openHtml('https://github.com/ioBroker/ioBroker.javascript/blob/master/doc/en/javascript.md#global-functions')}>{I18n.t('Learn More')}</Button>\r\n            </CardActions>\r\n        </Card>);\r\n    }\r\n    getBlocklyCard() {\r\n        return (<Card className={this.props.classes.card}>\r\n            <CardActionArea onClick={() => this.props.onClose && this.props.onClose('Blockly')}>\r\n                <CardMedia\r\n                    className={this.props.classes.media}\r\n                    image={ImgBlockly}\r\n                    title=\"Blockly\"\r\n                />\r\n                <CardContent>\r\n                    <h2>Blockly</h2>\r\n                    <div className={this.props.classes.text}>{I18n.t('Blockly description')}</div>\r\n                </CardContent>\r\n            </CardActionArea>\r\n            <CardActions>\r\n                <Button size=\"small\" color=\"primary\" onClick={() => this.props.onClose && this.props.onClose('Blockly')}>{I18n.t('Add')}</Button>\r\n                <Button size=\"small\" color=\"primary\" onClick={() => this.openHtml('https://github.com/ioBroker/ioBroker.javascript/blob/master/doc/en/blockly.md')}>{I18n.t('Learn More')}</Button>\r\n            </CardActions>\r\n        </Card>);\r\n    }\r\n    render() {\r\n        return (\r\n            <Dialog\r\n                disableBackdropClick\r\n                disableEscapeKeyDown\r\n                maxWidth=\"md\"\r\n                fullWidth={true}\r\n                open={true}\r\n                aria-labelledby=\"confirmation-dialog-title\"\r\n            >\r\n                <DialogTitle id=\"confirmation-dialog-title\">{I18n.t('Add new script')}</DialogTitle>\r\n                <DialogContent style={{textAlign: 'center'}}>\r\n                    {this.getJSCard()}\r\n                    {this.getBlocklyCard()}\r\n                    {this.getTSCard()}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={this.handleCancel} color=\"primary\">{I18n.t('Cancel')}</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nDialogAddNew.propTypes = {\r\n    onClose: PropTypes.func\r\n};\r\n\r\nexport default withStyles(styles)(DialogAddNew);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from '@material-ui/core/Button';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nimport I18n from '../i18n';\r\n\r\nclass DialogNew extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: props.name || 'Script',\r\n            instance: props.instance || 0,\r\n            parent: props.parent\r\n        };\r\n        this.isShowInstance = !props.folder && props.instances && (props.instance || props.instances[0] || props.instances.length > 1);\r\n    }\r\n\r\n    getId(name) {\r\n        name = name || this.state.name || '';\r\n        name = name.replace(/[\\\\/\\][*,;'\"`<>?\\s]/g, '_');\r\n        return (this.state ? this.state.parent : this.props.parent) + '.' + name;\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.name !== this.props.name) {\r\n            this.setState({name: nextProps.name});\r\n        }\r\n    }\r\n\r\n    handleCancel = () => {\r\n        this.props.onClose();\r\n    };\r\n\r\n    handleOk = () => {\r\n        this.props.onAdd(this.getId(this.state.name), this.state.name, this.state.instance, this.props.type);\r\n        this.props.onClose();\r\n    };\r\n\r\n    handleChange = name => {\r\n        this.setState({name, id: this.getId(name)});\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Dialog\r\n                disableBackdropClick\r\n                disableEscapeKeyDown\r\n                maxWidth=\"md\"\r\n                fullWidth={true}\r\n                open={true}\r\n                aria-labelledby=\"confirmation-dialog-title\"\r\n            >\r\n                <DialogTitle id=\"confirmation-dialog-title\">{this.props.title || I18n.t('Create new')}</DialogTitle>\r\n                <DialogContent>\r\n                    <form noValidate autoComplete=\"off\">\r\n                        <TextField\r\n                            style={{width: '100%'}}\r\n                            id=\"standard-name\"\r\n                            label={I18n.t('Name')}\r\n                            value={this.state.name}\r\n                            onKeyPress={(ev) => {\r\n                                if (ev.key === 'Enter') {\r\n                                    // Do code here\r\n                                    ev.preventDefault();\r\n                                    setTimeout(() => this.handleOk(), 200);\r\n                                }\r\n                            }}\r\n                            onChange={e => this.handleChange(e.target.value)}\r\n                            margin=\"normal\"\r\n                        />\r\n                        <FormControl style={{minWidth: 100}}>\r\n                            <InputLabel htmlFor=\"parent\">{I18n.t('Folder')}</InputLabel>\r\n                            <Select\r\n                                style={{width: '100%'}}\r\n                                value={this.state.parent}\r\n                                onChange={e => this.setState({parent: e.target.value})}\r\n                                inputProps={{name: 'parent', id: 'parent',}}\r\n                            >\r\n                                {this.props.parents.map(parent => {\r\n                                    const parts = parent.id.split('.');\r\n                                    parts.splice(0, 2); // remove script.js\r\n                                    const names = [];\r\n                                    let id = 'script.js';\r\n                                    parts.forEach((n, i) => {\r\n                                        id += '.' + n;\r\n                                        const el = this.props.parents.find(item => item.id === id);\r\n                                        if (el) {\r\n                                            names.push(el.name);\r\n                                        } else {\r\n                                            names.push(n);\r\n                                        }\r\n                                    });\r\n                                    if (!names.length) {\r\n                                        names.push(parent.name);\r\n                                    }\r\n                                    return (<MenuItem key={parent.id} value={parent.id}>{names.join(' / ')}</MenuItem>)\r\n                                })}\r\n                            </Select>\r\n                        </FormControl>\r\n                        <TextField\r\n                            id=\"standard-name-id\"\r\n                            style={{width: '100%'}}\r\n                            label={I18n.t('ID')}\r\n                            value={this.getId()}\r\n                            disabled={true}\r\n                            margin=\"normal\"\r\n                        />\r\n                        {\r\n                            this.isShowInstance && (\r\n                                <FormControl>\r\n                                <InputLabel htmlFor=\"instance\">{I18n.t('Instance')}</InputLabel>\r\n                                <Select\r\n                                    value={this.state.instance}\r\n                                    onChange={e => this.setState({instance: parseInt(e.target.value, 10)})}\r\n                                    inputProps={{name: 'instance', id: 'instance',}}\r\n                                >\r\n                                    {this.props.instances.map(instance => (<MenuItem value={instance}>{instance || '0'}</MenuItem>))}\r\n                                </Select>\r\n                            </FormControl>)\r\n                        }\r\n                    </form>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={this.handleOk} color=\"primary\">{I18n.t('Ok')}</Button>\r\n                    <Button onClick={this.handleCancel} color=\"primary\">{I18n.t('Cancel')}</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nDialogNew.propTypes = {\r\n    onClose: PropTypes.func,\r\n    onAdd: PropTypes.func,\r\n    name: PropTypes.string,\r\n    title: PropTypes.string,\r\n    parent: PropTypes.string,\r\n    instance: PropTypes.number,\r\n    instances: PropTypes.array,\r\n    parents: PropTypes.array,\r\n    folder: PropTypes.bool,\r\n    type: PropTypes.string,\r\n};\r\n\r\nexport default DialogNew;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nimport I18n from '../i18n';\r\nimport Themes from '../Theme';\r\n\r\nconst styles = theme => ({\r\n    titleBackground: {\r\n        background: Themes.colors.error.background\r\n    },\r\n    titleColor: {\r\n        color: Themes.colors.error.color,\r\n        '&>h2': {\r\n            color: Themes.colors.error.color,\r\n        }\r\n    },\r\n});\r\n\r\nclass DialogError extends React.Component {\r\n    handleOk = () => {\r\n        this.props.onClose && this.props.onClose();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Dialog\r\n                open={true}\r\n                maxWidth=\"sm\"\r\n                fullWidth={true}\r\n                onClose={() => this.handleOk()}\r\n                aria-labelledby=\"alert-dialog-title\"\r\n                aria-describedby=\"alert-dialog-description\"\r\n            >\r\n                <DialogTitle className={this.props.classes.titleBackground}\r\n                             classes={{root: this.props.classes.titleColor}}\r\n                             id=\"alert-dialog-title\">{this.props.title || I18n.t('Error')}</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText id=\"alert-dialog-description\">\r\n                        {this.props.text || I18n.t('Unknown error!')}\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => this.handleOk()} color=\"primary\" autoFocus>{I18n.t('Ok')}</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nDialogError.propTypes = {\r\n    onClose: PropTypes.func,\r\n    title: PropTypes.string,\r\n    text: PropTypes.string,\r\n    icon: PropTypes.object\r\n};\r\n\r\nexport default withStyles(styles)(DialogError);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport {DragDropContext, Droppable, Draggable} from 'react-beautiful-dnd';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Input from '@material-ui/core/Input';\r\nimport RootRef from '@material-ui/core/RootRef';\r\n\r\nimport red from '@material-ui/core/colors/red';\r\nimport green from '@material-ui/core/colors/green';\r\n\r\nimport {MdMoreVert as IconMore} from 'react-icons/md';\r\nimport {FaFolder as IconFolder} from 'react-icons/fa';\r\nimport {FaFolderOpen as IconFolderOpened} from 'react-icons/fa';\r\nimport {MdContentCopy as IconCopy} from 'react-icons/md';\r\nimport {MdDelete as IconDelete} from 'react-icons/md';\r\nimport {MdInput as IconDoEdit} from 'react-icons/md';\r\nimport {MdDragHandle as IconGrip} from 'react-icons/md';\r\nimport {MdExpandMore as IconCollapse} from 'react-icons/md';\r\nimport {MdKeyboardArrowRight as IconExpand} from 'react-icons/md';\r\nimport {MdClose as IconClear} from 'react-icons/md';\r\nimport {MdFormatClear as IconClose} from 'react-icons/md';\r\nimport {MdPlayArrow as IconPlay} from 'react-icons/md';\r\nimport {MdAdd as IconAdd} from 'react-icons/md';\r\nimport {MdCreateNewFolder as IconAddFolder} from 'react-icons/md';\r\nimport {MdPause as IconPause} from 'react-icons/md';\r\nimport {MdSwapVert as IconReorder} from 'react-icons/md';\r\nimport {MdEdit as IconEdit} from 'react-icons/md';\r\nimport {MdSearch as IconFind} from 'react-icons/md';\r\nimport {MdPersonPin as IconExpert} from 'react-icons/md';\r\nimport {FaFileExport as IconExport} from 'react-icons/fa';\r\nimport {FaFileImport as IconImport} from 'react-icons/fa';\r\nimport {MdPalette as IconDark} from 'react-icons/md';\r\n\r\nimport ImgJS from './assets/js.png';\r\nimport ImgBlockly from './assets/blockly.png';\r\nimport ImgTypeScript from './assets/typescript.png';\r\n\r\nimport Theme from './Theme';\r\nimport I18n from './i18n';\r\nimport DialogRename from './Dialogs/Rename';\r\nimport DialogDelete from './Dialogs/Delete';\r\nimport DialogAddNewScript from './Dialogs/AddNewScript';\r\nimport DialogNew from './Dialogs/New';\r\nimport DialogError from './Dialogs/Error';\r\n\r\nconst MENU_ITEM_HEIGHT = 48;\r\n\r\nconst styles = theme => ({\r\n    drawerPaper: {\r\n        position: 'relative',\r\n        width: '100%'//Theme.menu.width,\r\n    },\r\n    toolbar: {\r\n        height: Theme.toolbar.height\r\n    },\r\n    toolbarButtons: {\r\n        color: theme.palette.type === 'dark'? 'white !important' : 'black !important'\r\n    },\r\n    toolbarSearch: {\r\n        width: 'calc(100% - 105px)',\r\n        lineHeight: '34px',\r\n        marginLeft: 5\r\n    },\r\n    iconButtons: {\r\n        width: 32,\r\n        height: 32,\r\n        padding: 2\r\n    },\r\n    iconDropdownMenu: {\r\n        paddingRight: 5\r\n    },\r\n    menu: {\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    innerMenu: {\r\n        width: '100%',\r\n        height: '100%',\r\n        overflowX: 'hidden',\r\n        overflowY: 'auto'\r\n    },\r\n    scriptIcon: {\r\n        width: 18,\r\n        height: 18,\r\n        borderRadius: 2\r\n    },\r\n    gripHandle: {\r\n        paddingRight: 13\r\n    },\r\n    noGripHandle: {\r\n        width: 29\r\n    },\r\n    folder: {\r\n        background: theme.palette.type === 'dark' ? '#6a6a6a' : '#e2e2e2',\r\n        cursor: 'pointer',\r\n        padding: 0,\r\n        userSelect: 'none'\r\n    },\r\n    element: {\r\n        cursor: 'pointer',\r\n        padding: 0,\r\n        userSelect: 'none'\r\n    },\r\n    reorder: {\r\n        padding: '9px 16px 9px 9px',\r\n    },\r\n    expandButton: {\r\n        width: 37,\r\n        height: 37\r\n    },\r\n    selected: Theme.colors.selected,\r\n    instances: {\r\n        color: 'gray',\r\n        fontSize: 'smaller'\r\n    }\r\n});\r\n\r\nconst images = {\r\n    'Blockly': ImgBlockly,\r\n    'Javascript/js': ImgJS,\r\n    def: ImgJS,\r\n    'TypeScript/ts': ImgTypeScript,\r\n};\r\n\r\nconst getItemStyle = (isDragging, draggableStyle) => ({\r\n    userSelect: 'none',\r\n    background: isDragging ? 'lightgreen' : 'inherit',\r\n    ...draggableStyle,\r\n});\r\n\r\nconst getObjectName = (id, obj, lang) => {\r\n    lang = lang || I18n.getLanguage();\r\n    if (obj && obj.common && obj.common.name) {\r\n        if (typeof obj.common.name === 'object') {\r\n            return obj.common.name[lang] || obj.common.name.en;\r\n        } else {\r\n            return obj.common.name;\r\n        }\r\n    } else {\r\n        return id.replace(/^script\\.js./, '');\r\n    }\r\n};\r\n\r\nconst prepareList = data => {\r\n    const result = [];\r\n    const ids = Object.keys(data);\r\n    ids.sort((a, b) => {\r\n        if ((a === 'script.js.common' || a === 'script.js.global') && (b === 'script.js.common' || b === 'script.js.global')) {\r\n            return a > b ? 1 : -1;\r\n        } else if (a === 'script.js.common' || a === 'script.js.global' || b === 'script.js.common' || b === 'script.js.global') {\r\n            return 1;\r\n        } else {\r\n            return a > b ? 1 : -1;\r\n        }\r\n    });\r\n\r\n    for (let i = 0; i < ids.length; i++) {\r\n        const obj = data[ids[i]];\r\n        const parts = ids[i].split('.');\r\n        parts.pop();\r\n        result.push({\r\n            id: ids[i],\r\n            title: getObjectName(ids[i], obj),\r\n            enabled: obj && obj.common && obj.common.enabled,\r\n            depth: parts.length - 2,\r\n            type: obj.type === 'script' ? obj.common.engineType : 'folder',\r\n            parent: parts.length > 2 ? parts.join('.') : null,\r\n            instance: obj.common.engine ? parseInt(obj.common.engine.split('.').pop(), 10) || 0 : null\r\n        });\r\n    }\r\n\r\n    // Place all folder-less scripts at start\r\n    result.sort((a, b) => {\r\n        // without folders => always at start\r\n        if (!a.parent && a.type !== 'folder' && !b.parent && b.type !== 'folder') {\r\n            if (a.id === b.id) return 0;\r\n            return a.id > b.id ? 1 : -1;\r\n        } else if (!a.parent && a.type !== 'folder') {\r\n            return -1;\r\n        } else if (!b.parent && b.type !== 'folder') {\r\n            return 1;\r\n        } else {\r\n            // common and global are always at the end\r\n            if ((a.id.startsWith('script.js.common') || a.id.startsWith('script.js.global')) &&\r\n                (a.id.startsWith('script.js.common') || a.id.startsWith('script.js.global'))) {\r\n                if (a.id === b.id) return 0;\r\n                return a.id > b.id ? 1 : -1;\r\n            } else if (a.id.startsWith('script.js.common') || a.id.startsWith('script.js.global')) {\r\n                return 1;\r\n            } else if (b.id.startsWith('script.js.common') || b.id.startsWith('script.js.global')) {\r\n                return -1;\r\n            } else {\r\n                if (a.id === b.id) return 0;\r\n                return a.id > b.id ? 1 : -1;\r\n            }\r\n        }\r\n    });\r\n\r\n    // Fill all index\r\n    result.forEach((item, i) => item.index = i);\r\n\r\n    let modified;\r\n    do {\r\n        modified = false;\r\n        // check if all parents exists\r\n        result.forEach(item => {\r\n            if (item.parent) {\r\n                const parent = result.find(it => it.id === item.parent);\r\n                if (!parent) {\r\n                    const parts = item.parent.split('.');\r\n                    parts.pop();\r\n                    result.push({\r\n                        id: item.parent,\r\n                        title: item.parent.replace(/^script\\.js./, ''),\r\n                        depth: parts.length - 2,\r\n                        type: 'folder',\r\n                        parent: parts.length > 2 ? parts.join('.') : null\r\n                    });\r\n                    modified = true;\r\n                }\r\n            }\r\n        });\r\n    } while(modified);\r\n\r\n\r\n    // Fill all parentIndex\r\n    result.forEach(item => {\r\n        if (item.parent) {\r\n            const parent = result.find(it => it.id === item.parent);\r\n            if (parent) {\r\n                item.parentIndex = parent.index;\r\n            }\r\n        }\r\n    });\r\n\r\n    return result;\r\n};\r\n\r\nclass SideDrawer extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let expanded = window.localStorage ? window.localStorage.getItem('SideMenu.expanded') : '[]';\r\n        try {\r\n            expanded = JSON.parse(expanded) || [];\r\n        } catch (e) {\r\n            expanded = [];\r\n        }\r\n\r\n        this.inputRef = new React.createRef();\r\n\r\n        this.state = {\r\n            listItems: prepareList(props.scripts || {}),\r\n            expanded: expanded,\r\n            reorder: false,\r\n            theme: this.props.theme,\r\n            dragDepth: 0,\r\n            draggedId: null,\r\n            selected: window.localStorage ? window.localStorage.getItem('SideMenu.selected') || null : null,\r\n            creatingScript: false,\r\n            creatingFolder: false,\r\n            copingScript: '',\r\n            renaming: null,\r\n            deleting: null,\r\n            choosingType: null,\r\n            errorText: '',\r\n            instances: props.instances || [],\r\n            menuOpened: false,\r\n            menuAnchorEl: null,\r\n            searchMode: false,\r\n            expertMode: this.props.expertMode,\r\n            searchText: '',\r\n            width: this.props.width || 300,\r\n            runningInstances: this.props.runningInstances || {}\r\n        };\r\n\r\n        const newExp = this.ensureSelectedIsVisible();\r\n        if (newExp) {\r\n            this.state.expanded = newExp;\r\n        }\r\n\r\n        this.scriptsHash = props.scriptsHash;\r\n\r\n        // debounce search process\r\n        this.filterTimer = null;\r\n\r\n        this.state.isAllZeroInstances = this.getIsAllZeroInstances();\r\n    }\r\n\r\n    filterList(isDisable, listItems, cb) {\r\n        const noUpdate = !!listItems;\r\n        listItems = listItems || JSON.parse(JSON.stringify(this.state.listItems));\r\n        let changed = false;\r\n        let newState = {listItems};\r\n        if (isDisable !== false && this.state.searchMode && this.state.searchText) {\r\n            const text = this.state.searchText.toLowerCase();\r\n            listItems.forEach(item => {\r\n                const id = item.title.toLowerCase();\r\n                item.filteredPartly = false;\r\n                let found = id.indexOf(text) !== -1;\r\n                if (!found && (this.props.objects && this.props.objects[item.id] && this.props.objects[item.id].common && this.props.objects[item.id].common.source)) {\r\n                    if (this.props.objects[item.id].common.engineType === 'Blockly') {\r\n                        const pos = this.props.objects[item.id].common.source.lastIndexOf('//');\r\n                        found = this.props.objects[item.id].common.source.substring(0, pos).toLowerCase().indexOf(text) !== -1;\r\n                    } else {\r\n                        found = this.props.objects[item.id].common.source.toLowerCase().indexOf(text) !== -1;\r\n                    }\r\n                }\r\n                if (found) {\r\n                    if (item.filtered) {\r\n                        item.filtered = false;\r\n                        changed = true;\r\n                    }\r\n                } else if (!item.filtered) {\r\n                    item.filtered = true;\r\n                    changed = true;\r\n                }\r\n            });\r\n\r\n            if (changed) {\r\n                // check that all parents of every non-filtered item are visible\r\n                for (let i = listItems.length - 1; i >= 0; i--) {\r\n                    const item = listItems[i];\r\n                    if (!item.filtered || item.filteredPartly) {\r\n                        let it = item;\r\n                        do {\r\n                            if (it.parent) {\r\n                                changed = true;\r\n                                listItems[it.parentIndex].filteredPartly = true;\r\n                            }\r\n                            it = it.parent ? listItems[it.parentIndex] : null;\r\n                        } while(it);\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            listItems.forEach(item => {\r\n                if (item.filtered || item.filteredPartly) {\r\n                    item.filtered = false;\r\n                    item.filteredPartly = false;\r\n                    changed = true;\r\n                }\r\n            });\r\n            if (isDisable === false) {\r\n                newState.searchText = '';\r\n                newState.searchMode = false;\r\n                changed = true;\r\n            }\r\n        }\r\n        if (!noUpdate && changed) {\r\n            this.setState(newState, () => cb && cb());\r\n        } else {\r\n            cb && cb()\r\n        }\r\n    }\r\n\r\n    ensureSelectedIsVisible(selected, expanded) {\r\n        expanded = JSON.parse(JSON.stringify(expanded || this.state.expanded));\r\n        selected = selected || this.state.selected;\r\n        let changed = false;\r\n        // ensure that the item is visible\r\n        let el = typeof selected === 'object' ? selected : this.state.listItems.find(it => it.id === selected);\r\n        do {\r\n            // eslint-disable-next-line\r\n            el = el && el.parent && this.state.listItems.find(it => it.id === el.parent);\r\n            if (el) {\r\n                if (expanded.indexOf(el.id) === -1) {\r\n                    expanded.push(el.id);\r\n                    changed = true;\r\n                }\r\n            }\r\n        } while (el);\r\n        return changed && expanded;\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        const newState = {};\r\n        let changed = false;\r\n        if (this.expertMode !== nextProps.expertMode) {\r\n            changed = true;\r\n            newState.expertMode = nextProps.expertMode;\r\n        }\r\n        if (this.scriptsHash !== nextProps.scriptsHash && nextProps.scripts) {\r\n            const listItems = prepareList(nextProps.scripts || {});\r\n            this.state.searchText && this.filterList(true, listItems);\r\n\r\n            const isAllZeroInstances = this.getIsAllZeroInstances(listItems, nextProps.instances || []);\r\n            const newExp = this.ensureSelectedIsVisible();\r\n            newState.listItems = listItems;\r\n            newState.isAllZeroInstances = isAllZeroInstances;\r\n            if (newExp) {\r\n                newState.expanded = newExp;\r\n            }\r\n            changed = true;\r\n            this.setState(newState);\r\n        }\r\n\r\n        if (this.state.width !== nextProps.width) {\r\n            changed = true;\r\n            newState.width = nextProps.width;\r\n        }\r\n        if (this.state.theme !== nextProps.theme) {\r\n            changed = true;\r\n            newState.theme = nextProps.theme;\r\n        }\r\n        changed && this.setState(newState);\r\n\r\n        if (nextProps.selectId && this.state.selected !== nextProps.selectId) {\r\n            this.onClick(this.state.listItems.find(item => item.id === nextProps.selectId));\r\n        }\r\n        /*\r\n        const newState = {};\r\n        let changed = false;\r\n        if (this.expertMode !== nextProps.expertMode) {\r\n            changed = true;\r\n            newState.expertMode = nextProps.expertMode;\r\n        }\r\n        if (JSON.stringify(nextProps.runningInstances) !== JSON.stringify(this.state.runningInstances)) {\r\n            changed = true;\r\n            newState.runningInstances = nextProps.runningInstances;\r\n        }\r\n        if (this.scriptsHash !== nextProps.scriptsHash && nextProps.scripts) {\r\n            const listItems = prepareList(nextProps.scripts || {});\r\n            const isAllZeroInstances = this.getIsAllZeroInstances(listItems, nextProps.instances || []);\r\n            const newExp = this.ensureSelectedIsVisible();\r\n            if (newExp) {\r\n                newState.expanded = newExp;\r\n            }\r\n            this.setState(newState);\r\n            newState.listItems = nextProps.listItems;\r\n            newState.isAllZeroInstances = nextProps.isAllZeroInstances;\r\n            changed = true;\r\n        }\r\n\r\n        if (nextProps.selectId && this.state.selected !== nextProps.selectId) {\r\n            this.onClick(this.state.listItems.find(item => item.id === nextProps.selectId));\r\n        }\r\n        changed && this.setState(newState);*/\r\n    }\r\n\r\n    getIsAllZeroInstances(listItems, instances) {\r\n        listItems = listItems || this.state.listItems;\r\n        instances = instances || this.state.instances;\r\n        let isAllZeroInstances = !instances[0] && instances.length <= 1;\r\n\r\n        if (isAllZeroInstances) {\r\n            listItems.forEach(item => {\r\n                if (item.type !== 'folder' && item.instance !== 0) {\r\n                    isAllZeroInstances = false;\r\n                }\r\n            });\r\n        }\r\n        return isAllZeroInstances;\r\n    }\r\n\r\n    saveExpanded(expanded) {\r\n        window.localStorage.setItem('SideMenu.expanded', JSON.stringify(expanded || this.state.expanded));\r\n    }\r\n\r\n    showError(err) {\r\n        this.setState({errorText: err});\r\n    }\r\n\r\n    onExpand(id, e) {\r\n        e && e.stopPropagation();\r\n        if (this.state.expanded.indexOf(id) === -1) {\r\n            const expanded = this.state.expanded.concat([id]);\r\n            this.setState({expanded});\r\n            this.saveExpanded(expanded);\r\n        }\r\n    }\r\n\r\n    onCollapse(id, e) {\r\n        e && e.stopPropagation();\r\n        const pos = this.state.expanded.indexOf(id);\r\n        if (pos !== -1) {\r\n            const expanded = this.state.expanded.concat([]);\r\n            expanded.splice(pos, 1);\r\n            if (this.state.selected && this.state.selected.startsWith(id + '.')) {\r\n                this.setState({expanded, selected: id});\r\n                window.localStorage && window.localStorage.setItem('SideMenu.selected', id);\r\n            } else {\r\n                this.setState({expanded});\r\n            }\r\n            this.saveExpanded(expanded);\r\n        }\r\n    }\r\n\r\n    onDragEnd(result) {\r\n        // dropped outside the list\r\n        if (!result.destination) {\r\n            return;\r\n        }\r\n        let item = result.destination.index > result.source.index ? this.state.listItems[result.destination.index] : this.state.listItems[result.destination.index - 1];\r\n        while (item && (item.type !== 'folder' && item.parent)) {\r\n            item = this.state.listItems[item.parentIndex];\r\n        }\r\n        let parent = item ? item.id : 'script.js';\r\n        let newId = parent + '.' + result.draggableId.split('.').pop();\r\n        if (this.props.scripts[newId]) {\r\n            newId += '_' + I18n.t('copy');\r\n        }\r\n        this.props.onRename && this.props.onRename(result.draggableId, newId);\r\n    }\r\n\r\n    onDragStart(event) {\r\n        // fill the drag depth\r\n        this.setState({\r\n            dragDepth: this.state.listItems.find(i => i.id === event.draggableId).depth,\r\n            draggedId: event.draggableId\r\n        });\r\n    }\r\n\r\n    onDragUpdate = (update, provided) => {\r\n        if (!update.destination) return;\r\n        let item = this.state.listItems[update.destination.index - 1];\r\n        while (item && (item.type !== 'folder' || item.parent)) {\r\n            item = this.state.listItems[item.parentIndex];\r\n        }\r\n        if (item) {\r\n            this.setState({dragDepth: item.depth + 1});\r\n            console.log(`depth ${item.depth + 1}`);\r\n        } else {\r\n            console.log(`depth 0`);\r\n            this.setState({dragDepth: 0});\r\n        }\r\n    };\r\n\r\n    renderItemButtons(item, children) {\r\n        if (this.state.reorder) return null;\r\n        if (item.type !== 'folder') {\r\n            return [\r\n                (<IconButton className={this.props.classes.iconButtons}\r\n                             onClick={e => {\r\n                                e.stopPropagation();\r\n                                this.props.onEnableDisable && this.props.onEnableDisable(item.id, !item.enabled)\r\n                             }}\r\n                            title={item.enabled ? I18n.t('Pause script') : I18n.t('Run script')}\r\n                            key=\"startStop\"\r\n                            style={{color: item.enabled ? green[400] : red[400]}}>\r\n                            {item.enabled ? (<IconPause/>) : (<IconPlay/>)}\r\n                </IconButton>),\r\n                this.state.width > 350 ? (<IconButton\r\n                    key=\"delete\"\r\n                    title={I18n.t('Delete script')}\r\n                    disabled={item.id === 'script.js.global' || item.id === 'script.js.common'}\r\n                    onClick={e => this.onDelete(item, e)}><IconDelete/></IconButton>) : null,\r\n                (<IconButton key=\"openInEdit\" title={I18n.t('Edit script or just double click')} onClick={e => this.onEdit(item, e)}><IconDoEdit/></IconButton>),\r\n            ];\r\n        } else if (this.state.width > 350) {\r\n            if (item.id !== 'script.js' && item.id !== 'script.js.common' && item.id !== 'script.js.global' && (!children || !children.length)) {\r\n                return (<IconButton\r\n                    key=\"delete\"\r\n                    title={I18n.t('Delete folder')}\r\n                    disabled={item.id === 'script.js.global' || item.id === 'script.js.common'}\r\n                    onClick={e => this.onDelete(item, e)}><IconDelete/></IconButton>);\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n\r\n    onDelete(item, e) {\r\n        e && e.stopPropagation();\r\n        return new Promise(resolve => {\r\n            if (typeof item !== 'object') {\r\n                this.setState({deleting: item});\r\n            } else {\r\n                this.setState({deleting: item.id});\r\n            }\r\n        });\r\n    }\r\n\r\n    onEdit(item, e) {\r\n        this.onClick(item, e);\r\n        this.props.onEdit && this.props.onEdit(item.id);\r\n    }\r\n\r\n    renderFolderButtons(item, children, isExpanded) {\r\n        if (this.state.reorder) {\r\n            if (item.type !== 'folder') {\r\n                return (<IconGrip className={this.props.classes.gripHandle}/>);\r\n            } else {\r\n                return (<div className={this.props.classes.noGripHandle}/>);\r\n            }\r\n        }\r\n        if (children && children.length) {\r\n            return (\r\n                <IconButton className={this.props.classes.expandButton}\r\n                            onClick={isExpanded ? e => this.onCollapse(item.id, e) : e => this.onExpand(item.id, e)}>\r\n                    {isExpanded ? (<IconCollapse fontSize=\"small\"/>) : (<IconExpand fontSize=\"small\"/>)}\r\n                </IconButton>\r\n            );\r\n        } else {\r\n            return (<div className={this.props.classes.expandButton}/>);\r\n        }\r\n    }\r\n\r\n    getTextStyle(item) {\r\n        if (!this.state.reorder && item.type !== 'folder') {\r\n            return {\r\n                //width: 130,\r\n                width: 'calc(100% - 190px)',\r\n                overflow: 'hidden',\r\n                flex: 'none',\r\n                padding: '0 16px 0 0'\r\n            };\r\n        } else {\r\n            return {\r\n                padding: '0 16px 0 0'\r\n            };\r\n        }\r\n    }\r\n\r\n    onClick(item, e) {\r\n        e && e.stopPropagation();\r\n        if (!this.state.reorder && item) {\r\n            const expanded = this.ensureSelectedIsVisible(item);\r\n            const newState = {selected: item.id};\r\n            if (expanded) {\r\n                newState.expanded = expanded;\r\n            }\r\n            this.setState(newState);\r\n            window.localStorage && window.localStorage.setItem('SideMenu.selected', item.id);\r\n        }\r\n    }\r\n\r\n    onDblClick(item, e) {\r\n        e && e.stopPropagation();\r\n        if (this.state.reorder) return;\r\n        if (item.type === 'folder') {\r\n            const isExpanded = this.state.expanded.indexOf(item.id) !== -1;\r\n            if (isExpanded) {\r\n                this.onCollapse(item.id);\r\n            } else {\r\n                this.onExpand(item.id);\r\n            }\r\n        } else {\r\n            this.onEdit(item);\r\n        }\r\n    }\r\n\r\n    renderOneItem(items, item) {\r\n        let children = items.filter(i => i.parent === item.id);\r\n\r\n        if (item.filtered && !item.filteredPartly) return;\r\n\r\n        if (item.id === 'script.js.global' && !this.state.expertMode) {\r\n            return;\r\n        }\r\n\r\n        const depthPx = this.state.reorder ?\r\n            8 + (this.state.draggedId === item.id ? this.state.dragDepth : item.depth) * Theme.menu.depthOffset :\r\n            item.depth * Theme.menu.depthOffset;\r\n\r\n        let title = item.title;\r\n\r\n        if (this.state.searchText) {\r\n            const pos = title.toLowerCase().indexOf(this.state.searchText.toLowerCase());\r\n            if (pos !== -1) {\r\n                title = [\r\n                    (<span>{title.substring(0, pos)}</span>),\r\n                    (<span style={{color: 'orange'}}>{title.substring(pos, pos + this.state.searchText.length)}</span>),\r\n                    (<span>{title.substring(pos + this.state.searchText.length)}</span>),\r\n                ];\r\n            }\r\n        }\r\n\r\n        if (!this.state.isAllZeroInstances && item.type !== 'folder') {\r\n            title = [(<span key=\"instance\" className={this.props.classes.instances}>[{item.instance}] </span>), (\r\n                <span key=\"title\">{title}</span>)];\r\n        }\r\n\r\n        const style = Object.assign({\r\n            marginLeft: depthPx,\r\n            cursor: item.type === 'folder' && this.state.reorder ? 'default' : 'inherit',\r\n            opacity: item.filteredPartly ? 0.5 : 1\r\n        }, item.id === this.state.selected && !this.state.reorder ? Theme.colors.selected : {});\r\n\r\n        if (item.id === 'script.js.global' && item.id !== this.state.selected) {\r\n            style.color = '#00a200';\r\n        }\r\n\r\n        let isExpanded = false;\r\n        if (children && children.length) {\r\n            isExpanded = this.state.expanded.indexOf(item.id) !== -1;\r\n        }\r\n\r\n        let iconStyle = {};\r\n        if (item.id === 'script.js.global') {\r\n            iconStyle.color = '#356956';\r\n        } else if (item.id === 'script.js.common') {\r\n            iconStyle.color = '#4899e1';\r\n        }\r\n\r\n        const inner =\r\n            (<ListItem\r\n                key={item.id}\r\n                style={style}\r\n                className={(item.type === 'folder' ? this.props.classes.folder : this.props.classes.element) + ' ' + (this.state.reorder ? this.props.classes.reorder : '')}\r\n                onClick={e => this.onClick(item, e)}\r\n                onDoubleClick={e => this.onDblClick(item, e)}\r\n            >\r\n                {this.renderFolderButtons(item, children, isExpanded)}\r\n                <ListItemIcon>{item.type === 'folder' ? (isExpanded ? (<IconFolderOpened style={iconStyle}/>) : (<IconFolder style={iconStyle}/>)) : (\r\n                    <img className={this.props.classes.scriptIcon} alt={item.type} src={images[item.type] || images.def}/>)}</ListItemIcon>\r\n                <ListItemText\r\n                    classes={{primary: item.id === this.state.selected && !this.state.reorder ? this.props.classes.selected : undefined}}\r\n                    style={this.getTextStyle(item)} primary={title}/>\r\n                <ListItemSecondaryAction>{this.renderItemButtons(item, children)}</ListItemSecondaryAction>\r\n            </ListItem>);\r\n\r\n        const result = [this.state.reorder ? (\r\n            <Draggable key={item.id} draggableId={item.id} index={item.index} isDragDisabled={item.type === 'folder'}>\r\n                {(provided, snapshot) => (\r\n                    <div ref={provided.innerRef}\r\n                         {...provided.draggableProps}\r\n                         {...provided.dragHandleProps}\r\n                         style={getItemStyle(\r\n                             snapshot.isDragging,\r\n                             provided.draggableProps.style\r\n                         )}>\r\n                        {inner}\r\n                    </div>\r\n                )}\r\n            </Draggable>) : inner];\r\n\r\n        if (children && (this.state.reorder || this.state.expanded.indexOf(item.id) !== -1)) {\r\n            children.forEach(it => result.push(this.renderOneItem(items, it)));\r\n        }\r\n        return result;\r\n    }\r\n\r\n    renderAllItems(items, dragging) {\r\n        const result = [];\r\n        items.forEach(item => !item.parent && result.push(this.renderOneItem(items, item, dragging)));\r\n\r\n        return (<List dense={true} disablePadding={true}>{result}</List>);\r\n    }\r\n\r\n    onAddNew(e) {\r\n        e && e.stopPropagation();\r\n        let item = this.state.listItems.find(i => i.id === this.state.selected);\r\n        let parent = 'script.js';\r\n        while (item && item.type !== 'folder') {\r\n            item = this.state.listItems[item.parentIndex];\r\n        }\r\n        if (item) {\r\n            parent = item.id;\r\n        }\r\n\r\n        this.parent = parent;\r\n        this.setState({choosingType: true});\r\n    }\r\n\r\n    onCopy(e, id) {\r\n        e && e.stopPropagation();\r\n        let item = this.state.listItems.find(i => i.id === id);\r\n        let parent = 'script.js';\r\n        while (item && item.type !== 'folder') {\r\n            item = this.state.listItems[item.parentIndex];\r\n        }\r\n        if (item) {\r\n            parent = item.id;\r\n        }\r\n\r\n        this.parent = parent;\r\n        this.setState({copingScript: id});\r\n    }\r\n\r\n    onAddNewFolder(e) {\r\n        e && e.stopPropagation();\r\n        let item = this.state.listItems.find(i => i.id === this.state.selected);\r\n        let parent = 'script.js';\r\n        while (item && item.type !== 'folder') {\r\n            item = this.state.listItems[item.parentIndex];\r\n        }\r\n        if (item) {\r\n            parent = item.id;\r\n        }\r\n\r\n        this.parent = parent;\r\n        this.setState({creatingFolder: true});\r\n    }\r\n\r\n    onRename(e) {\r\n        e && e.stopPropagation();\r\n        this.setState({renaming: this.state.selected});\r\n    }\r\n\r\n    getUniqueName(copyId) {\r\n        let i = 1;\r\n        let word = I18n.t('Script') + ' ';\r\n        if (copyId) {\r\n            let name = getObjectName(copyId, this.props.objects[copyId]);\r\n            const m = name.match(/\\d+$/);\r\n            if (m) {\r\n                word = name.replace(/\\d+$/, '');\r\n                i = parseInt(m[0], 10) + 1;\r\n            } else {\r\n                word = name;\r\n            }\r\n        }\r\n\r\n        // eslint-disable-next-line\r\n        while (this.state.listItems.find(it => it.id === this.parent + '.' + word.replace(/\\s/g, '_') + i)) {\r\n            i++;\r\n        }\r\n        /*ignore jslint end*/\r\n        return word + i;\r\n    }\r\n\r\n    getUniqueFolderName() {\r\n        let i = 1;\r\n        // eslint-disable-next-line\r\n        while (this.state.listItems.find(it => it.id === this.parent + '.' + I18n.t('Folder') + '_' + i)) {\r\n            i++;\r\n        }\r\n        return I18n.t('Folder') + ' ' + i;\r\n    }\r\n\r\n    getToolbarButtons() {\r\n        const result = [];\r\n        const classes = this.props.classes;\r\n        if (this.state.searchMode) {\r\n            result.push((<RootRef rootRef={this.inputRef}><Input\r\n                key=\"searchInput\"\r\n                value={this.state.searchText}\r\n                className={classes.toolbarSearch}\r\n                ref={this.inputRef}\r\n                autoFocus={true}\r\n                placeholder={I18n.t('Search...')}\r\n                onChange={e => {\r\n                    this.setState({searchText: e.target.value});\r\n                    this.filterTimer && clearTimeout(this.filterTimer);\r\n                    this.filterTimer = setTimeout(() => {\r\n                        this.props.onSearch && this.props.onSearch(this.state.searchText);\r\n                    }, 400);\r\n                }}\r\n            /></RootRef>));\r\n            result.push((<IconButton\r\n                key=\"disableSearch\"\r\n                className={classes.toolbarButtons}\r\n                style={{float: 'right'}}\r\n                title={I18n.t('End search mode')}\r\n                onClick={e => {\r\n                    e.stopPropagation();\r\n                    this.filterList(false, null, () => this.props.onSearch && this.props.onSearch(this.state.searchText));\r\n                }}\r\n            ><IconClose /></IconButton>));\r\n            this.state.searchText && result.push((<IconButton\r\n                key=\"cleanSearch\"\r\n                mini=\"true\"\r\n                title={I18n.t('Clear search input')}\r\n                className={classes.toolbarButtons}\r\n                style={{marginTop: 7, float: 'right'}}\r\n                onClick={e => {\r\n                    e.stopPropagation();\r\n                    this.setState({searchText: ''}, () => this.props.onSearch && this.props.onSearch(this.state.searchText));\r\n                }}\r\n            ><IconClear fontSize=\"small\"/></IconButton>));\r\n        } else {\r\n            if (!this.state.reorder) {\r\n                // Open Menu\r\n                result.push((<IconButton\r\n                    key=\"menuButton\"\r\n                    aria-label=\"More\"\r\n                    aria-owns={this.state.menuOpened ? 'long-menu' : undefined}\r\n                    title={I18n.t('Menu')}\r\n                    aria-haspopup=\"true\"\r\n                    onClick={event => {\r\n                        event.stopPropagation();\r\n                        event.preventDefault();\r\n                        this.setState({menuOpened: true, menuAnchorEl: event.currentTarget});\r\n                    }}\r\n                >\r\n                    <IconMore />\r\n                </IconButton>));\r\n\r\n                const selectedItem = this.state.listItems.find(it => it.id === this.state.selected);\r\n                let children;\r\n                if (selectedItem && this.state.width <= 350 && selectedItem.type === 'folder') {\r\n                    children = this.state.listItems.filter(i => i.parent === this.state.selected);\r\n                }\r\n\r\n                // Menu\r\n                result.push((<Menu\r\n                    key=\"menu\"\r\n                    id=\"long-menu\"\r\n                    anchorEl={this.state.menuAnchorEl}\r\n                    open={this.state.menuOpened}\r\n                    onClose={() => this.setState({menuOpened: false, menuAnchorEl: null})}\r\n                    PaperProps={{\r\n                        style: {\r\n                            maxHeight: MENU_ITEM_HEIGHT * 6.5,\r\n                            //width: 200,\r\n                        },\r\n                    }}\r\n                >\r\n                    {this.state.width <= 350 ? (<MenuItem\r\n                        key=\"deleted\"\r\n                        disabled={!this.state.selected || this.state.selected === 'script.js.global' || this.state.selected === 'script.js.common' || (children && children.length)}\r\n                        onClick={event => {\r\n                            event.stopPropagation();\r\n                            event.preventDefault();\r\n                            if (this.state.listItems.find(item => item.parent === this.state.selected)) {\r\n                                this.showError(I18n.t('Cannot delete non empty item!'));\r\n                                return;\r\n                            }\r\n\r\n                            this.setState({menuOpened: false, menuAnchorEl: null}, () =>\r\n                                this.onDelete(this.state.selected).then(() => {}));\r\n                        }}><IconDelete className={this.props.classes.iconDropdownMenu}  style={{color: 'red'}}/>{I18n.t('Delete')}\r\n                    </MenuItem>) : null}\r\n                    <MenuItem key=\"expertMode\" selected={this.state.expertMode}\r\n                              onClick={event => {\r\n                                  event.stopPropagation();\r\n                                  event.preventDefault();\r\n                                  this.setState({menuOpened: false, menuAnchorEl: null}, () =>\r\n                                      this.props.onExpertModeChange && this.props.onExpertModeChange(!this.state.expertMode));\r\n                              }}><IconExpert className={this.props.classes.iconDropdownMenu} style={{color: 'orange'}}/>{I18n.t('Expert mode')}\r\n                    </MenuItem>\r\n                    {this.props.onExport && (<MenuItem key=\"exportAll\"\r\n                                                       onClick={event => {\r\n                                                           event.stopPropagation();\r\n                                                           event.preventDefault();\r\n                                                           this.setState({menuOpened: false, menuAnchorEl: null}, () => this.props.onExport());\r\n                                                       }}><IconExport className={this.props.classes.iconDropdownMenu} />{I18n.t('Export all scripts')}\r\n                    </MenuItem>)}\r\n                    {this.props.onImport && (<MenuItem key=\"import\"\r\n                                                       onClick={event => {\r\n                                                           event.stopPropagation();\r\n                                                           event.preventDefault();\r\n                                                           this.setState({menuOpened: false, menuAnchorEl: null}, () => this.props.onImport());\r\n                                                       }}><IconImport className={this.props.classes.iconDropdownMenu} />{I18n.t('Import scripts')}\r\n                    </MenuItem>)}\r\n                    {this.props.onThemeChange && (<MenuItem key=\"dark\"\r\n                                                       onClick={event => {\r\n                                                           //event.stopPropagation();\r\n                                                           //event.preventDefault();\r\n                                                           this.setState({menuOpened: false, menuAnchorEl: null}, () =>\r\n                                                               this.props.onThemeChange(this.state.theme === 'dark' ? 'light' : 'dark'));\r\n                                                       }}><IconDark className={this.props.classes.iconDropdownMenu} />{this.state.theme === 'dark' ? I18n.t('Light style') : I18n.t('Dark style')}\r\n                    </MenuItem>)}\r\n                    {this.props.onAddNew && (<MenuItem key=\"copy\"\r\n                                         disabled={!this.state.selected || !selectedItem || selectedItem.type === 'folder'}\r\n                                         onClick={event => {\r\n                                             const selected = this.state.selected;\r\n                                             this.setState({menuOpened: false, menuAnchorEl: null}, () => this.onCopy(event, selected))\r\n                                         }}>\r\n                        <IconCopy className={this.props.classes.iconDropdownMenu} />{I18n.t('Copy script')}\r\n                </MenuItem>)}\r\n                </Menu>));\r\n\r\n                // New Script\r\n                result.push((<IconButton\r\n                    key=\"new-script\"\r\n                    title={I18n.t('Create new script')}\r\n                    className={classes.toolbarButtons}\r\n                    style={{color: this.state.reorder ? 'red' : 'inherit'}}\r\n                    onClick={e => this.onAddNew(e)}\r\n                ><IconAdd/></IconButton>));\r\n\r\n                // New Folder\r\n                result.push((<IconButton\r\n                    key=\"new-folder\"\r\n                    title={I18n.t('Create new folder')}\r\n                    className={classes.toolbarButtons}\r\n                    style={{color: this.state.reorder ? 'red' : 'inherit'}}\r\n                    onClick={() => this.onAddNewFolder()}\r\n                ><IconAddFolder/></IconButton>));\r\n            }\r\n\r\n            // Search\r\n            result.push((<IconButton\r\n                key=\"search\"\r\n                disabled={this.state.reorder}\r\n                className={classes.toolbarButtons}\r\n                title={I18n.t('Search in scripts')}\r\n                style={{float: 'right'}}\r\n                onClick={e => {\r\n                    e.stopPropagation();\r\n                    this.setState({searchMode: true});\r\n                }}\r\n            ><IconFind/></IconButton>));\r\n\r\n            // Reorder button\r\n            result.push((<IconButton\r\n                key=\"reorder\"\r\n                title={I18n.t('Reorder scripts in folders')}\r\n                className={classes.toolbarButtons}\r\n                style={{color: this.state.reorder ? 'red' : 'inherit', float: 'right'}}\r\n                onClick={e => {\r\n                    e.stopPropagation();\r\n                    this.setState({reorder: !this.state.reorder, draggedId: ''});\r\n                }}\r\n            ><IconReorder/></IconButton>));\r\n\r\n            if (!this.state.reorder && this.state.selected && this.state.selected !== 'script.js.global' && this.state.selected !== 'script.js.common') {\r\n                // Rename\r\n                result.push((<IconButton className={classes.toolbarButtons}\r\n                                         title={I18n.t('Rename')}\r\n                                         key=\"rename\"\r\n                                         onClick={e => this.onRename(e)}\r\n                ><IconEdit/></IconButton>));\r\n\r\n\r\n                // const selectedItem = this.state.listItems.find(i => i.id === this.state.selected);\r\n                // if (selectedItem && selectedItem.type !== 'folder') {\r\n                //     // Restart\r\n                //     result.push((<IconButton className={classes.toolbarButtons}\r\n                //          key=\"restart\"\r\n                //          onClick={e => {\r\n                //              e.stopPropagation();\r\n                //              this.props.onEnableDisable && this.props.onEnableDisable();\r\n                //          }}\r\n                //     ><IconRestart/></IconButton>));\r\n                // }\r\n            }\r\n\r\n        }\r\n        return result;\r\n    }\r\n\r\n    getFolders() {\r\n        const folders = [{id: 'script.js', name: I18n.t('Root folder')}];\r\n        this.state.listItems.forEach(item => item.type === 'folder' && folders.push({id: item.id, name: item.title}));\r\n        return folders;\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n\r\n        const renamingItem = this.state.renaming && this.state.listItems.find(i => i.id === this.state.renaming);\r\n        const copingItem = this.state.copingScript && this.props.objects[this.state.copingScript];\r\n\r\n        return [(\r\n            <Drawer\r\n                key=\"drawer\"\r\n                variant=\"permanent\"\r\n                className={classes.menu}\r\n                classes={{paper: classes.drawerPaper}}\r\n                anchor='left'\r\n                onClick={() => this.onClick({id: ''})}\r\n            >\r\n                <div className={classes.toolbar}>\r\n                    {this.getToolbarButtons()}\r\n                </div>\r\n                <Divider/>\r\n                <DragDropContext\r\n                    onDragStart={e => this.onDragStart(e)}\r\n                    onDragEnd={e => this.onDragEnd(e)}\r\n                    onDragUpdate={e => this.onDragUpdate(e)}\r\n                >\r\n                    <Droppable droppableId=\"droppable\">\r\n                        {(provided, snapshot) => (\r\n                            <div ref={provided.innerRef}\r\n                                //style={getListStyle(snapshot.isDraggingOver)}\r\n                                 className={classes.innerMenu}>\r\n                                {this.renderAllItems(this.state.listItems)}\r\n                            </div>\r\n                        )}\r\n                    </Droppable>\r\n                </DragDropContext>\r\n            </Drawer>),\r\n            renamingItem ? (<DialogRename\r\n                key=\"dialog-rename\"\r\n                name={renamingItem.title}\r\n                title={I18n.t('Rename')}\r\n                id={this.state.renaming}\r\n                folder={renamingItem.type === 'folder'}\r\n                instance={renamingItem.instance}\r\n                instances={this.props.instances}\r\n                onClose={() => this.setState({renaming: false})}\r\n                onRename={(oldId, newName, newId, newInstance) => this.props.onRename && this.props.onRename(oldId, newName, newId, newInstance)}\r\n            />) : null,\r\n            this.state.deleting ? (<DialogDelete\r\n                key=\"dialog-delete\"\r\n                name={this.state.listItems.find(i => i.id === this.state.deleting).title}\r\n                id={this.state.deleting}\r\n                onClose={() => this.setState({deleting: false})}\r\n                onDelete={id => this.props.onDelete && this.props.onDelete(id)}\r\n            />) : null,\r\n            this.state.choosingType ? (<DialogAddNewScript\r\n                key=\"dialog-script-type\"\r\n                onClose={type => {\r\n                    this.setState({choosingType: false});\r\n                    type && this.setState({creatingScript: type})\r\n                }}\r\n            />) : null,\r\n            this.state.creatingScript ? (<DialogNew\r\n                key=\"dialog-new-script\"\r\n                onClose={() => this.setState({creatingScript: false})}\r\n                title={I18n.t('Create new script')}\r\n                name={this.getUniqueName()}\r\n                parents={this.getFolders()}\r\n                folder={false}\r\n                instance={this.props.instances[0] || 0}\r\n                instances={this.props.instances}\r\n                type={this.state.creatingScript}\r\n                parent={this.parent}\r\n                onAdd={(id, name, instance, type) => {\r\n                    this.props.onAddNew && this.props.onAddNew(id, name, false, instance, type);\r\n                }}\r\n            />) : null,\r\n            this.state.copingScript ? (<DialogNew\r\n                key=\"dialog-copy-script\"\r\n                onClose={() => this.setState({copingScript: ''})}\r\n                title={I18n.t('Copy script')}\r\n                name={this.getUniqueName(this.state.copingScript)}\r\n                parents={this.getFolders()}\r\n                folder={false}\r\n                instance={parseInt((copingItem && copingItem.common && copingItem.common.engine && copingItem.common.engine.split('.').pop()) || 0, 10)}\r\n                instances={this.props.instances}\r\n                type={(copingItem && copingItem.common && copingItem.common.engineType) || 'Javascript/js'}\r\n                parent={this.parent}\r\n                onAdd={(id, name, instance, type) => {\r\n                    const copingItem = this.state.copingScript && this.props.objects[this.state.copingScript];\r\n                    this.props.onAddNew && this.props.onAddNew(id, name, false, instance, type, copingItem && copingItem.common && copingItem.common.source);\r\n                }}\r\n            />) : null,\r\n            this.state.creatingFolder ? (<DialogNew\r\n                key=\"dialog-new-folder\"\r\n                onClose={() => this.setState({creatingFolder: false})}\r\n                title={I18n.t('Create new folder')}\r\n                parents={this.getFolders()}\r\n                name={this.getUniqueFolderName()}\r\n                parent={this.parent}\r\n                onAdd={(id, name) => {\r\n                    this.props.onAddNew && this.props.onAddNew(id, name, true);\r\n                }}\r\n            />) : null,\r\n            this.state.errorText ? (<DialogError onClose={() => this.setState({errorText: ''})} text={this.state.errorText}/>) : null\r\n        ];\r\n    }\r\n}\r\n\r\nSideDrawer.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    instances: PropTypes.array.isRequired,\r\n    scripts: PropTypes.object.isRequired,\r\n    scriptsHash: PropTypes.number,\r\n    onEdit: PropTypes.func,\r\n    selectId: PropTypes.string,\r\n    expertMode: PropTypes.bool,\r\n    onExpertModeChange: PropTypes.func,\r\n    onEnableDisable: PropTypes.func,\r\n    runningInstances: PropTypes.object,\r\n    theme: PropTypes.string,\r\n    onSelect: PropTypes.func,\r\n    onAddNew: PropTypes.func,\r\n    onRename: PropTypes.func,\r\n    onDelete: PropTypes.func,\r\n    onImport: PropTypes.func,\r\n    onExport: PropTypes.func,\r\n    objects: PropTypes.object,\r\n    onSearch: PropTypes.func,\r\n    onThemeChange: PropTypes.func,\r\n    width: PropTypes.number\r\n};\r\n\r\nexport default withStyles(styles)(SideDrawer);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport {MdDeleteForever as IconDelete} from 'react-icons/md';\r\nimport {MdVerticalAlignBottom as IconBottom} from 'react-icons/md';\r\nimport {MdContentCopy as IconCopy} from 'react-icons/md';\r\n\r\nimport I18n from './i18n';\r\nimport {withStyles} from \"@material-ui/core/styles/index\";\r\n\r\nfunction getTimeString(d) {\r\n    let text;\r\n    let i = d.getHours();\r\n    if (i < 10) i = '0' + i.toString();\r\n    text = i + ':';\r\n\r\n    i = d.getMinutes();\r\n    if (i < 10) i = '0' + i.toString();\r\n    text += i + ':';\r\n    i = d.getSeconds();\r\n    if (i < 10) i = '0' + i.toString();\r\n    text += i + '.';\r\n    i = d.getMilliseconds();\r\n    if (i < 10) {\r\n        i = '00' + i.toString();\r\n    } else if (i < 100) {\r\n        i = '0' + i.toString();\r\n    }\r\n    text += i;\r\n    return text;\r\n}\r\nconst TOOLBOX_WIDTH = 34;\r\n\r\nconst styles = theme => ({\r\n    logBox: {\r\n        width: '100%',\r\n        height: '100%',\r\n        position: 'relative',\r\n        overflow: 'hidden'\r\n    },\r\n    logBoxInner: {\r\n        color: theme.palette.type === 'dark' ? 'white' : 'black',\r\n        width: `calc(100% - ${TOOLBOX_WIDTH}px)`,\r\n        height: '100%',\r\n        marginLeft: TOOLBOX_WIDTH,\r\n        overflow: 'auto',\r\n        position: 'relative'\r\n    },\r\n    info: {\r\n        background: theme.palette.type === 'dark' ? 'darkgrey' : 'lightgrey',\r\n        color: theme.palette.type === 'dark' ?  'black' : 'black'\r\n    },\r\n    error: {\r\n        background: '#FF0000',\r\n        color: theme.palette.type === 'dark' ?  'black' : 'white'\r\n    },\r\n    warn: {\r\n        background: '#FF8000',\r\n        color: theme.palette.type === 'dark' ?  'black' : 'white'\r\n    },\r\n    debug: {\r\n        background: 'gray',\r\n        opacity: 0.8,\r\n        color: theme.palette.type === 'dark' ?  'black' : 'white'\r\n    },\r\n    silly: {\r\n        background: 'gray',\r\n        opacity: 0.6,\r\n        color: theme.palette.type === 'dark' ? 'black' : 'white'\r\n    },\r\n    table: {\r\n        fontFamily: 'monospace',\r\n        width: '100%',\r\n\r\n    },\r\n    toolbox: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        marginLeft: 2,\r\n        width: TOOLBOX_WIDTH,\r\n        height: '100%',\r\n        boxShadow: '2px 0px 4px -1px rgba(0, 0, 0, 0.2), 4px 0px 5px 0px rgba(0, 0, 0, 0.14), 1px 0px 10px 0px rgba(0, 0, 0, 0.12)'\r\n    },\r\n    trTime: {\r\n        width: 90\r\n    },\r\n    trSeverity: {\r\n        width: 40,\r\n        fontWeight: 'bold'\r\n    },\r\n    iconButtons: {\r\n        width: 32,\r\n        height: 32,\r\n        padding: 4\r\n    }\r\n});\r\n\r\nfunction copyToClipboard(str) {\r\n    const el = window.document.createElement('textarea');\r\n    el.value = str;\r\n    window.document.body.appendChild(el);\r\n    el.select();\r\n    window.document.execCommand('copy');\r\n    window.document.body.removeChild(el);\r\n}\r\n\r\nfunction paddingMs(ms) {\r\n    if (ms < 10) return '00' + ms;\r\n    if (ms < 100) return '0' + ms;\r\n    return ms;\r\n}\r\nclass Log extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            lines: {},\r\n            goBottom: true,\r\n            selected: null,\r\n            editing: this.props.editing || []\r\n        };\r\n        this.text = {};\r\n        this.lastIndex = null;\r\n        this.messagesEnd = React.createRef();\r\n        this.logHandlerBound = this.logHandler.bind(this);\r\n    }\r\n\r\n    generateLine(message) {\r\n        return (<tr key={'tr_' + message.ts} className={this.props.classes[message.severity]}>\r\n            <td key=\"tdTime\" className={this.props.classes.trTime}>{getTimeString(new Date(message.ts))}</td>\r\n            <td key=\"tdSeverity\" className={this.props.classes.trSeverity}>{message.severity}</td>\r\n            <td key=\"tdMessage\">{message.message}</td>\r\n        </tr>);\r\n    }\r\n\r\n    scrollToBottom() {\r\n        this.messagesEnd && this.messagesEnd.current && this.messagesEnd.current.scrollIntoView({behavior: 'smooth'});\r\n    }\r\n    logHandler(message) {\r\n        let allLines = this.state.lines;\r\n        const selected = this.state.editing.find(id => message.message.indexOf(id) !== -1);\r\n        if (!selected) return;\r\n\r\n        let lines = allLines[selected] || [];\r\n        let text = this.text[selected] || [];\r\n\r\n        lines.push(this.generateLine(message));\r\n        let severity = message.severity;\r\n        if (severity === 'info' || severity === 'warn') {\r\n            severity += ' ';\r\n        }\r\n        const date = new Date(message.ts);\r\n        text.push(`${date.toLocaleString()}.${paddingMs(date.getMilliseconds())}\\t[${severity}]: ${message.message}`);\r\n        if (lines.length > 300) {\r\n            lines.splice(0, lines.length - 300);\r\n            text.splice(0, lines.length - 300);\r\n        }\r\n        this.text[selected] = text;\r\n        allLines[selected] = lines;\r\n\r\n        this.setState({lines: allLines});\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.connection.registerLogHandler(this.logHandlerBound);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.connection.unregisterLogHandler(this.logHandlerBound);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.state.goBottom && this.scrollToBottom();\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.selected !== this.state.selected) {\r\n            let selected = nextProps.selected;\r\n            let allLines = this.state.lines;\r\n            allLines[selected] = allLines[selected] || [];\r\n            this.text[selected] = this.text[selected] || [];\r\n            this.setState({selected});\r\n        }\r\n\r\n        if (JSON.stringify(nextProps.editing) !== JSON.stringify(this.state.editing)) {\r\n            const editing = JSON.parse(JSON.stringify(nextProps.editing));\r\n            let allLines = this.state.lines;\r\n            for (const id in this.text) {\r\n                if (this.text.hasOwnProperty(id)) {\r\n                    if (editing.indexOf(id) === -1) {\r\n                        delete this.text[id];\r\n                        delete allLines[id];\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.setState({editing});\r\n        }\r\n    }\r\n\r\n    onCopy() {\r\n        copyToClipboard((this.text[this.state.selected] || []).join('\\n'));\r\n    }\r\n\r\n    clearLog() {\r\n        let allLines = this.state.lines;\r\n        if (allLines[this.state.selected]) {\r\n            allLines[this.state.selected] = [];\r\n        }\r\n        if (this.text[this.state.selected]) {\r\n            this.text[this.state.selected] = [];\r\n        }\r\n        this.setState({lines: allLines});\r\n    }\r\n\r\n    render() {\r\n        const lines = this.state.selected && this.state.lines[this.state.selected];\r\n        return (\r\n            <div className={this.props.classes.logBox}>\r\n                <div className={this.props.classes.toolbox} key=\"toolbox\">\r\n                    <IconButton className={this.props.classes.iconButtons} onClick={() => this.setState({goBottom: !this.state.goBottom})} color={this.state.goBottom ? 'secondary' : ''}><IconBottom/></IconButton>\r\n                    {lines && lines.length ? (<IconButton className={this.props.classes.iconButtons} onClick={() => this.clearLog()}><IconDelete/></IconButton>) : null}\r\n                    {lines && lines.length ? (<IconButton className={this.props.classes.iconButtons} onClick={() => this.onCopy()}><IconCopy/></IconButton>) : null}\r\n                </div>\r\n                {this.state.selected && lines && lines.length ?\r\n                    (<div className={this.props.classes.logBoxInner} key=\"logList\">\r\n                        <table key=\"logTable\" className={this.props.classes.table}><tbody>{lines}</tbody></table>\r\n                        <div key=\"logScrollPoint\" ref={this.messagesEnd} style={{float: 'left', clear: 'both'}}/>\r\n                    </div>) :\r\n                    (<div key=\"logList\" className={this.props.classes.logBoxInner} style={{paddingLeft: 10}}>{I18n.t('Log outputs')}</div>)\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nLog.propTypes = {\r\n    selected: PropTypes.string\r\n};\r\n\r\nexport default withStyles(styles)(Log);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport {MdGTranslate as IconNoCheck} from 'react-icons/md';\r\nimport I18n from '../i18n';\r\n\r\nfunction isIdOfGlobalScript(id) {\r\n    return /^script\\.js\\.global\\./.test(id);\r\n}\r\nlet index = 0;\r\nclass ScriptEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: 'current',\r\n            isDark: props.isDark || false,\r\n            language: props.language || 'javascript',\r\n            readOnly: props.readOnly || false,\r\n            alive: true,\r\n            check: false,\r\n            searchText: this.props.searchText || ''\r\n        };\r\n        this.monacoDiv = null; //ref\r\n        this.editor = null;\r\n        this.monaco = window.monaco;\r\n        this.insert = '';\r\n        this.originalCode = props.code || '';\r\n        this.globalTypingHandles  = [];\r\n        this.typings = {}; // TypeScript declarations\r\n        this.lastSearch = '';\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!this.monaco) {\r\n            this.monaco = window.monaco;\r\n            if (!this.monaco) {\r\n                console.log('wait for monaco loaded');\r\n                return setTimeout(() => this.forceUpdate(), 100);\r\n            }\r\n        }\r\n        if (!this.editor) {\r\n            this.props.onRegisterSelect && this.props.onRegisterSelect(() => this.editor.getModel().getValueInRange(this.editor.getSelection()));\r\n            // For some reason we have to get the original compiler options\r\n            // and assign new properties one by one\r\n            const compilerOptions = this.monaco.languages.typescript.typescriptDefaults['getCompilerOptions']();\r\n            compilerOptions.target = this.monaco.languages.typescript.ScriptTarget.ES2015;\r\n            compilerOptions.allowJs = true;\r\n            compilerOptions.checkJs = this.props.checkJs !== false;\r\n            compilerOptions.noLib = true;\r\n            compilerOptions.lib = [];\r\n            compilerOptions.moduleResolution = this.monaco.languages.typescript.ModuleResolutionKind.NodeJs;\r\n            this.monaco.languages.typescript.typescriptDefaults.setCompilerOptions(compilerOptions);\r\n\r\n            this.setTypeCheck(false);\r\n\r\n            // Create the editor instances\r\n            this.editor = this.monaco.editor.create(this.monacoDiv, {\r\n                lineNumbers: 'on',\r\n                scrollBeyondLastLine: false,\r\n                automaticLayout: true\r\n            });\r\n\r\n            this.editor.onDidChangeModelContent(e => {\r\n                this.onChange(this.editor.getValue());\r\n            });\r\n\r\n            // Load typings for the JS editor\r\n            /** @type {string} */\r\n            let scriptAdapterInstance = this.props.connection.getScripts().instances[0];\r\n            if (scriptAdapterInstance || scriptAdapterInstance === 0) {\r\n                this.props.connection.sendTo('javascript.' + scriptAdapterInstance, 'loadTypings', null, result => {\r\n                    this.setState({alive: true, check: true});\r\n                    this.setTypeCheck(true);\r\n                    if (result.typings) {\r\n                        this.typings = result.typings;\r\n                        this.setEditorTypings();\r\n                    } else {\r\n                        console.error(`failed to load typings: ${result.error}`);\r\n                    }\r\n                });\r\n            }\r\n            this.editor.addCommand(this.monaco.KeyMod.CtrlCmd | this.monaco.KeyCode.KEY_S, () =>\r\n                this.onForceSave());\r\n        }\r\n        const options = {\r\n            selectOnLineNumbers: true,\r\n            scrollBeyondLastLine: false,\r\n            automaticLayout: true,\r\n            readOnly: this.state.readOnly,\r\n            language: this.state.language,\r\n            isDark: this.state.isDark\r\n        };\r\n        this.setEditorOptions(options);\r\n        this.editor.focus();\r\n        this.editor.setValue(this.originalCode);\r\n    }\r\n\r\n    /**\r\n     * Sets some options of the code editor\r\n     * @param {object} options The editor options to change\r\n     * @param {Partial<{readOnly: boolean, lineWrap: boolean, language: EditorLanguage, typeCheck: boolean}>} options\r\n     */\r\n    setEditorOptions(options) {\r\n        if (!options) return;\r\n        if (options.language) this.setEditorLanguage(options.language);\r\n        if (options.readOnly !== undefined) this.editor.updateOptions({readOnly: options.readOnly});\r\n        if (options.lineWrap !== undefined) this.editor.updateOptions({wordWrap: options.lineWrap ? 'on' : 'off'});\r\n        if (options.typeCheck !== undefined) this.setTypeCheck(options.typeCheck);\r\n        if (options.isDark !== undefined) this.monaco.editor.setTheme(options.isDark ? 'vs-dark' : 'vs');\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.editor) {\r\n            this.props.onRegisterSelect && this.props.onRegisterSelect(null);\r\n            this.editor.dispose();\r\n            this.editor = null;\r\n        }\r\n    }\r\n\r\n    /** @typedef {\"javascript\" | \"typescript\" | \"coffee\"} EditorLanguage */\r\n\r\n    /**\r\n     * Sets the language of the code editor\r\n     * @param {monaco.editor.IStandaloneCodeEditor} editorInstance The editor instance to change the options for\r\n     * @param {EditorLanguage} language\r\n     */\r\n    setEditorLanguage(language) {\r\n        // we need to recreate the model when changing languages,\r\n        // so remember its settings\r\n        const model = this.editor.getModel();\r\n        const code = model.getValue();\r\n        const uri = model.uri.path;\r\n        const filenameWithoutExtension =\r\n            typeof uri === 'string' && uri.indexOf('.') > -1\r\n                ? uri.substr(0, uri.lastIndexOf('.'))\r\n                : 'index';\r\n        const extension =\r\n            language === 'javascript' ? 'js'\r\n                : language === 'typescript' ? 'ts'\r\n                : language === 'coffee' ? 'coffee'\r\n                    : language;\r\n        // get rid of the original model\r\n        model.dispose();\r\n        // Both JS and TS need the model to work in TypeScript as the script type\r\n        // is inferred from the file extension\r\n        const newLanguage = (language === 'javascript' || language === 'typescript') ? 'typescript' : language;\r\n\r\n        const newModel = this.monaco.editor.createModel(\r\n            code, newLanguage, this.monaco.Uri.from({path: `${filenameWithoutExtension}${index++}.${extension}`})\r\n        );\r\n        this.editor.setModel(newModel);\r\n    }\r\n\r\n    /**\r\n     * Enables or disables the type checking in the editor\r\n     * @param {boolean} enabled - Whether type checking is enabled or not\r\n     */\r\n    setTypeCheck(enabled) {\r\n        const options = {\r\n            noSemanticValidation: !this.state.alive || !enabled, // toggle the type checking\r\n            noSyntaxValidation: !this.state.alive // always check the syntax\r\n        };\r\n        this.monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions(options);\r\n    }\r\n\r\n    /**\r\n     * Adds the given declaration file to the editor\r\n     * @param {string} path The file path of the typings to add\r\n     * @param {string} typings The declaration file to add\r\n     * @param {boolean} [isGlobal=false] Whethere the file is a global declaration file\r\n     * @returns {void}\r\n     */\r\n    addTypingsToEditor(path, typings, isGlobal) {\r\n        try {\r\n            const handle = this.monaco.languages.typescript.typescriptDefaults.addExtraLib(typings, path);\r\n            if (isGlobal) this.globalTypingHandles.push(handle);\r\n        } catch (e) { /* might be added already */}\r\n    }\r\n\r\n    setEditorTypings() {\r\n        // clear previously added global typings\r\n        for (const handle of this.globalTypingHandles) {\r\n            handle && handle.dispose();\r\n        }\r\n\r\n        const isGlobalScript = isIdOfGlobalScript(this.state.name);\r\n        // The filename of the declarations this script can see if it is a global script\r\n        const partialDeclarationsPath = this.state.name + '.d.ts';\r\n        for (const path of Object.keys(this.typings)) {\r\n            // global scripts don't get to see all other global scripts\r\n            // but only a part of them\r\n            if (isGlobalScript) {\r\n                if (path === 'global.d.ts') continue;\r\n                if (path.startsWith('script.js.global') && path !== partialDeclarationsPath) continue;\r\n            }\r\n            this.addTypingsToEditor(path, this.typings[path], isGlobalScript);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Inserts some text into the given editor\r\n     * @param {string} text The text to add\r\n     */\r\n    insertTextIntoEditor(text) {\r\n        const selection = this.editor.getSelection();\r\n        const range = new this.monaco.Range(\r\n            selection.startLineNumber, selection.startColumn,\r\n            selection.endLineNumber, selection.endColumn\r\n        );\r\n        this.editor.executeEdits('', [{range: range, text: text, forceMoveMarkers: true}]);\r\n        this.editor.focus();\r\n    }\r\n\r\n    highlightText(text) {\r\n        let range = this.editor.getModel().findMatches(text);\r\n        if (range && range.length) {\r\n            range.forEach(r => this.editor.setSelection(r.range));\r\n            this.editor.revealLine(range[0].range.startLineNumber);\r\n        } else {\r\n            const row = this.editor.getPosition().lineNumber;\r\n            const col = this.editor.getPosition().column;\r\n            this.editor.setSelection(new this.monaco.Range(row,col,row,col));\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        const options = {};\r\n        if (this.state.name !== nextProps.name) {\r\n            this.setState({name: nextProps.name});\r\n            this.originalCode = nextProps.code || '';\r\n            this.editor && this.editor.setValue(nextProps.code);\r\n        }\r\n\r\n        if (nextProps.searchText !== this.lastSearch) {\r\n            this.lastSearch = nextProps.searchText;\r\n            if (this.lastSearch) {\r\n                this.highlightText(this.lastSearch);\r\n            }\r\n\r\n        }\r\n\r\n        if (this.state.language !== (nextProps.language || 'javascript')) {\r\n            this.setState({language: nextProps.language || 'javascript'});\r\n            options.language = nextProps.language || 'javascript';\r\n        } else if (this.state.readOnly !== (nextProps.readOnly || false)) {\r\n            this.setState({readOnly: nextProps.readOnly || false});\r\n            options.readOnly = nextProps.readOnly;\r\n        } else if (this.state.isDark !== (nextProps.isDark || false)) {\r\n            this.setState({isDark: nextProps.isDark || false});\r\n            options.isDark = nextProps.isDark;\r\n        }\r\n\r\n        this.setEditorOptions(options);\r\n\r\n        if (this.insert !== nextProps.insert) {\r\n            this.insert = nextProps.insert;\r\n            if (nextProps.insert) {\r\n                this.insertTextIntoEditor(nextProps.insert);\r\n                setTimeout(() => this.props.onInserted && this.props.onInserted(), 100);\r\n            }\r\n        }\r\n    }\r\n\r\n    onChange(newValue, e) {\r\n        if (!this.props.readOnly) {\r\n            this.props.onChange && this.props.onChange(this.editor.getValue());\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (!this.monaco) {\r\n            setTimeout(() => {\r\n                this.monaco = window.monaco;\r\n                this.forceUpdate()\r\n            }, 200);\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <div ref={el => this.monacoDiv = el} style={{width: '100%', height: '100%', overflow: 'hidden', position: 'relative'}}>\r\n                {!this.state.check && (<Button\r\n                    mini\r\n                    title={I18n.t('Check is not active, because javascript adapter is disabled')}\r\n                    style={{bottom: 10, right: 10, opacity: 0.5, position: 'absolute', zIndex: 1, background: 'red', color: 'white'}}\r\n                    variant=\"fab\"\r\n                    color=\"secondary\"><IconNoCheck/></Button>)}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nScriptEditor.propTypes = {\r\n    connection: PropTypes.object,\r\n    name: PropTypes.string,\r\n    onChange: PropTypes.func,\r\n    onForceSave: PropTypes.func,\r\n    onInserted: PropTypes.func,\r\n    isDark: PropTypes.bool,\r\n    readOnly: PropTypes.bool,\r\n    code: PropTypes.string,\r\n    language: PropTypes.string,\r\n    onRegisterSelect: PropTypes.func,\r\n    searchText: PropTypes.string,\r\n    checkJs: PropTypes.bool\r\n};\r\n\r\nexport default ScriptEditor;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\n\r\nimport I18n from '../i18n';\r\nimport DialogMessage from '../Dialogs/Message';\r\nimport DialogError from '../Dialogs/Error';\r\nimport DialogExport from '../Dialogs/Export';\r\nimport DialogImport from '../Dialogs/Import';\r\n\r\nlet languageBlocklyLoaded = false;\r\nlet languageOwnLoaded = false;\r\nlet toolboxText = null;\r\nlet toolboxXml;\r\nlet scriptsLoaded = [];\r\nconst styles = theme => ({\r\n    darkBackground: {\r\n        stroke: '#3a3a3a !important',\r\n        fill: '#515151 !important'\r\n    }\r\n});\r\n\r\nclass BlocklyEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.blockly = null; //ref\r\n        this.blocklyWorkspace = null;\r\n        this.toolbox = null;\r\n        this.Blockly = window.Blockly;\r\n\r\n        this.state = {\r\n            languageOwnLoaded,\r\n            languageBlocklyLoaded,\r\n            changed: false,\r\n            message: '',\r\n            error: '',\r\n            theme: this.props.theme,\r\n            exportText: '',\r\n            importText: false,\r\n            searchText: this.props.searchText || '',\r\n        };\r\n        this.originalCode = props.code || '';\r\n\r\n        this.someSelected = false;\r\n\r\n        this.onResizeBind = this.onResize.bind(this);\r\n\r\n        this.lastCommand = '';\r\n        this.blinkBlock = null;\r\n        this.loadLanguages();\r\n    }\r\n\r\n    static loadJS(url, callback, location) {\r\n        const scriptTag = document.createElement('script');\r\n        scriptTag.src = url;\r\n\r\n        scriptTag.onload = callback;\r\n        scriptTag.onreadystatechange = callback;\r\n\r\n        try {\r\n            (location || window.document.body).appendChild(scriptTag);\r\n        } catch (e) {\r\n            console.error('Cannot load ' + url + ': ' + e);\r\n            callback && callback();\r\n        }\r\n    };\r\n\r\n    static loadScripts(scripts, callback) {\r\n        if (!scripts || !scripts.length) {\r\n            return callback && callback();\r\n        }\r\n        const adapter = scripts.pop();\r\n        if (scriptsLoaded.indexOf(adapter) === -1) {\r\n            scriptsLoaded.push(adapter);\r\n            BlocklyEditor.loadJS('../../adapter/' + adapter + '/blockly.js', (/*data, textStatus, jqxhr*/) =>\r\n                setTimeout(() => BlocklyEditor.loadScripts(scripts, callback), 0));\r\n        } else {\r\n            setTimeout(() => BlocklyEditor.loadScripts(scripts, callback), 0);\r\n        }\r\n    }\r\n\r\n    static loadCustomBlockly(objects, callback) {\r\n        // get all adapters, that can have blockly\r\n        const toLoad = [];\r\n        for (const id in objects) {\r\n            if (!objects.hasOwnProperty(id) || !objects[id]) continue;\r\n            if (!id.match(/^system\\.adapter\\./)) continue;\r\n            if (objects[id].type !== 'adapter') continue;\r\n            if (objects[id].common && objects[id].common.blockly) {\r\n                console.log('Detected custom blockly: ' + objects[id].common.name);\r\n                toLoad.push(objects[id].common.name);\r\n            }\r\n        }\r\n\r\n        BlocklyEditor.loadScripts(toLoad, callback);\r\n    }\r\n\r\n    searchBlocks(text) {\r\n        const dom = this.Blockly.Xml.workspaceToDom(this.blocklyWorkspace);\r\n        let exportText = this.Blockly.Xml.domToPrettyText(dom).toLowerCase();\r\n        const blocks = exportText.match(/<shadow type=\"field_oid\" id=\"[^\"]+\">\\n\\s*<field name=\"oid\">[^<]+<\\/field>/gi);\r\n        if (blocks) {\r\n            const ids = blocks.map(b => {\r\n                const m = b.match(/id=\"([^\"]+)\"/g);\r\n                return m && m[0].substring(4, m[0].length - 1);\r\n            }).filter(id => !!id);\r\n            const allBlocks = this.blocklyWorkspace.getAllBlocks();\r\n            return allBlocks.filter(b => {\r\n                return ids.indexOf(b.id.toLowerCase()) !== -1;\r\n            });\r\n        } else {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    searchId() {\r\n        const blocks = this.lastSearch && this.searchBlocks(this.lastSearch);\r\n        if (blocks && blocks.length) {\r\n            this.someSelected = true;\r\n            blocks.forEach(b => b.addSelect());\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.command && this.lastCommand !== nextProps.command) {\r\n            this.lastCommand = nextProps.command;\r\n            setTimeout(() => this.lastCommand = '', 300);\r\n            if (this.lastCommand === 'check') {\r\n                this.blocklyCheckBlocks((err, badBlock) => {\r\n                    if (!err) {\r\n                        this.setState({message: I18n.t('Ok')});\r\n                    } else {\r\n                        badBlock && this.blocklyBlinkBlock(badBlock);\r\n                        this.setState({error: {text: I18n.t(err), title: I18n.t('Error was found')}});\r\n                        this.blinkBlock = badBlock;\r\n                    }\r\n                });\r\n            } else if (this.lastCommand === 'export') {\r\n                this.exportBlocks();\r\n            } else if (this.lastCommand === 'import') {\r\n                this.importBlocks();\r\n            }\r\n        }\r\n\r\n        if (nextProps.searchText !== this.lastSearch) {\r\n            this.lastSearch = nextProps.searchText;\r\n            this.searchId();\r\n        }\r\n        if (this.state.theme !== nextProps.theme) {\r\n            this.setState({theme: nextProps.theme}, () => this.updateBackground());\r\n        }\r\n\r\n        if (this.originalCode !== nextProps.code) {\r\n            this.originalCode = nextProps.code || '';\r\n            this.loadCode();\r\n            this.lastSearch && this.searchId();\r\n        }\r\n    }\r\n\r\n    loadLanguages() {\r\n        // load blockly language\r\n        if (!languageBlocklyLoaded) {\r\n            const fileLang = window.document.createElement('script');\r\n            fileLang.setAttribute('type', 'text/javascript');\r\n            fileLang.setAttribute('src', 'google-blockly/msg/js/' + I18n.getLanguage() + '.js');\r\n\r\n            // most browsers\r\n            fileLang.onload = () => {\r\n                languageBlocklyLoaded = true;\r\n                this.setState({languageBlocklyLoaded});\r\n            };\r\n            // IE 6 & 7\r\n            fileLang.onreadystatechange = () => {\r\n                if (this.readyState === 'complete') {\r\n                    languageBlocklyLoaded = true;\r\n                    this.setState({languageBlocklyLoaded});\r\n                }\r\n            };\r\n            window.document.getElementsByTagName('head')[0].appendChild(fileLang);\r\n        }\r\n        if (!languageOwnLoaded) {\r\n            const fileCustom = window.document.createElement('script');\r\n            fileCustom.setAttribute('type', 'text/javascript');\r\n            fileCustom.setAttribute('src', 'google-blockly/own/msg/' + I18n.getLanguage() + '.js');\r\n            // most browsers\r\n            fileCustom.onload = () => {\r\n                languageOwnLoaded = true;\r\n                this.setState({languageOwnLoaded});\r\n            };\r\n            // IE 6 & 7\r\n            fileCustom.onreadystatechange = () => {\r\n                if (this.readyState === 'complete') {\r\n                    languageOwnLoaded = true;\r\n                    this.setState({languageOwnLoaded});\r\n                }\r\n            };\r\n            window.document.getElementsByTagName('head')[0].appendChild(fileCustom);\r\n        }\r\n    }\r\n\r\n    onResize() {\r\n        this.Blockly.svgResize(this.blocklyWorkspace);\r\n    }\r\n\r\n    jsCode2Blockly(text) {\r\n        text = text || '';\r\n        const lines = text.split(/[\\r\\n]+|\\r|\\n/g);\r\n        let xml = '';\r\n        for (let l = lines.length - 1; l >= 0; l--) {\r\n            if (lines[l].substring(0, 2) === '//') {\r\n                xml = lines[l].substring(2);\r\n                break;\r\n            }\r\n        }\r\n        if (xml.substring(0, 4) === '<xml') {\r\n            return xml;\r\n        } else {\r\n            let code;\r\n            try {\r\n                code = window.decodeURIComponent(window.atob(xml));\r\n            } catch (e) {\r\n                code = null;\r\n                console.error('cannot decode: ' + xml);\r\n                console.error(e);\r\n            }\r\n            return code;\r\n        }\r\n    }\r\n\r\n    blocklyBlinkBlock(block) {\r\n        for (let i = 300; i < 3000; i = i + 300) {\r\n            setTimeout(() => block.select(), i);\r\n            setTimeout(() => block.unselect(), i + 150);\r\n        }\r\n    }\r\n\r\n    blocklyCheckBlocks(cb) {\r\n        let warningText;\r\n        if (!this.blocklyWorkspace || this.blocklyWorkspace.getAllBlocks().length === 0) {\r\n            cb && cb('no blocks found');\r\n            return;\r\n        }\r\n        let badBlock = this.blocklyGetUnconnectedBlock();\r\n        if (badBlock) {\r\n            warningText = 'not properly connected';\r\n        } else {\r\n            badBlock = this.blocklyGetBlockWithWarning();\r\n            if (badBlock) warningText = 'warning on this block';\r\n        }\r\n\r\n        if (badBlock) {\r\n            if (cb) {\r\n                cb(warningText, badBlock);\r\n            } else {\r\n                this.blocklyBlinkBlock(badBlock);\r\n            }\r\n            return false;\r\n        }\r\n\r\n        cb();\r\n\r\n        return true;\r\n    }\r\n\r\n    // get unconnected block\r\n    blocklyGetUnconnectedBlock () {\r\n        const blocks = this.blocklyWorkspace.getAllBlocks();\r\n        let block;\r\n        for (let i = 0; (block = blocks[i]); i++) {\r\n            const connections = block.getConnections_(true);\r\n            let conn;\r\n            for (let j = 0; (conn = connections[j]); j++) {\r\n                if (!conn.sourceBlock_ || ((conn.type === this.Blockly.INPUT_VALUE || conn.type === this.Blockly.OUTPUT_VALUE) && !conn.targetConnection && !conn._optional)) {\r\n                    return block;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    // get block with warning\r\n    blocklyGetBlockWithWarning() {\r\n        const blocks = this.blocklyWorkspace.getAllBlocks();\r\n        let block;\r\n        for (let i = 0; (block = blocks[i]); i++) {\r\n            if (block.warning) {\r\n                return block;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    blocklyCode2JSCode(oneWay) {\r\n        let code = this.Blockly.JavaScript.workspaceToCode(this.blocklyWorkspace);\r\n        if (!oneWay) {\r\n            code += '\\n';\r\n            const dom = this.Blockly.Xml.workspaceToDom(this.blocklyWorkspace);\r\n            const text = this.Blockly.Xml.domToText(dom);\r\n            code += '//' + btoa(encodeURIComponent(text));\r\n        }\r\n\r\n        return code;\r\n    }\r\n\r\n    exportBlocks() {\r\n        let exportText;\r\n        if (this.Blockly.selected) {\r\n            const xmlBlock = this.Blockly.Xml.blockToDom(this.Blockly.selected);\r\n            if (this.Blockly.dragMode_ !== this.Blockly.DRAG_FREE) {\r\n                this.Blockly.Xml.deleteNext(xmlBlock);\r\n            }\r\n            // Encode start position in XML.\r\n            const xy = this.Blockly.selected.getRelativeToSurfaceXY();\r\n            xmlBlock.setAttribute('x', this.Blockly.selected.RTL ? -xy.x : xy.x);\r\n            xmlBlock.setAttribute('y', xy.y);\r\n\r\n            exportText = this.Blockly.Xml.domToPrettyText(xmlBlock);\r\n        } else {\r\n            const dom = this.Blockly.Xml.workspaceToDom(this.blocklyWorkspace);\r\n            exportText = this.Blockly.Xml.domToPrettyText(dom);\r\n        }\r\n        this.setState({exportText});\r\n    }\r\n    \r\n    importBlocks() {\r\n        this.setState({importText: true});\r\n    }\r\n    \r\n    onImportBlocks(xml) {\r\n        if ((xml || '').trim()) {\r\n            try {\r\n                let xmlBlocks = this.Blockly.Xml.textToDom(xml);\r\n                if (xmlBlocks.nodeName === 'xml') {\r\n                    for (let b = 0; b < xmlBlocks.children.length; b++) {\r\n                        this.blocklyWorkspace.paste(xmlBlocks.children[b]);\r\n                    }\r\n                } else {\r\n                    this.blocklyWorkspace.paste(xmlBlocks);\r\n                }\r\n            } catch (e) {\r\n                this.setState({error: {text: e, title: I18n.t('Import error')}});\r\n            }\r\n        }\r\n    }\r\n\r\n    loadCode() {\r\n        if (!this.blocklyWorkspace) return;\r\n\r\n        this.ignoreChanges = true;\r\n        this.blocklyWorkspace.clear();\r\n\r\n        try {\r\n            const xml = this.jsCode2Blockly(this.originalCode) || '<xml xmlns=\"http://www.w3.org/1999/xhtml\"></xml>';\r\n            const dom = this.Blockly.Xml.textToDom(xml);\r\n            this.Blockly.Xml.domToWorkspace(dom, this.blocklyWorkspace);\r\n        } catch (e) {\r\n            console.error(e);\r\n            window.alert('Cannot extract Blockly code!');\r\n        }\r\n        setTimeout(() => this.ignoreChanges = false, 100);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (!this.blockly) return;\r\n        if (this.didUpdate) {\r\n            clearTimeout(this.didUpdate);\r\n            this.didUpdate = null;\r\n        }\r\n\r\n        if (this.blocklyWorkspace) return;\r\n\r\n        window.addEventListener('resize', this.onResizeBind, false);\r\n        toolboxText = toolboxText || this.getToolbox();\r\n        toolboxXml = toolboxXml || window.Blockly.Xml.textToDom(toolboxText);\r\n\r\n        this.blocklyWorkspace = window.Blockly.inject(\r\n            this.blockly,\r\n            {\r\n                media: 'google-blockly/media/',\r\n                toolbox: toolboxXml,\r\n                zoom: {\r\n                    controls:   true,\r\n                    wheel:      false,\r\n                    startScale: 1.0,\r\n                    maxScale:   3,\r\n                    minScale:   0.3,\r\n                    scaleSpeed: 1.2\r\n                },\r\n                trashcan: true,\r\n                grid: {\r\n                    spacing:    25,\r\n                    length:     3,\r\n                    colour:     '#ccc',\r\n                    snap:       true\r\n                }\r\n            }\r\n        );\r\n        // Listen to events on master workspace.\r\n        this.blocklyWorkspace.addChangeListener(masterEvent => {\r\n            if (this.someSelected) {\r\n                const allBlocks = this.blocklyWorkspace.getAllBlocks();\r\n                this.someSelected = false;\r\n                allBlocks.forEach(b => b.removeSelect());\r\n            }\r\n\r\n            if (masterEvent.type === window.Blockly.Events.UI || masterEvent.type === window.Blockly.Events.CREATE) {\r\n                return;  // Don't mirror UI events.\r\n            }\r\n            if (this.ignoreChanges) return;\r\n            this.setState({changed: true});\r\n            this.onChange();\r\n        });\r\n        this.loadCode();\r\n        this.onResize();\r\n        // Move toolbar to the valid position\r\n        const toolbar = document.getElementsByClassName('blocklyToolboxDiv')[0];\r\n        this.blockly.appendChild(toolbar);\r\n\r\n        // for blockly itself\r\n        window.scripts = {\r\n            blocklyWorkspace: this.blocklyWorkspace\r\n        };\r\n\r\n        this.updateBackground();\r\n    }\r\n\r\n    updateBackground() {\r\n        const background = document.getElementsByClassName('blocklyMainBackground')[0];\r\n        if (this.state.theme === 'dark') {\r\n            let found = 0;\r\n            for (let i = 0; i < background.classList.length; i++) {\r\n                if (background.classList[i] === this.props.classes.darkBackground) {\r\n                    found = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!found) {\r\n                background.classList.add(this.props.classes.darkBackground);\r\n            }\r\n        } else {\r\n            background.classList.remove(this.props.classes.darkBackground);\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (!this.blocklyWorkspace) return;\r\n        this.blocklyWorkspace.dispose();\r\n        this.blocklyWorkspace = null;\r\n        window.removeEventListener('resize', this.onResizeBind);\r\n    }\r\n\r\n    onChange() {\r\n        this.originalCode = this.blocklyCode2JSCode();\r\n        this.props.onChange && this.props.onChange(this.originalCode);\r\n    }\r\n\r\n    getToolbox() {\r\n        // Interpolate translated messages into toolbox.\r\n        let toolboxText = window.document.getElementById('toolbox').outerHTML;\r\n        toolboxText = toolboxText.replace(/{(\\w+)}/g, (m, p1) => window.MSG[p1]);\r\n\r\n        let blocks = '';\r\n        const lang = I18n.getLanguage();\r\n        for (let cb = 0; cb < this.Blockly.CustomBlocks.length; cb++) {\r\n            const name = this.Blockly.CustomBlocks[cb];\r\n            // add blocks\r\n            blocks += '<category name=\"' + this.Blockly.Words[name][lang] + '\" colour=\"' + this.Blockly[name].HUE + '\">';\r\n            for (const _b in this.Blockly[name].blocks) {\r\n                if (this.Blockly[name].blocks.hasOwnProperty(_b)) {\r\n                    blocks += this.Blockly[name].blocks[_b];\r\n                }\r\n            }\r\n            blocks += '</category>';\r\n        }\r\n        toolboxText = toolboxText.replace('<category><block>%%CUSTOM_BLOCKS%%</block></category>', blocks);\r\n        return toolboxText;\r\n    }\r\n\r\n    render() {\r\n        if (this.state.languageBlocklyLoaded && this.state.languageOwnLoaded) {\r\n            this.didUpdate = setTimeout(() => {\r\n                this.didUpdate = null;\r\n                this.componentDidUpdate();\r\n            }, 100);\r\n\r\n            return [\r\n                (<div key=\"blocklyDOM\" ref={el => this.blockly = el} style={{\r\n                    //marginLeft: 180,\r\n                    width: '100%',//'calc(100% - 180px)',\r\n                    height: '100%',\r\n                    //overflow: 'hidden',\r\n                    position: 'relative'}}/>),\r\n\r\n                this.state.message ?\r\n                    (<DialogMessage\r\n                        key=\"dialogMessage\"\r\n                        text={typeof this.state.message === 'object' ? this.state.message.text : this.state.message}\r\n                        title={typeof this.state.message === 'object' ? this.state.message.title : ''}\r\n                        onClose={() => this.setState({message: ''})}\r\n                    />) :\r\n                    null,\r\n\r\n                this.state.error ?\r\n                    (<DialogError\r\n                        key=\"dialogError\"\r\n                        text={typeof this.state.error === 'object' ? this.state.error.text : this.state.error}\r\n                        title={typeof this.state.error === 'object' ? this.state.error.title : ''}\r\n                        onClose={() => {\r\n                            if (this.blinkBlock) {\r\n                                this.blocklyBlinkBlock(this.blinkBlock);\r\n                                this.blinkBlock = null;\r\n                            }\r\n                            this.setState({error: ''});\r\n                        }}/>) :\r\n                    null,\r\n                \r\n                this.state.exportText ? (<DialogExport key=\"dialogExport\" onClose={() => this.setState({exportText: ''})} text={this.state.exportText}/>) : null,\r\n                \r\n                this.state.importText ? (<DialogImport key=\"dialogImport\" onClose={text => {\r\n                    this.setState({importText: false});\r\n                    this.onImportBlocks(text);\r\n                }}/>) : null\r\n            ];\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\nBlocklyEditor.propTypes = {\r\n    command: PropTypes.string,\r\n    onChange: PropTypes.func,\r\n    searchText: PropTypes.string,\r\n    theme: PropTypes.string\r\n};\r\n\r\nexport default withStyles(styles)(BlocklyEditor);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nimport I18n from '../i18n';\r\n\r\nclass DialogMessage extends React.Component {\r\n\r\n    handleOk = () => {\r\n        this.props.onClose && this.props.onClose();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Dialog\r\n                open={true}\r\n                maxWidth=\"sm\"\r\n                fullWidth={true}\r\n                onClose={() => this.handleOk()}\r\n                aria-labelledby=\"message-dialog-title\"\r\n                aria-describedby=\"message-dialog-description\"\r\n            >\r\n                <DialogTitle id=\"message-dialog-title\">{this.props.title || I18n.t('Message')}</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText id=\"message-dialog-description\">\r\n                        {this.props.text}\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => this.handleOk()} color=\"primary\" autoFocus>{I18n.t('Close')}</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nDialogMessage.propTypes = {\r\n    onClose: PropTypes.func,\r\n    title: PropTypes.string,\r\n    text: PropTypes.string,\r\n    icon: PropTypes.object\r\n};\r\n\r\nexport default DialogMessage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport Fade from '@material-ui/core/Fade';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport I18n from '../i18n';\r\n\r\nconst styles = theme => ({\r\n    textArea: {\r\n        width: '100%',\r\n        height: '100%',\r\n        background: 'lightgray'\r\n    },\r\n    dialog: {\r\n        height: '95%'\r\n    },\r\n    typography: {\r\n        padding: theme.spacing.unit * 2,\r\n    },\r\n});\r\nclass DialogExport extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            anchorEl: null,\r\n            popper: ''\r\n        };\r\n    }\r\n    handleCancel = () => {\r\n        this.props.onClose();\r\n    };\r\n\r\n    onCopy(event) {\r\n        const el = window.document.getElementById('copy_input');\r\n        if (el) {\r\n            el.select();\r\n            window.document.execCommand('copy');\r\n            const target = event.currentTarget;\r\n\r\n            setTimeout(() => {\r\n                window.document.execCommand('copy');\r\n                this.setState({popper: I18n.t('Copied'), anchorEl: target});\r\n                setTimeout(() => this.setState({popper: '', anchorEl: null}), 1000);\r\n            }, 50);\r\n\r\n        }\r\n        /*el.value = this.props.text;\r\n        window.document.body.appendChild(el);\r\n        el.select();*/\r\n    }\r\n\r\n    render() {\r\n        const classes = this.props.classes;\r\n\r\n        return (\r\n            <Dialog\r\n                disableBackdropClick\r\n                disableEscapeKeyDown\r\n                maxWidth=\"lg\"\r\n                classes={{paper: classes.dialog}}\r\n                fullWidth={true}\r\n                open={true}\r\n                aria-labelledby=\"export-dialog-title\"\r\n            >\r\n                <DialogTitle id=\"export-dialog-title\">{I18n.t('Export selected blocks')}</DialogTitle>\r\n                <DialogContent>\r\n                    <pre\r\n                        id=\"export-text\"\r\n                        className={classes.textArea}\r\n                    >{this.props.text}</pre>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={event  => this.onCopy(event )} color=\"secondary\">{I18n.t('Copy to clipboard')}</Button>\r\n                    <Button onClick={() => this.handleCancel()} color=\"primary\">{I18n.t('Close')}</Button>\r\n\r\n                    <Popper\r\n                        id=\"popper\"\r\n                        style={{zIndex: 10000}}\r\n                        open={!!this.state.popper}\r\n                        placement=\"top\"\r\n                        anchorEl={this.state.anchorEl} transition>\r\n                        {({ TransitionProps }) => (\r\n                            <Fade {...TransitionProps} timeout={350}>\r\n                                <Paper>\r\n                                    <p className={classes.typography}>{this.state.popper}</p>\r\n                                </Paper>\r\n                            </Fade>\r\n                        )}\r\n                    </Popper>\r\n                    <textarea id=\"copy_input\" readOnly={true} style={{position: 'absolute', left: -9999}} tabIndex={-1} aria-hidden={true}>\r\n                        {this.props.text}\r\n                    </textarea>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nDialogExport.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    onClose: PropTypes.func,\r\n    text: PropTypes.string,\r\n};\r\n\r\nexport default withStyles(styles)(DialogExport);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Dialog from '@material-ui/core/Dialog';\r\n\r\nimport I18n from '../i18n';\r\n\r\nconst styles = theme => ({\r\n    textArea: {\r\n        width: 'calc(100% - 10px)',\r\n        height: '100%',\r\n        resize: 'none'\r\n    },\r\n    dialog: {\r\n        height: '95%'\r\n    },\r\n    fullHeight: {\r\n        height: '100%',\r\n        overflow: 'hidden'\r\n    },\r\n});\r\nclass DialogImport extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            text: '',\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        setTimeout(() => {\r\n            try {\r\n                window.document.getElementById('import-text-area').focus();\r\n            } catch (e) {\r\n\r\n            }\r\n        }, 100);\r\n    }\r\n\r\n    handleCancel () {\r\n        this.props.onClose();\r\n    }\r\n\r\n    handleOk () {\r\n        this.props.onClose(this.state.text);\r\n    }\r\n\r\n    onChange(e) {\r\n        this.setState({text: e.target.value});\r\n    }\r\n\r\n    render() {\r\n        const classes = this.props.classes;\r\n\r\n        return (\r\n            <Dialog\r\n                disableBackdropClick\r\n                disableEscapeKeyDown\r\n                maxWidth=\"lg\"\r\n                classes={{paper: classes.dialog}}\r\n                fullWidth={true}\r\n                open={true}\r\n                aria-labelledby=\"import-dialog-title\"\r\n            >\r\n                <DialogTitle id=\"import-dialog-title\">{I18n.t('Import blocks')}</DialogTitle>\r\n                <DialogContent className={classes.fullHeight}>\r\n                    <textarea\r\n                        id=\"import-text-area\"\r\n                        className={classes.textArea}\r\n                        onChange={e => this.onChange(e)}\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button disabled={!this.state.text} onClick={event  => this.handleOk()} color=\"primary\">{I18n.t('Import')}</Button>\r\n                    <Button onClick={() => this.handleCancel()} color=\"secondary\">{I18n.t('Close')}</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nDialogImport.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    onClose: PropTypes.func,\r\n    text: PropTypes.string,\r\n};\r\n\r\nexport default withStyles(styles)(DialogImport);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from '@material-ui/core/Button';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport I18n from '../i18n';\r\n\r\nclass DialogConfirm extends React.Component {\r\n    handleCancel = () => {\r\n        this.props.onClose();\r\n    };\r\n\r\n    handleOk = () => {\r\n        this.props.onOk();\r\n        this.props.onClose();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Dialog\r\n                disableBackdropClick\r\n                disableEscapeKeyDown\r\n                maxWidth=\"md\"\r\n                fullWidth={true}\r\n                open={true}\r\n                aria-labelledby=\"confirmation-dialog-title\"\r\n            >\r\n                <DialogTitle id=\"confirmation-dialog-title\">{this.props.title || I18n.t('Are you sure?')}</DialogTitle>\r\n                <DialogContent>\r\n                    <h2>{this.props.question}</h2>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={this.handleOk} color=\"primary\">{this.props.ok || I18n.t('Ok')}</Button>\r\n                    <Button onClick={this.handleCancel} color=\"secondary\">{this.props.cancel || I18n.t('Cancel')}</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nDialogConfirm.propTypes = {\r\n    onClose: PropTypes.func,\r\n    onOk: PropTypes.func.isRequire,\r\n    title: PropTypes.string,\r\n    question: PropTypes.string.isRequire,\r\n    cancel: PropTypes.string,\r\n    ok: PropTypes.string\r\n\r\n};\r\n\r\nexport default DialogConfirm;\r\n","// @flow\nimport { Component } from 'react';\nimport type { Node } from 'react';\n\nimport type { RowMetadata } from '../model/row';\n\n\ntype Props = {\n  grow?: number,\n  basis?: string, // <length> | auto\n  width?: string, // <length> | auto\n\n  renderCell: (rowData: any, rowMetadata: RowMetadata, toggleChildren: () => void) => Node,\n  className?: string,\n};\n\ntype State = { };\n\nexport default class Column extends Component<Props, State> {\n\n  render() { return null; }\n}\n","// @flow\nimport React, { Component } from 'react';\nimport type { Node } from 'react';\n\nimport type { RowMetadata } from '../model/row';\n\n\ntype Props = {\n  //grow?: number,\n  //basis?: string, // <length> | auto\n  width: string,  // <length> | auto\n\n  rowData: any,\n  rowMetadata: RowMetadata,\n  toggle: () => void,\n  renderCell: (rowData: any, rowMetadata: RowMetadata, toggleChildren: () => void) => Node,\n  className?: string,\n  classNameColumn?: string,\n};\n\ntype State = {\n  width: string\n  //_grow: number,\n  //_basis: string,\n};\n\nexport default class ColumnWrapper extends Component<Props, State> {\n  state = {\n    //_grow: 1,\n    //_basis: 'auto',\n      width: 'auto'\n  };\n\n  render() {\n    const { width, rowData, toggle, rowMetadata, renderCell, className, classNameColumn} = this.props;\n    const { _width } = this.state;\n\n    //const flexGrow = (grow != null) ? grow : _grow;\n    //const flexBasis = (basis != null) ? basis : _basis;\n    const cWidth = (width != null) ? width : _width;\n\n    const baseClass = (className ? `cp_tree-table_column ${className || ''}`: 'cp_tree-table_column') + ' ' + (classNameColumn || '');\n    return (\n      <div className={baseClass}\n        style={{ ...STYLE_COLUMN, width: cWidth/*flexGrow: flexGrow, flexBasis: flexBasis */}}>\n        { renderCell(rowData, rowMetadata, toggle) }\n      </div>\n    );\n  }\n}\n\nconst STYLE_COLUMN = {\n  boxSizing: 'border-box',\n  position: 'relative',\n  overflow: 'hidden',\n};\n","// @flow\nimport React, { Component, Children } from 'react';\nimport type { ChildrenArray, Element } from 'react';\n\nimport Column from './Column';\nimport ColumnWrapper from './ColumnWrapper';\n\n\ntype Props = {\n  row: any,\n  columns: ChildrenArray<Element<typeof Column>>,\n\n  hasVisibleChildren: boolean, // Metadata\n  classNamePartlyVisible?: string,\n  classNameColumn?: string,\n  classNameSelected?: string,\n  classNameRow?: string,\n  index: number,\n  selected?: string,\n  onToggle: () => void,\n  onRowClick: (data: object) => void,\n};\n\ntype State = {\n  overscanHeight: number,\n  height: number,\n  topOffset: number,\n};\n\nexport default class VirtualListRow extends Component<Props, State> {\n\n  state = {\n    overscanHeight: 100,\n    height: 0,\n    topOffset: 0,\n  };\n\n  render() {\n    const { row, hasVisibleChildren, index, onToggle, columns, classNameRow, classNameColumn, selected, classNameSelected } = this.props;\n\n    const metadata = { ...row.getMetadata(), hasVisibleChildren: hasVisibleChildren };\n\n    const style = {...STYLE_ROW, height: row.getHeight() + 'px'};\n\n    return (\n      <div className={'cp_tree-table_row ' + (classNameRow || '') + (selected === row.data.id ? ' ' + classNameSelected : '')}\n        style={style}\n        data-rindex={index}\n        onClick={() => this.props.onRowClick && this.props.onRowClick(row.data, metadata, onToggle)}\n        onDoubleClick={() => this.props.onRowClick && this.props.onRowClick(row.data, metadata, onToggle, true)}\n        data-depth={row.depth} >\n      \n        {Children.toArray(columns).map((column, index) => {\n          return (\n            <ColumnWrapper key={index}\n              {...column.props}\n              classNameColumn={classNameColumn}\n              rowData={row.data}\n              toggle={onToggle}\n              rowMetadata={metadata}/>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nconst STYLE_ROW = {\n  // display: 'flex',\n\n  boxSizing: 'border-box',\n  position: 'relative',\n  overflow: 'hidden',\n  width: '100%',\n};\n","// @flow\nimport BTLeaf from './bt_leaf';\n\n\nexport type TreeDataRow = {\n  data: any,\n  height?: number,\n  children?: Array<TreeDataRow>,\n};\n\nexport type RowMetadata = {\n  depth: number;\n  hasChildren: boolean;\n  hasVisibleChildren: boolean;\n};\n\nexport type PartialRowMetadata = {\n  depth: number;\n  hasChildren: boolean;\n};\n\nexport default class Row {\n  parent: ?BTLeaf = null;\n  depth: number;      // tree depth\n  data: any;          // row data\n\n  _hasChildren: boolean;\n\n  _height: number = 26;    // height in px (26px - fallback value)\n  _cacheHeight: number = 26;\n\n  constructor(data: any, hasChildren: boolean, depth: number = 0, isVisible: boolean, height: ?number) {\n    this.data = data;\n    this.depth = depth;\n    this._hasChildren = hasChildren;\n\n    if (height != null) {\n      this._height = height;\n      this._cacheHeight = height;\n    }\n\n    if (!isVisible) {\n      this._height = 0;\n    }\n  }\n\n  setHeight(value: number) {\n    this._updateHeight(value);\n    if (value > 0) {\n      this._cacheHeight = value;\n    }\n  }\n\n  getHeight(): number {\n    return this._height;\n  }\n\n  isVisible(): boolean {\n    return this._height > 0;\n  }\n\n  getMetadata(): PartialRowMetadata {\n    return {\n      depth: this.depth,\n      hasChildren: this._hasChildren,\n    };\n  }\n\n  toggle(): void {\n    if (this._height > 0) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n\n  hide(): void {\n    this._cacheHeight = this._height;\n    this._updateHeight(0);\n  }\n\n  show(): void {\n    this._updateHeight(this._cacheHeight);\n  }\n\n  _updateHeight(value: number) {\n    let diff = value - this._height;\n    if (diff) {\n      for (let n = this; n; n = n.parent) {\n        n._height += diff;\n      }\n    }\n  }\n}\n","// @flow\nimport Row from '../model/row';\nimport type { TreeDataRow  } from '../model/row';\n\nexport * from './search';\n\n\nexport const processData = (data: Array<TreeDataRow>, rowHeightDefault: ?number = null): Array<Row> => {\n  return processLevel(data, rowHeightDefault, 0, true);\n}\n\nconst processLevel = (data: Array<TreeDataRow>, rowHeightDefault: ?number, depth: number = 0, isVisible: boolean = false): Array<Row> => {\n  let result: Array<Row> = [];\n  for (var i = 0; i < data.length; i++) {\n    const hasChildren: boolean = (data[i].children != null && data[i].children.length > 0);\n\n    result.push(new Row(data[i].data, hasChildren, depth, isVisible, data[i].height || rowHeightDefault));\n\n    if (data[i].children && data[i].children.length > 0) {\n      processLevel(data[i].children, rowHeightDefault, depth + 1).forEach((row) => {\n        result.push(row);\n      });\n    }\n  }\n  return result;\n}\n\nexport const indexOf = (needle: any, haystack: Array<any>): number => {\n  for (var i = 0; i < haystack.length; i++) {\n    if (haystack[i] === needle) {\n      return i;\n    }\n  }\n  return -1;\n}\n\nexport const noop = () => undefined;\n","// @flow\nimport BTLeaf from './bt_leaf';\nimport Row from './row';\nimport { indexOf } from '../util';\n\n\nexport default class BTNode {\n  parent: ?BTNode = null;\n  children: Array<BTNode | BTLeaf> = [];\n\n  _size: number = 0;\n  _height: number = 0;\n\n\n  constructor(children: Array<BTNode | BTLeaf>) {\n    this.children = children;\n\n    let size = 0, height = 0;\n    for (let i = 0; i < children.length; ++i) {\n      let ch = children[i];\n      size += ch.getSize();\n      height += ch.getHeight();\n      ch.parent = this;\n    }\n\n    this._size = size;\n    this._height = height;\n  }\n\n  getSize(): number {\n    return this._size;\n  }\n\n  getHeight(): number {\n    return this._height;\n  }\n\n  // https://github.com/codemirror/CodeMirror/blob/e03ef21df390753eb35ff8426dd99b1be4d29d74/src/model/chunk.js#L79\n  removeInner(at: number, n: number) {\n    this._size -= n;\n    for (let i = 0; i < this.children.length; i++) {\n      let child = this.children[i], sz = child.getSize();\n      if (at < sz) {\n        let rm = Math.min(n, sz - at), oldHeight = child.getHeight();\n        child.removeInner(at, rm);\n        this._height -= oldHeight - child.getHeight();\n        if (sz === rm) {\n          this.children.splice(i--, 1);\n          child.parent = null;\n        }\n        n -= rm;\n        if (n === 0) {\n          break;\n        }\n        at = 0;\n      } else {\n        at -= sz;\n      }\n    }\n    // If the result is smaller than 25 rows, ensure that it is a\n    // single leaf node.\n    if (this.getSize() - n < 25 &&\n       (this.children.length > 1 || !(this.children[0] instanceof BTLeaf))) {\n      let rows = [];\n      this.collapse(rows);\n      this.children = [new BTLeaf(rows)];\n      this.children[0].parent = this;\n    }\n  }\n\n  collapse(rows: Array<Row>) {\n    for (let i = 0; i < this.children.length; i++) {\n      this.children[i].collapse(rows);\n    }\n  }\n\n  // https://github.com/codemirror/CodeMirror/blob/e03ef21df390753eb35ff8426dd99b1be4d29d74/src/model/chunk.js#L107\n  insertInner(at: number, rows: Array<Row>, height: number) {\n    this._size += rows.length;\n    this._height += height;\n\n    for (let i = 0; i < this.children.length; i++) {\n      let child = this.children[i], sz = child.getSize();\n      if (at <= sz) {\n        child.insertInner(at, rows, height);\n        if (child instanceof BTLeaf && child.getSize() > 50) {\n          // To avoid memory thrashing when child.rows is huge (e.g. first view of a large file), it's never spliced.\n          // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n          let remaining = child.getSize() % 25 + 25;\n          for (let pos = remaining; pos < child.getSize();) {\n            let leaf = new BTLeaf(child.rows.slice(pos, pos += 25));\n            child._height -= leaf.getHeight();\n            this.children.splice(++i, 0, leaf);\n            leaf.parent = this;\n          }\n          child.rows = child.rows.slice(0, remaining);\n          this.maybeSpill();\n        }\n        break;\n      }\n      at -= sz;\n    }\n  }\n\n  // When a node has grown, check whether it should be split.\n  maybeSpill() {\n    if (this.children.length <= 10) {\n      return;\n    }\n    let me: BTNode = this;\n    do {\n      let spilled = me.children.splice(me.children.length - 5, 5);\n      let sibling = new BTNode(spilled);\n      if (!me.parent) { // Become the parent node\n        let copy = new BTNode(me.children);\n        copy.parent = me;\n        me.children = [copy, sibling];\n        me = copy;\n     } else {\n        me._size -= sibling.getSize();\n        me._height -= sibling.getHeight();\n\n        let parent: ?BTNode = me.parent;\n        if (parent && parent.children) {\n          let myIndex = indexOf(me, parent.children);\n          parent.children.splice(myIndex + 1, 0, sibling);\n        }\n      }\n      sibling.parent = me.parent;\n    } while (me.children.length > 10)\n    if (me.parent) {\n      me.parent.maybeSpill();\n    }\n  }\n\n  mapRange(at: number, n: number, op: (data: Row) => ?boolean): ?boolean {\n    for (let i = 0; i < this.children.length; i++) {\n      let child = this.children[i], sz = child.getSize();\n      if (at < sz) {\n        let used = Math.min(n, sz - at);\n        if (child.mapRange(at, used, op)) {\n          return true;\n        }\n        n -= used;\n        if (n === 0) {\n          break;\n        }\n        at = 0;\n      } else {\n        at -= sz;\n      }\n    }\n  }\n\n  mapAll(op: (data: Row) => ?boolean): ?boolean {\n    return this.mapRange(0, this._size, op);\n  }\n}\n","// @flow\nimport BTNode from './bt_node';\nimport Row from './row';\n\n\nexport default class BTLeaf {\n  parent: ?BTNode = null;\n  rows: Array<Row> = [];\n\n  _height: number = 0;\n\n  constructor(rows: Array<Row> = []) {\n    this.rows = rows;\n\n    let height = 0;\n    for (let i = 0; i < rows.length; ++i) {\n      rows[i].parent = this;\n      height += rows[i].getHeight();\n    }\n    this._height = height;\n  }\n\n  getSize(): number {\n    return this.rows.length;\n  }\n\n  getHeight(): number {\n    return this._height;\n  }\n\n  // Remove n rows at offset 'at'.\n  removeInner(at: number, n: number) {\n    for (let i = at, e = at + n; i < e; ++i) {\n      let row = this.rows[i];\n      this._height -= row.getHeight();\n\n      row.parent = null;\n    }\n    this.rows.splice(at, n);\n  }\n\n  collapse(rows: Array<Row>) {\n    rows.push.apply(rows, this.rows)\n  }\n\n  // Insert the given array of rows at offset 'at', count them as\n  // having the given height.\n  insertInner(at: number, rows: Array<Row>, height: number) {\n    this._height += height\n    this.rows = this.rows.slice(0, at).concat(rows).concat(this.rows.slice(at))\n    for (let i = 0; i < rows.length; ++i) {\n      rows[i].parent = this;\n    }\n  }\n\n  mapRange(at: number, n: number, op: (data: Row) => ?boolean): ?boolean {\n    for (let e = at + n; at < e; ++at) {\n      if (op(this.rows[at])) {\n        return true;\n      }\n    }\n  }\n}\n","// @flow\nimport BTLeaf from './bt_leaf';\nimport BTNode from './bt_node';\nimport Row from './row';\nimport { indexOf } from '../util';\n\n\nexport default class BTRoot extends BTNode {\n  constructor(data: Array<Row> = []) {\n    super([new BTLeaf([])]);\n\n    this.insert(0, data);\n  }\n\n  insert(at: number, rows: Array<Row>) {\n    let height = 0\n    for (let i = 0; i < rows.length; ++i) {\n      height += rows[i].getHeight();\n    }\n    super.insertInner(at, rows, height);\n  }\n\n  remove(at: number, n: number) {\n    super.removeInner(at, n);\n  }\n\n  getRow(index: number): Row {\n    if (index < 0 || index >= this.getSize()) {\n      throw new Error('Invalid index! No row at index: ' + index);\n    }\n    let node = this;\n    while (node instanceof BTNode) {\n      for (let i = 0;; i++) {\n        let child = node.children[i], sz = child.getSize();\n        if (index < sz) {\n          node = child;\n          break;\n        }\n        index -= sz;\n      }\n    }\n    return node.rows[index];\n  }\n\n  getRowIndex(row: Row): number {\n    if (row.parent == null) {\n      throw new Error('Invalid row object! No parent node: (row.parent == null)');\n    }\n    let cur = row.parent, index = indexOf(row, cur.rows);\n    for (let chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (let i = 0;; i++) {\n        if (chunk.children[i] === cur) {\n          break;\n        }\n        index += chunk.children[i].getSize();\n      }\n    }\n    return index;\n  }\n\n  getIndexAtY(y: number): number {\n    if (y < 0 || y > this.getHeight()) {\n      throw new Error('Invalid y position! No row at y: ' + y);\n    }\n\n    let n = 0, height = y;\n    let node = this;\n    do {\n      let ch = 0;\n      for (let i = 0; i < node.children.length; i++) {\n        let child = node.children[i];\n        ch = child.getHeight();\n        if (height < ch) {\n          node = child;\n          break;\n        }\n        height -= ch;\n        n += child.getSize();\n      }\n      if (height >= ch) {\n        return n;\n      }\n    } while (!node.rows);\n\n    let i = 0;\n    if (node instanceof BTLeaf) {\n      for (; i < node.getSize(); i++) {\n        let row = node.rows[i], rHeight = row.getHeight();\n        if (height < rHeight) {\n          break;\n        }\n        height -= rHeight;\n      }\n    }\n    return n + i;\n  }\n  \n  getYAtIndex(index: number): number {\n    let row = this.getRow(index);\n    if (row.parent == null) {\n      throw new Error('Invalid row object! No parent node: (row.parent == null)');\n    }\n\n    let height = 0, chunk = row.parent;\n    for (let i = 0; i < chunk.rows.length; i++) {\n      let rowObj = chunk.rows[i];\n      if (rowObj === row) {\n        break;\n      } else {\n        height += rowObj.getHeight();\n      }\n    }\n    for (let p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (let i = 0; i < p.children.length; i++) {\n        let cur = p.children[i];\n        if (cur === chunk) {\n          break\n        } else {\n          height += cur.getHeight();\n        }\n      }\n    }\n    return height;\n  }\n}\n","// @flow\nimport React, { Component } from 'react';\nimport type { ChildrenArray, Element } from 'react';\n\nimport Column from './Column';\nimport VirtualListRow from './VirtualListRow';\n\nimport BTRoot from '../model/bt_root';\nimport Row from '../model/row';\n\n\ntype Props = {\n  root: BTRoot,\n  columns: ChildrenArray<Element<typeof Column>>,\n\n  height: number,\n  onToggle: (row: Row) => void,\n  onRowClick: (data: object) => void,\n  onScroll: (scrollTop: number) => void,\n  className?: string,\n  classNamePartlyVisible?: string,\n  classNameColumn?: string,\n  classNameMover?: string,\n  classNameRow?: string,\n  classNameInner?: string,\n  selected?: string,\n  classNameSelected?: string,\n};\n\ntype State = {\n  overscanHeight: number,\n  height: number,\n  topOffset: number,\n};\n\ntype RowData = {\n  row: Row,\n  hasVisibleChildren: boolean,\n};\n\nexport default class VirtualList extends Component<Props, State> {\n\n  state = {\n    overscanHeight: 100,\n    height: 0,\n    topOffset: 0,\n  };\n\n  container: ?HTMLElement;\n\n  componentDidUpdate() {\n    this._setHeight();\n  }\n\n  componentDidMount() {\n    this._setHeight();\n    window.addEventListener(\"resize\", this._setHeight);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this._setHeight);\n  }\n\n  render() {\n    const { root, columns, onToggle, className, classNameColumn, onRowClick, classNamePartlyVisible, classNameMover, classNameRow, selected, classNameSelected, classNameInner} = this.props;\n    const { overscanHeight, height, topOffset } = this.state;\n\n    const startYMax = Math.max(0, root.getHeight() - height - (overscanHeight * 2));\n    const startY = Math.min(startYMax, Math.max(0, topOffset - overscanHeight));\n    let startIndex = root.getIndexAtY(startY);\n\n    const endY = Math.min(root.getHeight(), topOffset + height + overscanHeight);\n    let endIndex = root.getIndexAtY(endY);\n\n    const contentTopOffset =  root.getYAtIndex(startIndex);\n\n    let visibleRowsData: Array<RowData> = [], lastVisibleRowIndex;\n    root.mapRange(startIndex, endIndex - startIndex, (row: Row) => {\n      if (row.isVisible()) {\n        if (lastVisibleRowIndex != null && !visibleRowsData[lastVisibleRowIndex].hasVisibleChildren) {\n          const data = visibleRowsData[lastVisibleRowIndex];\n          \n          if (data != null && data.row.depth === row.depth - 1 && !data.hasVisibleChildren) {\n            visibleRowsData[lastVisibleRowIndex].hasVisibleChildren = true;\n          }\n        }\n\n        lastVisibleRowIndex = visibleRowsData.length;\n        visibleRowsData.push({\n          row: row,\n          hasVisibleChildren: false,\n        });\n      }\n    });\n\n    let visibleRows = [];\n    let relativeIndex = 0;\n    visibleRowsData.forEach((data: RowData) => {\n        (data.row.data.visible === undefined || data.row.data.visible || data.row.data.hasVisibleChildren) && visibleRows.push(\n        <VirtualListRow\n          row={data.row}\n          columns={columns}\n          selected={selected}\n          onRowClick={onRowClick}\n          classNameSelected={classNameSelected}\n          classNameColumn={classNameColumn}\n          classNameRow={classNameRow + (!data.row.data.visible && classNamePartlyVisible && data.row.data.hasVisibleChildren ? ' ' + classNamePartlyVisible : '')}\n          hasVisibleChildren={data.hasVisibleChildren}\n          index={relativeIndex}\n          key={relativeIndex++}\n          onToggle={() => onToggle(data.row)}/>\n      );\n    });\n\n    return (\n      <div className={className}\n        style={{ ...STYLE_LIST, height: this.props.height + 'px', }}\n        ref={elem => {this.container = elem}}\n        onScroll={this._handleScroll}>\n\n        <div style={{ ...STYLE_WRAPPER, height: (root.getHeight()) + 'px', }} className={classNameInner || ''}>\n          <div style={{ ...STYLE_CONTENT, top: (contentTopOffset) + 'px' }}\n            className={'cp_tree-table_mover ' + (classNameMover || '')}>\n            {visibleRows}\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n\n  scrollTop(posY: number = 0) {\n    if (this.container) {\n      this.container.parentNode.scrollTop = posY;\n    }\n  }\n\n  // virtual scroll\n  _handleScroll = () => {\n    const { onScroll } = this.props;\n\n    if (this.container) {\n      const { scrollTop } = this.container;\n\n      onScroll(scrollTop);\n\n      this.setState({\n        topOffset: scrollTop\n      });\n    }\n  };\n\n  // virtual scroll\n  _setHeight = () => {\n    const { height } = this.state;\n    \n    if (this.container) {\n      const { offsetHeight } = this.container;\n\n      if (height !== offsetHeight) {\n        this.setState({\n          height: offsetHeight\n        });\n      }\n    }\n  };\n}\n\nconst STYLE_LIST = {\n  overflow: 'auto',\n  WebkitOverflowScrolling: 'touch',\n};\n\nconst STYLE_WRAPPER = {\n  position: 'relative',\n  overflow: 'hidden',\n  width: '100%',\n  minHeight: '100%',\n};\n\nconst STYLE_CONTENT = {\n  position: 'absolute',\n  overflow: 'visible',\n  height: '100%',\n  width: '100%',\n  top: '0',\n  left: '0',\n};\n","// @flow\nimport React, { Component } from 'react';\nimport type { ChildrenArray, Element } from 'react';\n\nimport Column from './Column';\nimport VirtualList from './VirtualList';\n\nimport BTRoot from '../model/bt_root';\nimport Row from '../model/row';\nimport type { TreeDataRow  } from '../model/row';\n\nimport { processData, noop, findNodeData } from '../util';\n\n\ntype TreeChange = {\n  root: BTRoot,\n  hasChange: boolean,\n};\n\ntype Props = {\n  data: Array<TreeDataRow>,\n  children: ChildrenArray<Element<typeof Column>>,\n  classNameColumn?: string,\n  classNamePartlyVisible?: string,\n  classNameMover?: string,\n  classNameInner?: string,\n  classNameRow?: string,\n  selected?: string,\n  classNameSelected?: string,\n  selected?: string,\n  height?: number,\n  rowHeight?: number,\n  onScroll?: (scrollTop: number) => void,\n  onRowClick?: (data: object) => void,\n  className?: string,\n};\n\ntype State = {\n  root: BTRoot,\n};\n\nexport default class TreeDataTable extends Component<Props, State> {\n  static Column = Column;\n\n  virtualList: ?VirtualList;\n\n  constructor(props: Props) {\n    super(props);\n    const { rowHeight } = props;\n    this.depth = 0;\n    this.state = {\n      root: new BTRoot(processData(this.props.data, rowHeight)),\n    };\n  }\n\n  render() {\n    const { height, children, onScroll, className, classNameRow, classNamePartlyVisible, classNameColumn, classNameMover, classNameInner, selected, classNameSelected } = this.props;\n    \n    const baseClass = className ? `cp_tree-table ${className}`: 'cp_tree-table';\n    return (\n      <VirtualList className={baseClass}\n                   classNameSelected={classNameSelected}\n                   selected={selected}\n                   classNameRow={classNameRow}\n                   classNamePartlyVisible={classNamePartlyVisible}\n                   classNameColumn={classNameColumn}\n                   classNameMover={classNameMover}\n                   onRowClick={this.props.onRowClick}\n                   classNameInner={classNameInner}\n        ref={elem => {this.virtualList = elem}}\n\n        columns={children}\n\n        height={height || 200}\n        root={this.state.root}\n        \n        onScroll={onScroll || noop}\n        onToggle={(row) => this._handleOnToggle(row)}/>\n    );\n  }\n\n  // Public API\n  scrollIntoView(node: TreeDataRow, expandAncestors: boolean = true) {\n    const { root } = this.state;\n\n    const row = node && findNodeData(root, node);\n    if (row) {\n      const rowIndex = root.getRowIndex(row);\n      if (expandAncestors && !row.isVisible()) {\n        let ancestors: Array<Row> = [];\n        for (let currentRowIndex = Math.max(rowIndex - 1, 0), previousDepth = row.depth; currentRowIndex >= 0; currentRowIndex--) {\n          const currentRow = root.getRow(currentRowIndex);\n          \n          if (currentRow.depth === previousDepth - 1) {  // Parent\n            ancestors.push(currentRow);\n            previousDepth = currentRow.depth;\n\n            if (currentRow.isVisible()) { // From here up, all the ancestors are visible\n              break;\n            }\n          }\n\n          if (currentRow.depth === 0) {\n            break;\n          }\n        }\n\n        // Batch changes\n        let currentRoot = root;\n        let hasChange: boolean = false;\n        for (let i = 0; i < ancestors.length; i++) {\n          const currentRow = ancestors[i];\n          const delta = this._toggleRow(currentRoot, currentRow);\n\n          if (!hasChange) {\n            hasChange = delta.hasChange;\n          }\n        }\n\n        if (hasChange) {\n          this.setState({ root: currentRoot }, () => {\n            const posY = root.getYAtIndex(rowIndex);\n            this.scrollTo(posY);\n          });\n        }\n      } else {\n        const posY = root.getYAtIndex(rowIndex);\n        this.scrollTo(posY);\n      }\n    }\n  }\n\n  // Public API\n  scrollTo(posY: number) {\n    if (this.virtualList) {\n      this.virtualList.scrollTop(posY);\n    }\n  }\n\n  // Makes rows in the given range that don't represent root nodes (row.depth == 0) visible\n  _showRowsInRange(from?: number, to?: number) {\n    const { root } = this.state;\n\n    let _from = (from != null) ? from : 0;\n    let _to = (to != null) ? to : root.getSize();\n\n    // Validation\n    if (!this._isOpRangeValid(_from, _to)) {\n      return;\n    }\n\n    // Expand op\n    let hasChange: boolean = false;\n    root.mapRange(_from, _to, (row: Row) => {\n      if (row.depth > 0 && !row.isVisible()) {\n        row.show();\n        hasChange = true;\n      }\n    });\n\n    if (hasChange) {\n      this.setState({ root: root });\n    }\n  }\n\n  _walkOne(root: BTRoot, depth: number) {\n    let hasChanged;\n    if (root.rows) {\n        for (let i = 0; i < root.rows.length; i++) {\n          if (root.rows[i].depth <= depth) {\n            if (!root.rows[i].isVisible()) {\n              hasChanged = true;\n              root.rows[i].show();\n            }\n          } else if (root.rows[i].isVisible()) {\n              hasChanged = true;\n              root.rows[i].hide();\n          }\n        }\n    } else if (root.children) {\n        for (let i = 0; i < root.children.length; i++) {\n            const changed = this._walkOne(root.children[i], depth);\n            if (changed) {\n                hasChanged = true;\n            }\n        }\n    }\n    return hasChanged;\n  }\n\n  // Public API\n  expandAll(expandOrCollapse?: boolean) { // _showRowsInRange alias with the default arguments\n    if (expandOrCollapse === undefined) {\n        this._showRowsInRange();\n    } else {\n      if (expandOrCollapse === true || expandOrCollapse === false) {\n          this.depth = expandOrCollapse ? this.depth + 1 : this.depth - 1;\n      } else {\n          this.depth = expandOrCollapse;\n      }\n      if (this.depth < 0) {\n          this.depth = 0;\n      }\n        if (this._walkOne(this.state.root, this.depth)) {\n            this.setState({root: this.state.root});\n        }\n    }\n  }\n\n  // Hides rows in the given range that don't represent root nodes (row.depth == 0)\n  _hideRowsInRange(from?: number, to?: number) {\n    const { root } = this.state;\n\n    let _from = (from != null) ? from : 0;\n    let _to = (to != null) ? to : root.getSize();\n\n    // Validation\n    if (!this._isOpRangeValid(_from, _to)) {\n      return;\n    }\n\n    // Expand op\n    let hasChange: boolean = false;\n    root.mapRange(_from, _to, (row: Row) => {\n      if (row.depth > 0 && row.isVisible()) {\n        row.hide();\n        hasChange = true;\n      }\n    });\n\n    if (hasChange) {\n      this.setState({ root: root });\n    }\n  }\n\n  // Public API\n  collapseAll() { // _hideRowsInRange alias with the default arguments\n    this._hideRowsInRange();\n  }\n\n  _isOpRangeValid(from: number, to: number): boolean {\n    const { root } = this.state;\n    const maxTo = root.getSize();\n    // Validation\n    if (from < 0) {\n      console.warn('Invalid range: from < 0');\n      return false;\n    }\n    if (from > maxTo) {\n      console.warn('Invalid range: from > max size');\n      return false;\n    }\n    if (to > maxTo) {\n      console.warn('Invalid range: to > max size');\n      return false;\n    }\n    if (from > to) {\n      console.warn('Invalid range: to > from');\n      return false;\n    }\n    return true;\n  }\n\n  _handleOnToggle = (row: Row) => {\n    const { root } = this.state;\n\n    const delta = this._toggleRow(root, row);\n    if (delta.hasChange) {\n      this.setState({ root: delta.root });\n    }\n  }\n\n  _toggleRow = (root: BTRoot, row: Row): TreeChange => {\n    const currentDepth = row.depth;\n    let rowIndex = Math.min(root.getRowIndex(row) + 1, root.getSize());\n\n    let hasChange: boolean = false;\n    let toggleOpen: ?boolean;\n    root.mapRange(rowIndex, root.getSize() - rowIndex, (row: Row) => {\n      if (toggleOpen == null) {\n        toggleOpen = !row.isVisible();\n      }\n\n      if (row.depth >= currentDepth + 1) {\n        if (row.depth === currentDepth + 1) {\n          row.toggle();\n          hasChange = true;\n        } else if (!toggleOpen && row.isVisible()) { // Close all children\n          row.toggle();\n          hasChange = true;\n        }\n        \n        return false;\n      } else {\n        return true;\n      }\n    });\n\n    return {\n      root: root,\n      hasChange: hasChange,\n    };\n  }\n}\n","// @flow\nimport Row from '../model/row';\nimport BTRoot from '../model/bt_root';\nimport type { TreeDataRow  } from '../model/row';\n\n\nexport const findNodeData = (root: BTRoot, dataNode: TreeDataRow): ?Row => {\n  let result;\n\n  root.mapAll((row: Row) => {\n    if (dataNode.data === row.data) {\n      result = row;\n      return true;\n    }\n  });\n  return result;\n}\n","import TreeDataTable from './component/TreeDataTable';\nimport type { TreeDataRow } from './component/TreeDataTable';\nimport type { RowMetadata } from '../model/row';\n\nexport default TreeDataTable;\nexport type { TreeDataRow };\nexport type { RowMetadata };\n","/**\r\n * Copyright 2018 bluefox <dogafox@gmail.com>\r\n *\r\n * Licensed under the Creative Commons Attribution-NonCommercial License, Version 4.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * https://creativecommons.org/licenses/by-nc/4.0/legalcode.txt\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n **/\r\n\r\nimport React from 'react';\r\nimport I18n from '../i18n';\r\n\r\nconst NAMESPACE = 'material';\r\nconst days = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];\r\nconst months = ['Jan', 'Feb', 'Mar', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\nclass Utils {\r\n    static namespace = NAMESPACE;\r\n    static INSTANCES = 'instances';\r\n    static dateFormat = ['DD', 'MM'];\r\n\r\n    static CapitalWords(name) {\r\n        return (name || '').split(/[\\s_]/)\r\n            .filter(item => item)\r\n            .map(word => word ? word[0].toUpperCase() + word.substring(1).toLowerCase() : '')\r\n            .join(' ');\r\n    }\r\n\r\n    static getObjectName(objects, id, settings, options, isDesc) {\r\n        let item = objects[id];\r\n        let text = id;\r\n        const attr = isDesc ? 'desc' : 'name';\r\n\r\n        options = options || {};\r\n        if (!options.language) {\r\n            options.language = (objects['system.config'] && objects['system.config'].common && objects['system.config'].common.language) || window.sysLang || 'en';\r\n        }\r\n        if (settings && settings.name) {\r\n            text = settings.name;\r\n            if (typeof text === 'object') {\r\n                text = text[options.language] || text.en;\r\n            }\r\n        } else\r\n        if (item && item.common && item.common[attr]) {\r\n            text = item.common[attr];\r\n            if (attr !== 'desc' && !text && item.common.desc) {\r\n                text = item.common.desc;\r\n            }\r\n            if (typeof text === 'object') {\r\n                text = text[options.language] || text.en;\r\n            }\r\n            text = text.replace(/[_.]/g, ' ');\r\n\r\n            if (text === text.toUpperCase()) {\r\n                text = text[0] + text.substring(1).toLowerCase();\r\n            }\r\n        } else {\r\n            let pos = id.lastIndexOf('.');\r\n            text = id.substring(pos + 1).replace(/[_.]/g, ' ');\r\n            text = Utils.CapitalWords(text);\r\n        }\r\n        return text.trim();\r\n    }\r\n\r\n    static getSettingsOrder(obj, forEnumId, options) {\r\n        if (obj && obj.hasOwnProperty('common')) {\r\n            obj = obj.common;\r\n        }\r\n        let settings;\r\n        if (obj && obj.custom) {\r\n            settings = (obj.custom || {})[NAMESPACE];\r\n            const user = options.user || 'admin';\r\n            if (settings && settings[user]) {\r\n                if (forEnumId) {\r\n                    if (settings[user].subOrder && settings[user].subOrder[forEnumId]) {\r\n                        return JSON.parse(JSON.stringify(settings[user].subOrder[forEnumId]));\r\n                    }\r\n                } else {\r\n                    if (settings[user].order) {\r\n                        return JSON.parse(JSON.stringify(settings[user].order));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    static getSettingsCustomURLs(obj, forEnumId, options) {\r\n        if (obj && obj.hasOwnProperty('common')) {\r\n            obj = obj.common;\r\n        }\r\n        let settings;\r\n        if (obj && obj.custom) {\r\n            settings = (obj.custom || {})[NAMESPACE];\r\n            const user = options.user || 'admin';\r\n            if (settings && settings[user]) {\r\n                if (forEnumId) {\r\n                    if (settings[user].subURLs && settings[user].subURLs[forEnumId]) {\r\n                        return JSON.parse(JSON.stringify(settings[user].subURLs[forEnumId]));\r\n                    }\r\n                } else {\r\n                    if (settings[user].URLs) {\r\n                        return JSON.parse(JSON.stringify(settings[user].URLs));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    static reorder(list, source, dest) {\r\n        const result = Array.from(list);\r\n        const [removed] = result.splice(source, 1);\r\n        result.splice(dest, 0, removed);\r\n        return result;\r\n    };\r\n\r\n    static getSettings(obj, options, defaultEnabling) {\r\n        let settings;\r\n        const id = (obj && obj._id) || (options && options.id);\r\n        if (obj && obj.hasOwnProperty('common')) {\r\n            obj = obj.common;\r\n        }\r\n        if (obj && obj.custom) {\r\n            settings = obj.custom || {};\r\n            settings = settings[NAMESPACE] && settings[NAMESPACE][options.user || 'admin'] ? JSON.parse(JSON.stringify(settings[NAMESPACE][options.user || 'admin'])) : {enabled: true};\r\n        } else {\r\n            settings = {enabled: defaultEnabling === undefined ? true : defaultEnabling, useCustom: false};\r\n        }\r\n\r\n        if (!settings.hasOwnProperty('enabled')) {\r\n            settings.enabled = defaultEnabling === undefined ? true : defaultEnabling;\r\n        }\r\n\r\n        if (false && settings.useCommon) {\r\n            if (obj.color) settings.color = obj.color;\r\n            if (obj.icon)  settings.icon  = obj.icon;\r\n            if (obj.name)  settings.name  = obj.name;\r\n        } else {\r\n            if (options) {\r\n                if (!settings.name  && options.name)  settings.name  = options.name;\r\n                if (!settings.icon  && options.icon)  settings.icon  = options.icon;\r\n                if (!settings.color && options.color) settings.color = options.color;\r\n            }\r\n\r\n            if (obj) {\r\n                if (!settings.color && obj.color) settings.color = obj.color;\r\n                if (!settings.icon  && obj.icon)  settings.icon  = obj.icon;\r\n                if (!settings.name  && obj.name)  settings.name  = obj.name;\r\n            }\r\n        }\r\n\r\n        if (typeof settings.name === 'object') {\r\n            settings.name = settings.name[options.language] || settings.name.en;\r\n\r\n            settings.name = (settings.name || '').replace(/_/g, ' ');\r\n\r\n            if (settings.name === settings.name.toUpperCase()) {\r\n                settings.name = settings.name[0] + settings.name.substring(1).toLowerCase();\r\n            }\r\n        }\r\n        if (!settings.name && id) {\r\n            let pos = id.lastIndexOf('.');\r\n            settings.name = id.substring(pos + 1).replace(/[_.]/g, ' ');\r\n            settings.name = (settings.name || '').replace(/_/g, ' ');\r\n            settings.name = Utils.CapitalWords(settings.name);\r\n        }\r\n\r\n        return settings;\r\n    }\r\n\r\n    static setSettings(obj, settings, options) {\r\n        if (obj) {\r\n            obj.common = obj.common || {};\r\n            obj.common.custom = obj.common.custom || {};\r\n            obj.common.custom[NAMESPACE] = obj.common.custom[NAMESPACE] || {};\r\n            obj.common.custom[NAMESPACE][options.user || 'admin'] = settings;\r\n            const s = obj.common.custom[NAMESPACE][options.user || 'admin'];\r\n            if (s.useCommon) {\r\n                if (s.color !== undefined) {\r\n                    obj.common.color = s.color;\r\n                    delete s.color;\r\n                }\r\n                if (s.icon !== undefined) {\r\n                    obj.common.icon = s.icon;\r\n                    delete s.icon;\r\n                }\r\n                if (s.name !== undefined) {\r\n                    if (typeof obj.common.name !== 'object') {\r\n                        obj.common.name = {};\r\n                        obj.common.name[options.language] = s.name;\r\n                    } else{\r\n                        obj.common.name[options.language] = s.name;\r\n                    }\r\n                    delete s.name;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    static getIcon(settings, style) {\r\n        if (settings && settings.icon) {\r\n            if (settings.icon.startsWith('data:image')) {\r\n                return (<img alt={settings.name} src={settings.icon} style={style || {}}/>);\r\n            } else { // may be later some changes for second type\r\n                return (<img alt={settings.name} src={settings.icon} style={style || {}}/>);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    static getObjectIcon(id, obj) {\r\n        if (obj && obj.common && obj.common.icon) {\r\n            let icon = obj.common.icon;\r\n            if (icon.startsWith('data:image')) {\r\n                return icon;\r\n            } else {\r\n                const parts = id.split('.');\r\n                if (parts[0] === 'system') {\r\n                    icon = 'adapter/' + parts[2] + icon;\r\n                } else {\r\n                    icon = 'adapter/' + parts[0] + icon;\r\n                }\r\n\r\n                if (window.location.pathname.match(/material\\/[.\\d]+/)) {\r\n                    icon = '../../' + icon;\r\n                } else\r\n                if (window.location.pathname.match(/material\\//)) {\r\n                    icon = '../' + icon;\r\n                }\r\n                return icon;\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n\r\n    }\r\n\r\n    static splitCamelCase(text) {\r\n        if (false && text !== text.toUpperCase()) {\r\n            const words = text.split(/\\s+/);\r\n            for (let i = 0; i < words.length; i++) {\r\n                let word = words[i];\r\n                if (word.toLowerCase() !== word && word.toUpperCase() !== word) {\r\n                    let z = 0;\r\n                    const ww = [];\r\n                    let start = 0;\r\n                    while (z < word.length) {\r\n                        if (word[z].match(/[A-ZÜÄÖА-Я]/)) {\r\n                            ww.push(word.substring(start, z));\r\n                            start = z;\r\n                        }\r\n                        z++;\r\n                    }\r\n                    if (start !== z) {\r\n                        ww.push(word.substring(start, z));\r\n                    }\r\n                    for (let k = 0; k < ww.length; k++) {\r\n                        words.splice(i + k, 0, ww[k]);\r\n                    }\r\n                    i += ww.length;\r\n                }\r\n            }\r\n\r\n            return words.map(w => {\r\n                w = w.trim();\r\n                if (w) {\r\n                    return w[0].toUpperCase() + w.substring(1).toLowerCase();\r\n                }\r\n                return '';\r\n            }).join(' ');\r\n        } else {\r\n            return Utils.CapitalWords(text);\r\n        }\r\n    }\r\n\r\n    // https://stackoverflow.com/questions/35969656/how-can-i-generate-the-opposite-color-according-to-current-color\r\n    static isUseBright(color, defaultValue) {\r\n        if (color === null || color === undefined || color === '') {\r\n            return defaultValue === undefined ? true : defaultValue;\r\n        }\r\n        color = color.toString();\r\n        if (color.indexOf('#') === 0) {\r\n            color = color.slice(1);\r\n        }\r\n        let r;\r\n        let g;\r\n        let b;\r\n\r\n        const rgb = color.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?/i);\r\n        if (rgb && rgb.length === 4) {\r\n            r = parseInt(rgb[1], 10);\r\n            g = parseInt(rgb[2], 10);\r\n            b = parseInt(rgb[3], 10);\r\n        } else {\r\n            // convert 3-digit hex to 6-digits.\r\n            if (color.length === 3) {\r\n                color = color[0] + color[0] + color[1] + color[1] + color[2] + color[2];\r\n            }\r\n            if (color.length !== 6) {\r\n                return false;\r\n            }\r\n\r\n            r = parseInt(color.slice(0, 2), 16);\r\n            g = parseInt(color.slice(2, 4), 16);\r\n            b = parseInt(color.slice(4, 6), 16);\r\n        }\r\n\r\n\r\n        // http://stackoverflow.com/a/3943023/112731\r\n        return (r * 0.299 + g * 0.587 + b * 0.114) <= 186;\r\n    };\r\n\r\n    static getTimeString(seconds) {\r\n        seconds = parseFloat(seconds);\r\n        if (isNaN(seconds)) {\r\n            return '--:--';\r\n        }\r\n        const hours = Math.floor(seconds / 3600);\r\n        let minutes = Math.floor((seconds % 3600) / 60);\r\n        let secs = seconds % 60;\r\n        if (hours) {\r\n            if (minutes < 10) minutes = '0' + minutes;\r\n            if (secs < 10) secs = '0' + secs;\r\n            return hours + ':' + minutes + ':' + secs;\r\n        } else {\r\n            if (secs < 10) secs = '0' + secs;\r\n            return minutes + ':' + secs;\r\n        }\r\n    }\r\n\r\n    static getWindDirection(angle) {\r\n        if (angle >= 0 && angle < 11.25) {\r\n            return 'N'\r\n        } else if (angle >= 11.25 && angle < 33.75) {\r\n            return 'NNE'\r\n        } else if (angle >= 33.75 && angle < 56.25) {\r\n            return 'NE'\r\n        } else if (angle >= 56.25 && angle < 78.75) {\r\n            return 'ENE'\r\n        } else if (angle >= 78.75 && angle < 101.25) {\r\n            return 'E'\r\n        } else if (angle >= 101.25 && angle < 123.75) {\r\n            return 'ESE'\r\n        } else if (angle >= 123.75 && angle < 146.25) {\r\n            return 'SE'\r\n        } else if (angle >= 146.25 && angle < 168.75) {\r\n            return 'SSE'\r\n        } else if (angle >= 168.75 && angle < 191.25) {\r\n            return 'S'\r\n        } else if (angle >= 191.25 && angle < 213.75) {\r\n            return 'SSW'\r\n        } else if (angle >= 213.75 && angle < 236.25) {\r\n            return 'SW'\r\n        } else if (angle >= 236.25 && angle < 258.75) {\r\n            return 'WSW'\r\n        } else if (angle >= 258.75 && angle < 281.25) {\r\n            return 'W'\r\n        } else if (angle >= 281.25 && angle < 303.75) {\r\n            return 'WNW'\r\n        } else if (angle >= 303.75 && angle < 326.25) {\r\n            return 'NW'\r\n        } else if (angle >= 326.25 && angle < 348.75) {\r\n            return 'NNW'\r\n        } else if (angle >= 348.75) {\r\n            return 'N'\r\n        }\r\n    }\r\n\r\n    static padding(num) {\r\n        if (typeof num === 'string') {\r\n            if (num.length < 2) {\r\n                return '0' + num;\r\n            } else {\r\n                return num;\r\n            }\r\n        } else if (num < 10) {\r\n            return '0' + num;\r\n        } else {\r\n            return num;\r\n        }\r\n    }\r\n\r\n    static setDataFormat(format) {\r\n        if (format) {\r\n            Utils.dateFormat = format.toUpperCase().split(/[.-/]/);\r\n            Utils.dateFormat.splice(Utils.dateFormat.indexOf('YYYY'), 1);\r\n        }\r\n    }\r\n\r\n    static date2string(now) {\r\n        if (typeof now === 'string') {\r\n            now = now.trim();\r\n            if (!now) return '';\r\n            // only letters\r\n            if (now.match(/^[\\w\\s]+$/)) {\r\n                // Day of week\r\n                return now;\r\n            }\r\n            let m = now.match(/(\\d{1,4})[-./](\\d{1,2})[-./](\\d{1,4})/);\r\n            if (m) {\r\n                let a = [parseInt(m[1], 10), parseInt(m[2], 10), parseInt(m[3], 10)];\r\n                let year = a.find(y => y > 31);\r\n                a.splice(a.indexOf(year), 1);\r\n                let day = a.find(m => m > 12);\r\n                if (day) {\r\n                    a.splice(a.indexOf(day), 1);\r\n                    now = new Date(year, a[0] - 1, day);\r\n                } else {\r\n                    // MM DD\r\n                    if (Utils.dateFormat[0][0] === 'M' && Utils.dateFormat[1][0] === 'D') {\r\n                        now = new Date(year, a[0] - 1, a[1]);\r\n                        if (Math.abs(now.getTime - Date.now()) > 3600000 * 24 * 10) {\r\n                            now = new Date(year, a[1] - 1, a[0]);\r\n                        }\r\n                    } else\r\n                    // DD MM\r\n                    if (Utils.dateFormat[0][0] === 'D' && Utils.dateFormat[1][0] === 'M') {\r\n                        now = new Date(year, a[1] - 1, a[0]);\r\n                        if (Math.abs(now.getTime - Date.now()) > 3600000 * 24 * 10) {\r\n                            now = new Date(year, a[0] - 1, a[1]);\r\n                        }\r\n                    } else {\r\n                        now = new Date(now);\r\n                    }\r\n                }\r\n            } else {\r\n                now = new Date(now);\r\n            }\r\n        } else {\r\n            now = new Date(now);\r\n        }\r\n\r\n        let date = I18n.t('dow_' + days[now.getDay()]).replace('dow_', '');\r\n        date += '. ' + now.getDate() + ' ' + I18n.t('month_' + months[now.getMonth()]).replace('month_', '');\r\n        return date;\r\n    }\r\n}\r\n\r\nexport default Utils;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport TreeDataTable from './cp-react-tree-table/src';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Select from '@material-ui/core/Select';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Input from '@material-ui/core/Input';\r\nimport secondary from '@material-ui/core/colors/orange';\r\n\r\nimport {FaFolder as IconClosed} from 'react-icons/fa';\r\nimport {FaFolderOpen as IconOpen} from 'react-icons/fa';\r\nimport {FaFileAlt as IconState} from 'react-icons/fa';\r\nimport {FaFile as IconDocument} from 'react-icons/fa';\r\nimport {MdPerson as IconExpert} from 'react-icons/md';\r\n//import {MdContentCopy as IconCopy} from 'react-icons/md';\r\nimport IconDefaultState from './assets/state.png';\r\nimport IconDefaultChannel from './assets/channel.png';\r\nimport IconDefaultDevice from './assets/device.png';\r\nimport IconDefault from './assets/empty.png';\r\n\r\nimport I18n from '../i18n';\r\nimport Utils from './Utils';\r\n\r\nimport CopyContentImg from '../assets/copy-content.svg';\r\n\r\nconst styles = theme => ({\r\n    toolbar: {\r\n        minHeight: 38,//Theme.toolbar.height,\r\n//        boxShadow: '0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12)'\r\n    },\r\n    toolbarButtons: {\r\n        padding: 4,\r\n        marginLeft: 4\r\n    },\r\n    treeTable: {\r\n        background: '#ffffff',\r\n        borderTop: '1px solid #999',\r\n        borderBottom: '1px solid #999'\r\n    },\r\n    treeTableRow: {\r\n        boxShadow: 'inset 0 1px 0 #eeeeee',\r\n        display: 'block'\r\n    },\r\n    mainDiv: {\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'hidden'\r\n    },\r\n    tableDiv: {\r\n        width: '100%',\r\n        height: 'calc(100% - 34px - 38px)',\r\n        overflow: 'auto'\r\n    },\r\n    cellDiv: {\r\n        display: 'inline-block',\r\n        fontSize: 12,\r\n        height: 26,\r\n        verticalAlign: 'top'\r\n    },\r\n    cellDivId: {\r\n        display: 'inline-block',\r\n        height: 26,\r\n        verticalAlign: 'top'\r\n    },\r\n    cellWrapper: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        fontWeight: 300,\r\n        fontSize: 13,\r\n        height: '100%',\r\n        width: '100%',\r\n//        fontFamily: \"'SF Mono', 'Segoe UI Mono', 'Roboto Mono', Menlo, Courier, monospace\",\r\n        lineHeight: '1em'\r\n    },\r\n    selectNone: {\r\n        opacity: 0.5,\r\n    },\r\n    selectIcon: {\r\n        width: 16,\r\n        height: 16,\r\n        paddingRight: 5\r\n    },\r\n    cellWrapperElement: {\r\n        flexGrow: 1,\r\n        cursor: 'default'\r\n    },\r\n\r\n    toggleButtonWrapper: {\r\n        width: 16,\r\n        flexGrow: 0,\r\n        color: '#008fff',\r\n        cursor: 'pointer',\r\n        padding: 1,\r\n        borderRadius: 3\r\n    },\r\n    partlyVisible: {\r\n        opacity: 0.3\r\n    },\r\n    /*.toggle-button-wrapper > span:hover {\r\n        background: #d7d7d7;\r\n    }*/\r\n    \r\n    selectSpan: {\r\n//        fontFamily: \"'SF Mono', 'Segoe UI Mono', 'Roboto Mono', Menlo, Courier, monospace\",\r\n        background: '#efefef',\r\n        border: '1px solid #e5e5e5',\r\n        padding: 2,\r\n        borderRadius: 3\r\n    },\r\n    selected: {\r\n        background: '#008fff',\r\n        color: 'white'\r\n    },\r\n    icon: {\r\n        width: 20,\r\n        height: 20,\r\n        paddingTop: 2,\r\n        paddingRight: 2\r\n    },\r\n    header: {\r\n        width: '100%'\r\n    },\r\n    headerCell: {\r\n        display: 'inline-block'\r\n    },\r\n    headerCellInput: {\r\n        width: 'calc(100% - 5px)'\r\n    },\r\n    visibleButtons: {\r\n        color: '#2196f3',\r\n        opacity: 0.7\r\n    },\r\n    depth: {\r\n        position: 'absolute',\r\n        top: 8,\r\n        left: 10,\r\n        color: 'black',\r\n        fontSize: 14\r\n    },\r\n    cellCopy: {\r\n        position: 'absolute',\r\n        top: 3,\r\n        right: 10,\r\n        width: 16,\r\n        height: 16,\r\n        background: 'lightblue',\r\n        cursor: 'grab',\r\n        borderRadius: 2,\r\n        padding: 2,\r\n    },\r\n    cellCopyPressed: {\r\n        cursor: 'grabbing',\r\n        background: secondary.A700,\r\n    }\r\n});\r\n\r\n// d=data, t=target, s=start, e=end, m=middle\r\nfunction binarySearch(d, t, s, e) {\r\n    s = s || 0;\r\n    if (e === undefined) {\r\n        e = d.length - 1;\r\n        if (!e) {\r\n            return d[0] === t;\r\n        }\r\n    }\r\n    const m = Math.floor((s + e) / 2);\r\n    if (t === d[m]) return d[m];\r\n    if (e - 1 === s) return d[s] === t || d[e] === t;\r\n    if (t > d[m]) return binarySearch(d, t, m, e);\r\n    if (t < d[m]) return binarySearch(d, t, s, m);\r\n}\r\n\r\n/* function walkTree(tree, func) {\r\n    func(tree);\r\n    if (tree.children) {\r\n        tree.children.forEach(item => walkTree(item, func));\r\n    }\r\n}\r\n*/\r\nfunction applyFilter(item, filters, lang, objects, context) {\r\n    let filteredOut = false;\r\n    if (!context) {\r\n        context = {};\r\n        if (filters.id) {\r\n            context.id = filters.id.toLowerCase();\r\n        }\r\n        if (filters.name) {\r\n            context.name = filters.name.toLowerCase();\r\n        }\r\n        if (filters.role) {\r\n            context.role = filters.role.toLowerCase();\r\n        }\r\n        if (filters.room) {\r\n            context.room = (objects[filters.room] && objects[filters.room].common && objects[filters.room].common.members) || [];\r\n        }\r\n        if (filters.func) {\r\n            context.func = (objects[filters.func] && objects[filters.func].common && objects[filters.func].common.members) || [];\r\n        }\r\n    }\r\n\r\n    if (item.data.id) {\r\n        if (!filters.expert) {\r\n            filteredOut = item.data.id === 'system' || item.data.id.startsWith('system.') || (item.data.obj && item.data.obj.common && item.data.obj.common.expert);\r\n        }\r\n        if (!filteredOut && context.id) {\r\n            if (item.data.fID === undefined) {\r\n                item.data.fID = item.data.id.toLowerCase();\r\n            }\r\n            filteredOut = item.data.fID.indexOf(context.id) === -1;\r\n        }\r\n        if (!filteredOut && context.name) {\r\n            if (item.data.fName === undefined) {\r\n                item.data.fName = (item.data.obj && item.data.obj.common && getName(item.data.obj.common.name, lang)) || '';\r\n                item.data.fName = item.data.name.toLowerCase();\r\n            }\r\n            filteredOut = item.data.fName.indexOf(context.name) === -1;\r\n        }\r\n        if (!filteredOut && filters.role) {\r\n            filteredOut = !(item.data && item.data.obj && item.data.obj.common && item.data.obj.common.role && item.data.obj.common.role.startsWith(context.role));\r\n        }\r\n        if (!filteredOut && context.room) {\r\n            filteredOut = !context.room.find(id => id === item.data.id || item.data.id.startsWith(id + '.'));\r\n        }\r\n        if (!filteredOut && context.func) {\r\n            filteredOut = !context.func.find(id => id === item.data.id || item.data.id.startsWith(id + '.'));\r\n        }\r\n    }\r\n    item.data.visible = !filteredOut;\r\n    item.data.hasVisibleChildren = false;\r\n    if (item.children) {\r\n        item.children.forEach(_item => {\r\n            const visible = applyFilter(_item, filters, lang, objects, context);\r\n            if (visible) {\r\n                item.data.hasVisibleChildren = true;\r\n            }\r\n        });\r\n    }\r\n    return item.data.visible || item.data.hasVisibleChildren;\r\n}\r\n\r\nfunction buildTree(objects, options) {\r\n    options = options || {};\r\n\r\n    const ids = Object.keys(objects);\r\n    ids.sort((a, b) => {\r\n        if (a === b) return 0;\r\n        a = a.replace(/\\./g, '!!!');\r\n        b = b.replace(/\\./g, '!!!');\r\n        if (a > b) return 1;\r\n        return -1;\r\n    });\r\n\r\n    // find empty nodes and create names for it\r\n    let currentPathArr = [];\r\n    let currentPath = '';\r\n    let currentPathLen = 0;\r\n    let root = {data: {name: '', id: ''}, children: []};\r\n\r\n    let info = {\r\n        funcEnums: [],\r\n        roomEnums: [],\r\n        roles: [],\r\n        ids: [],\r\n        objects\r\n    };\r\n\r\n    let croot = root;\r\n    for (let i = 0; i < ids.length; i++) {\r\n        const id = ids[i];\r\n        const parts = id.split('.');\r\n\r\n        if (objects[id]) {\r\n            if (objects[id].common && objects[id].common.role) {\r\n                if (info.roles.indexOf(objects[id].common.role) === -1) {\r\n                    info.roles.push(objects[id].common.role);\r\n                }\r\n            } else if (id.startsWith('enum.rooms.')) {\r\n                info.roomEnums.push(id);\r\n            } else if (id.startsWith('enum.functions.')) {\r\n                info.funcEnums.push(id);\r\n            }\r\n        }\r\n\r\n        if (options.statesOnly && (!objects[id] || objects[id].type !== 'state')) {\r\n            continue;\r\n        }\r\n        info.ids.push(id);\r\n\r\n        let repeat;\r\n        // if next level\r\n        do {\r\n            repeat = false;\r\n            if (!currentPath || id.substring(0, currentPath.length + 1) === currentPath + '.') {\r\n                if (parts.length - currentPathLen > 1) {\r\n                    let curPath = currentPath;\r\n                    for (let k = currentPathLen; k < parts.length - 1; k++) {\r\n                        curPath += (curPath ? '.' : '') + parts[k];\r\n                        if (!binarySearch(info.ids, curPath)) {\r\n                            const _croot = {data: {name: parts[k], parent: croot, id: curPath, obj: objects[curPath]}};\r\n                            croot.children = croot.children || [];\r\n                            croot.children.push(_croot);\r\n                            croot = _croot;\r\n                            //ids.splice(i, 0, curPath);\r\n                            info.ids.push(curPath);\r\n                            //i++;\r\n                        } else {\r\n                            croot = croot.children.find(item => item.data.name === parts[k]);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                const _croot = {data: {name: parts[parts.length - 1], obj: objects[id], parent: croot, id}, children: []};\r\n                croot.children = croot.children || [];\r\n                croot.children.push(_croot);\r\n                croot = _croot;\r\n\r\n                currentPathLen = parts.length;\r\n                currentPathArr = parts;\r\n                currentPath    = id;\r\n            } else {\r\n                let u = 0;\r\n                while (currentPathArr[u] === parts[u]) u++;\r\n                if (u > 0) {\r\n                    let move = currentPathArr.length;\r\n                    currentPathArr = currentPathArr.splice(0, u);\r\n                    currentPathLen = u;\r\n                    currentPath = currentPathArr.join('.');\r\n                    while (move > u) {\r\n                        croot = croot.data.parent;\r\n                        move--;\r\n                    }\r\n                } else {\r\n                    croot = root;\r\n                    currentPathArr = [];\r\n                    currentPath = '';\r\n                    currentPathLen = 0;\r\n                }\r\n                repeat = true;\r\n            }\r\n        } while(repeat);\r\n    }\r\n\r\n    info.roomEnums.sort();\r\n    info.funcEnums.sort();\r\n    info.roles.sort();\r\n\r\n    return {info, root};\r\n}\r\n\r\nfunction findNode(root, id, _parts, _path, _level) {\r\n    if (root.data.id === id) {\r\n        return root;\r\n    }\r\n    if (!_parts) {\r\n        _parts = id.split('.');\r\n        _level = 0;\r\n        _path = _parts[_level];\r\n    }\r\n    if (!root.children && root.data.id !== id) {\r\n        return null;\r\n    } else {\r\n        let found;\r\n        for (let i = 0; i< root.children.length; i++) {\r\n            const _id = root.children[i].data.id;\r\n            if (_id === _path) {\r\n                found = root.children[i];\r\n                break;\r\n            } else\r\n            if (_id < _path) continue;\r\n            if (_id > _path) break;\r\n        }\r\n        if (found) {\r\n            return findNode(found, id, _parts, _path + '.' + _parts[_level + 1], _level + 1);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\nfunction getName(name, lang) {\r\n    if (name && typeof name === 'object') {\r\n        return name[lang] || name.en;\r\n    } else {\r\n        return name || '';\r\n    }\r\n}\r\n\r\nfunction findRoomsForObject(data, id, lang, withParentInfo, rooms) {\r\n    if (!id) {\r\n        return [];\r\n    }\r\n    rooms = rooms || [];\r\n    for (let i = 0; i < data.roomEnums.length; i++) {\r\n        const common = data.objects[data.roomEnums[i]] && data.objects[data.roomEnums[i]].common;\r\n        const name = getName(common.name, lang);\r\n\r\n        if (common.members && common.members.indexOf(id) !== -1 && rooms.indexOf(name) === -1) {\r\n            if (!withParentInfo) {\r\n                rooms.push(name);\r\n            } else {\r\n                rooms.push({name: name, origin: id});\r\n            }\r\n        }\r\n    }\r\n    const parts = id.split('.');\r\n    parts.pop();\r\n    id = parts.join('.');\r\n    if (data.objects[id]) {\r\n        findRoomsForObject(data, id, lang, withParentInfo, rooms);\r\n    }\r\n\r\n    return rooms;\r\n}\r\n\r\n/* function findRoomsForObjectAsIds(data, id, rooms) {\r\n    if (!id) {\r\n        return [];\r\n    }\r\n    rooms = rooms || [];\r\n    for (let i = 0; i < data.roomEnums.length; i++) {\r\n        const common = data.objects[data.roomEnums[i]] && data.objects[data.roomEnums[i]].common;\r\n        if (common && common.members && common.members.indexOf(id) !== -1 &&\r\n            rooms.indexOf(data.roomEnums[i]) === -1) {\r\n            rooms.push(data.roomEnums[i]);\r\n        }\r\n    }\r\n    return rooms;\r\n}\r\n*/\r\nfunction findFunctionsForObject(data, id, lang, withParentInfo, funcs) {\r\n    if (!id) {\r\n        return [];\r\n    }\r\n    funcs = funcs || [];\r\n    for (let i = 0; i < data.funcEnums.length; i++) {\r\n        const common = data.objects[data.funcEnums[i]] && data.objects[data.funcEnums[i]].common;\r\n        const name = getName(common.name, lang);\r\n        if (common && common.members && common.members.indexOf(id) !== -1 && funcs.indexOf(name) === -1) {\r\n            if (!withParentInfo) {\r\n                funcs.push(name);\r\n            } else {\r\n                funcs.push({name: name, origin: id});\r\n            }\r\n        }\r\n    }\r\n    const parts = id.split('.');\r\n    parts.pop();\r\n    id = parts.join('.');\r\n    if (data.objects[id]) {\r\n        findFunctionsForObject(data, id, lang, withParentInfo, funcs);\r\n    }\r\n\r\n    return funcs;\r\n}\r\n\r\n/*function findFunctionsForObjectAsIds(data, id, funcs) {\r\n    if (!id) {\r\n        return [];\r\n    }\r\n    funcs = funcs || [];\r\n    for (let i = 0; i < data.funcEnums.length; i++) {\r\n        const common = data.objects[data.funcEnums[i]] && data.objects[data.funcEnums[i]].common;\r\n        if (common && common.members && common.members.indexOf(id) !== -1 &&\r\n            funcs.indexOf(data.funcEnums[i]) === -1) {\r\n            funcs.push(data.funcEnums[i]);\r\n        }\r\n    }\r\n\r\n    return funcs;\r\n}\r\n*/\r\nfunction getStates(obj) {\r\n    let states;\r\n    if (obj &&\r\n        obj.common &&\r\n        obj.common.states) {\r\n        states = obj.common.states;\r\n    }\r\n    if (states) {\r\n        if (typeof states === 'string' && states[0] === '{') {\r\n            try {\r\n                states = JSON.parse(states);\r\n            } catch (ex) {\r\n                console.error('Cannot parse states: ' + states);\r\n                states = null;\r\n            }\r\n        } else\r\n        // if old format val1:text1;val2:text2\r\n        if (typeof states === 'string') {\r\n            const parts = states.split(';');\r\n            states = {};\r\n            for (let p = 0; p < parts.length; p++) {\r\n                const s = parts[p].split(':');\r\n                states[s[0]] = s[1];\r\n            }\r\n        }\r\n    }\r\n    return states;\r\n}\r\n\r\nfunction quality2text(q) {\r\n    if (!q) return 'ok';\r\n    const custom = q & 0xFFFF0000;\r\n    let text = '';\r\n    if (q & 0x40) text += 'device';\r\n    if (q & 0x80) text += 'sensor';\r\n    if (q & 0x01) text += ' bad';\r\n    if (q & 0x02) text += ' not connected';\r\n    if (q & 0x04) text += ' error';\r\n\r\n    return text + (custom ? '|0x' + (custom >> 16).toString(16).toUpperCase() : '') + ' [0x' + q.toString(16).toUpperCase() + ']';\r\n}\r\n\r\nfunction formatDate(dateObj) {\r\n    //return dateObj.getFullYear() + '-' +\r\n    //    ('0' + (dateObj.getMonth() + 1).toString(10)).slice(-2) + '-' +\r\n    //    ('0' + (dateObj.getDate()).toString(10)).slice(-2) + ' ' +\r\n    //    ('0' + (dateObj.getHours()).toString(10)).slice(-2) + ':' +\r\n    //    ('0' + (dateObj.getMinutes()).toString(10)).slice(-2) + ':' +\r\n    //    ('0' + (dateObj.getSeconds()).toString(10)).slice(-2);\r\n    // Following implementation is 5 times faster\r\n    if (!dateObj) return '';\r\n\r\n    var text = dateObj.getFullYear();\r\n    var v = dateObj.getMonth() + 1;\r\n    if (v < 10) {\r\n        text += '-0' + v;\r\n    } else {\r\n        text += '-' + v;\r\n    }\r\n\r\n    v = dateObj.getDate();\r\n    if (v < 10) {\r\n        text += '-0' + v;\r\n    } else {\r\n        text += '-' + v;\r\n    }\r\n\r\n    v = dateObj.getHours();\r\n    if (v < 10) {\r\n        text += ' 0' + v;\r\n    } else {\r\n        text += ' ' + v;\r\n    }\r\n    v = dateObj.getMinutes();\r\n    if (v < 10) {\r\n        text += ':0' + v;\r\n    } else {\r\n        text += ':' + v;\r\n    }\r\n\r\n    v = dateObj.getSeconds();\r\n    if (v < 10) {\r\n        text += ':0' + v;\r\n    } else {\r\n        text += ':' + v;\r\n    }\r\n\r\n    v = dateObj.getMilliseconds();\r\n    if (v < 10) {\r\n        text += '.00' + v;\r\n    } else if (v < 100) {\r\n        text += '.0' + v;\r\n    } else {\r\n        text += '.' + v;\r\n    }\r\n\r\n    return text;\r\n}\r\n\r\nfunction formatValue(id, state, obj, texts) {\r\n    const states = getStates(obj);\r\n    const isCommon = obj.common;\r\n\r\n    let valText = state.val;\r\n    if (isCommon && isCommon.role && isCommon.role.match(/^value\\.time|^date/)) {\r\n        valText = valText ? (new Date(valText)).toString() : valText;\r\n    }\r\n\r\n    if (states && states[valText] !== undefined) {\r\n        valText = states[valText] + '(' + valText + ')';\r\n    }\r\n\r\n    let valFull;\r\n    if (valText === undefined) {\r\n        valText = '&nbsp;';\r\n    } else {\r\n        // if less 2000.01.01 00:00:00\r\n        if (state.ts < 946681200000) state.ts *= 1000;\r\n        if (state.lc < 946681200000) state.lc *= 1000;\r\n\r\n        if (isCommon && isCommon.unit) {\r\n             valText += ' ' + isCommon.unit;\r\n        }\r\n        valFull =           texts.value   + ': ' + state.val;\r\n        valFull += '\\x0A' + texts.ack     + ': ' + state.ack;\r\n        valFull += '\\x0A' + texts.ts      + ': ' + (state.ts ? formatDate(new Date(state.ts)) : '');\r\n        valFull += '\\x0A' + texts.lc      + ': ' + (state.lc ? formatDate(new Date(state.lc)) : '');\r\n        valFull += '\\x0A' + texts.from    + ': ' + (state.from || '');\r\n        if (state.user) {\r\n            valFull += '\\x0A' + texts.user    + ': ' + (state.user || '');\r\n        }\r\n        valFull += '\\x0A' + texts.quality + ': ' + quality2text(state.q || 0);\r\n    }\r\n    if (valText === null || valText === '') {\r\n        valText = '&nbsp;';\r\n    }\r\n    if (typeof valText === 'string' && valText !== '&nbsp;') {\r\n        valText = valText.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');\r\n    }\r\n\r\n    return {\r\n        valText: valText,\r\n        valFull: valFull,\r\n        style: {color: state.ack ? (state.q ? 'orange' : '') : '#c00000'}\r\n    };\r\n}\r\n\r\nfunction getSelectIdIcon(objects, id, prefix) {\r\n    prefix = prefix || '.';//http://localhost:8081';\r\n    let icon = '';\r\n    let alt  = '';\r\n    const _id_ = 'system.adapter.' + id;\r\n    if (id && objects[_id_] && objects[_id_].common && objects[_id_].common.icon) {\r\n        // if not BASE64\r\n        if (!objects[_id_].common.icon.match(/^data:image\\//)) {\r\n            if (objects[_id_].common.icon.indexOf('.') !== -1) {\r\n                icon = prefix + '/adapter/' + objects[_id_].common.name + '/' + objects[_id_].common.icon;\r\n            } else {\r\n                return null; //'<i class=\"material-icons iob-list-icon\">' + objects[_id_].common.icon + '</i>';\r\n            }\r\n        } else {\r\n            icon = objects[_id_].common.icon;\r\n        }\r\n    } else {\r\n        const obj = objects[id];\r\n\r\n        if (obj && obj.common) {\r\n            if (obj.common.icon) {\r\n                if (!obj.common.icon.match(/^data:image\\//)) {\r\n                    if (obj.common.icon.indexOf('.') !== -1) {\r\n                        var instance;\r\n                        if (obj.type === 'instance') {\r\n                            icon = prefix + '/adapter/' + obj.common.name + '/' + obj.common.icon;\r\n                        } else if (id && id.match(/^system\\.adapter\\./)) {\r\n                            instance = id.split('.', 3);\r\n                            if (obj.common.icon[0] === '/') {\r\n                                instance[2] += obj.common.icon;\r\n                            } else {\r\n                                instance[2] += '/' + obj.common.icon;\r\n                            }\r\n                            icon = prefix + '/adapter/' + instance[2];\r\n                        } else {\r\n                            instance = id.split('.', 2);\r\n                            if (obj.common.icon[0] === '/') {\r\n                                instance[0] += obj.common.icon;\r\n                            } else {\r\n                                instance[0] += '/' + obj.common.icon;\r\n                            }\r\n                            icon = prefix + '/adapter/' + instance[0];\r\n                        }\r\n                    } else {\r\n                        return null; // '<i class=\"material-icons iob-list-icon\">' + obj.common.icon + '</i>';\r\n                    }\r\n                } else {\r\n                    // base 64 image\r\n                    icon = obj.common.icon;\r\n                }\r\n            } else if (obj.type === 'device') {\r\n                icon = IconDefaultDevice;\r\n                alt  = 'device';\r\n            } else if (obj.type === 'channel') {\r\n                icon = IconDefaultChannel;\r\n                alt  = 'channel';\r\n            } else if (obj.type === 'state') {\r\n                icon = IconDefaultState;\r\n                alt  = 'state';\r\n            }\r\n        }\r\n    }\r\n\r\n    if (icon) {\r\n        return {src: icon, alt};\r\n    } else {\r\n        return  {src: IconDefault, alt: ''};\r\n    }\r\n}\r\n\r\nclass SelectID extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loaded: false,\r\n            selected: (this.props.selected || '').replace(/[\"']/g, ''),\r\n            filter: {\r\n                id: '',\r\n                name: '',\r\n                room: '',\r\n                func:  '',\r\n                role: '',\r\n                expert: false\r\n            },\r\n            depth: 0\r\n        };\r\n        this.selectedFound = false;\r\n        this.copyContentImg = CopyContentImg;\r\n        this.treeTableRef = React.createRef();\r\n        this.mainRef = React.createRef();\r\n        this.root = null;\r\n        this.lang = I18n.getLanguage();\r\n\r\n        this.props.connection.getObjects(objects => {\r\n            this.props.connection.getStates(states => {\r\n                this.states = states;\r\n                this.objects = objects;\r\n                const {info, root} = buildTree(this.objects, this.props);\r\n                this.root = root;\r\n                this.info = info;\r\n                applyFilter(this.root, this.state.filter, this.lang, this.objects);\r\n                this.setState({loaded: true});\r\n\r\n                this.state.selected && this.onSelect(this.state.selected);\r\n            }, true);\r\n        }, true);\r\n\r\n        this.texts = {\r\n            value:   I18n.t('tooltip_value'),\r\n            ack:     I18n.t('tooltip_ack'),\r\n            ts:      I18n.t('tooltip_ts'),\r\n            lc:      I18n.t('tooltip_lc'),\r\n            from:    I18n.t('tooltip_from'),\r\n            user:    I18n.t('tooltip_user'),\r\n            quality: I18n.t('tooltip_quality')\r\n        };\r\n    }\r\n\r\n    onSelect(selected, isDouble) {\r\n        selected !== this.state.selected && this.setState({selected});\r\n        const name = selected ? Utils.getObjectName(this.objects, selected, null, {language: this.lang}) : '';\r\n        this.props.onSelect && this.props.onSelect(selected, name, isDouble);\r\n    }\r\n\r\n    onDoubleClick(data, metadata, toggleChildren) {\r\n        if (metadata.hasChildren) {\r\n            toggleChildren();\r\n        } else if (data.obj && data.obj.type === 'state') {\r\n            this.onSelect(data.obj._id, true);\r\n        }\r\n    }\r\n\r\n    onCopy(e, id) {\r\n        const el = window.document.createElement('textarea');\r\n        el.value = id;\r\n        window.document.body.appendChild(el);\r\n        el.select();\r\n        window.document.execCommand('copy');\r\n        window.document.body.removeChild(el);\r\n        console.log(id);\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    }\r\n\r\n    installCopyButtons() {\r\n        if (!this.mainRef.current) return;\r\n        const rows = this.mainRef.current.getElementsByClassName('add-copy-button');\r\n        for (let i = 0; i < rows.length; i++) {\r\n            if (!rows[i].__installed) {\r\n                rows[i].addEventListener('mouseenter', e => {\r\n                    const copy = e.target.getElementsByClassName(this.props.classes.cellCopy);\r\n                    if (!copy || !copy.length) {\r\n                        const div = document.createElement('div');\r\n                        const img = document.createElement('img');\r\n                        img.src = this.copyContentImg;\r\n                        img.width = 16;\r\n                        img.height = 16;\r\n                        img.color = secondary.A200;\r\n                        div.appendChild(img);\r\n                        div.className = this.props.classes.cellCopy;\r\n                        div.addEventListener('click', e => this.onCopy(e, e.target.parentNode.dataset.index), false);\r\n                        div.addEventListener('mousedown', e => {\r\n                            if (e.target.parentNode.className.indexOf(this.props.classes.cellCopyPressed) === -1) {\r\n                                e.target.parentNode.className += ' ' + this.props.classes.cellCopyPressed;\r\n                            }\r\n                        }, false);\r\n                        div.addEventListener('mouseup', e => {\r\n                            let className = e.target.parentNode.className.split(' ');\r\n                            let pos = className.indexOf(this.props.classes.cellCopyPressed);\r\n                            while (pos !== -1) {\r\n                                className.splice(pos);\r\n                                pos = className.indexOf(this.props.classes.cellCopyPressed);\r\n                            }\r\n                            e.target.parentNode.className = className.join(' ');\r\n                        }, false);\r\n                        e.target.appendChild(div);\r\n                    }\r\n                }, false);\r\n                rows[i].addEventListener('mouseleave', e => {\r\n                    const copy = e.target.getElementsByClassName(this.props.classes.cellCopy);\r\n                    if (copy && copy.length) {\r\n                        e.target.removeChild(copy[0]);\r\n                    }\r\n                }, false);\r\n                rows[i].__installed = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.installCopyButtons();\r\n        if (!this.selectedFound) {\r\n            if (this.props.selected && this.treeTableRef.current) {\r\n                const node = findNode(this.root, this.props.selected);\r\n                this.treeTableRef.current.scrollIntoView(node);\r\n                this.selectedFound = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    renderIndexColumn(data, metadata, toggleChildren) {\r\n        const selected = this.state.selected === data.id;\r\n        const isExist = !!this.objects[data.id];\r\n        const isState = isExist && this.objects[data.id].type === 'state';\r\n        // const isChannel = isExist && !isState && this.objects[data.id].type === 'channel';\r\n        // const isDevice = isExist && !isChannel && !isState && this.objects[data.id].type === 'device';\r\n\r\n        const padding = (metadata.depth * 25) + 'px';\r\n        const width = `calc(100% - ${padding})`;\r\n        return (\r\n            <div style={{paddingLeft: padding, width: width}}\r\n                 data-index={data.id}\r\n                 className={this.props.classes.cellWrapper + ' add-copy-button'}\r\n            >\r\n                <span className={(selected ? this.props.classes.selected : '') + ' ' + this.props.classes.toggleButtonWrapper}>\r\n                  {metadata.hasChildren\r\n                      ? (<span onClick={toggleChildren}>{metadata.hasVisibleChildren ? (<IconOpen/>) : (<IconClosed/>)}</span>)\r\n                      : (isState ? (<IconState/>) : (<IconDocument/>))\r\n                  }\r\n                </span>\r\n                <span className={this.props.classes.cellWrapperElement} style={{fontWeight: metadata.hasChildren ? 'bold' : 'normal'}}>{data.name}</span>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderColumnName(data, metadata, toggleChildren) {\r\n        const icon = getSelectIdIcon(this.objects, data.id, this.props.prefix);\r\n        return (<span className={this.props.classes.cellWrapper}>\r\n            <img src={icon.src} className={this.props.classes.icon} alt={icon.alt}/>\r\n            {data.obj && Utils.getObjectName(this.objects, data.obj._id, null, {language: this.lang})}\r\n            </span>);\r\n    }\r\n    renderColumnRole(data, metadata, toggleChildren) {\r\n        if (!data.obj) return null;\r\n        return (<span className={this.props.classes.cellWrapper}>{(data.obj.common && data.obj.common.role) || ''}</span>);\r\n    }\r\n    renderColumnRoom(data, metadata, toggleChildren) {\r\n        if (!data.obj) return null;\r\n        const list = findRoomsForObject(this.info, data.obj._id, this.lang) || [];\r\n        return (<span className={this.props.classes.cellWrapper}>{list.join(', ')}</span>);\r\n    }\r\n    renderColumnFunc(data, metadata, toggleChildren) {\r\n        if (!data.obj) return null;\r\n        const list = findFunctionsForObject(this.info, data.obj._id, this.lang) || [];\r\n        return (<span className={this.props.classes.cellWrapper}>{list.join(', ')}</span>);\r\n    }\r\n    renderColumnValue(data, metadata, toggleChildren) {\r\n        if (!data.obj || !data.obj._id || this.states || !this.states[data.obj._id]) return null;\r\n        const id = data.obj._id;\r\n        const state = this.states[id];\r\n        const info = formatValue(id, state, data.obj, this.texts);\r\n        return (<span className={this.props.classes.cellWrapper} style={info.style} title={info.valFull}>{info.valText}</span>);\r\n    }\r\n\r\n    onFilter(name, value) {\r\n        if (this.state.filter[name] !== value) {\r\n            const filter = JSON.parse(JSON.stringify(this.state.filter));\r\n            filter[name] = value;\r\n            this.filterTimer && clearTimeout(this.filterTimer);\r\n            this.filterTimer = setTimeout(() => {\r\n                applyFilter(this.root, filter, this.lang, this.objects);\r\n                this.forceUpdate();\r\n            }, 400);\r\n            this.setState({filter});\r\n        }\r\n    }\r\n\r\n    getFilterInput(name) {\r\n        return (<FormControl className={this.props.classes.headerCellInput} style={{marginTop: 0, marginBottom: 0}} margin=\"dense\">\r\n            <Input\r\n                classes={{underline: 'no-underline'}}\r\n                id={name}\r\n                placeholder={I18n.t('filter_' + name)}\r\n                value={this.state.filter[name]}\r\n                onChange={e => this.onFilter(name, e.target.value)}\r\n                autoComplete=\"off\"\r\n            />\r\n        </FormControl>);\r\n    }\r\n    getFilterSelect(name, values) {\r\n        //<!--InputLabel htmlFor=\"demo-controlled-open-select\">Age</InputLabel-->\r\n        return (\r\n            <Select className={this.props.classes.headerCellInput + ' no-underline'}\r\n                value={this.state.filter[name]}\r\n                onChange={e => this.onFilter(name, e.target.value)}\r\n                inputProps={{name, id: name,}}\r\n                displayEmpty={true}\r\n            >\r\n                <MenuItem key=\"empty\" value=\"\"><span className={this.props.classes.selectNone}>{I18n.t('filter_' + name)}</span></MenuItem>\r\n                {values.map(item => {\r\n                    let id;\r\n                    let name;\r\n                    let icon;\r\n                    if (typeof item === 'object') {\r\n                        id = item.value;\r\n                        name = item.name;\r\n                        icon = getSelectIdIcon(this.objects, id, this.props.prefix);\r\n                    } else {\r\n                        id = item;\r\n                        name = item;\r\n                    }\r\n\r\n                    return (\r\n                        <MenuItem key={id} value={id}>\r\n                            {icon && (<img className={this.props.classes.selectIcon} src={icon.src} alt={name}/>)}\r\n                            {name}\r\n                        </MenuItem>)\r\n                })}\r\n            </Select>);\r\n    }\r\n    getFilterSelectRole() {\r\n        return this.getFilterSelect('role', this.info.roles);\r\n    }\r\n    getFilterSelectRoom() {\r\n        const rooms = this.info.roomEnums.map(id => {\r\n            return {name: getName((this.objects[id] && this.objects[id].common && this.objects[id].common.name) || id.split('.').pop()), value: id};\r\n        });\r\n\r\n        return this.getFilterSelect('room', rooms);\r\n\r\n    }\r\n    getFilterSelectFunction() {\r\n        const func = this.info.funcEnums.map(id => {\r\n            return {name: getName((this.objects[id] && this.objects[id].common && this.objects[id].common.name) || id.split('.').pop()), value: id};\r\n        });\r\n        return this.getFilterSelect('func', func);\r\n\r\n    }\r\n    onExpandAll() {\r\n        this.treeTableRef.current.expandAll();\r\n    }\r\n    onCollapseAll() {\r\n        this.treeTableRef.current.collapseAll();\r\n    }\r\n    onExpandVisible() {\r\n        if (this.state.depth < 9) {\r\n            const depth = this.state.depth + 1;\r\n            this.setState({depth: depth}, () => {\r\n                this.treeTableRef.current.expandAll(depth);\r\n            });\r\n        }\r\n    }\r\n    onCollapseVisible() {\r\n        if (this.state.depth > 0) {\r\n            const depth = this.state.depth - 1;\r\n            this.setState({depth: depth}, () => {\r\n                this.treeTableRef.current.expandAll(depth);\r\n            });\r\n        }\r\n    }\r\n\r\n    getToolbar() {\r\n        return (\r\n            <Toolbar variant=\"dense\" className={this.props.classes.toolbar} key=\"toolbar\">\r\n                <IconButton key=\"expert\" variant=\"contained\" className={this.props.classes.toolbarButtons} color={this.state.filter.expert ? 'secondary' : 'primary'} onClick={() => this.onFilter('expert', !this.state.filter.expert)}><IconExpert /></IconButton>\r\n                <IconButton key=\"expandAll\" variant=\"contained\" className={this.props.classes.toolbarButtons} onClick={() => this.onExpandAll()}><IconOpen /></IconButton>\r\n                <IconButton key=\"collapseAll\" variant=\"contained\" className={this.props.classes.toolbarButtons} onClick={() => this.onCollapseAll()}><IconClosed /></IconButton>\r\n                <IconButton key=\"expandVisible\" variant=\"contained\" className={this.props.classes.toolbarButtons + ' ' + this.props.classes.visibleButtons} onClick={() => this.onExpandVisible()}><IconOpen />{this.state.depth ? (<div className={this.props.classes.depth}>{this.state.depth}</div>) : null}</IconButton>\r\n                <IconButton key=\"collapseVisible\" variant=\"contained\" className={this.props.classes.toolbarButtons + ' ' + this.props.classes.visibleButtons} onClick={() => this.onCollapseVisible()}><IconClosed />{this.state.depth ? (<div className={this.props.classes.depth}>{this.state.depth}</div>) : null}</IconButton>\r\n            </Toolbar>);\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.loaded) {\r\n            return (<CircularProgress/>);\r\n        } else {\r\n            const classes = this.props.classes;\r\n            const idWidth = 300;\r\n            const WIDTHS = [120, 180, 180, 120];\r\n            const width = `calc(100% - ${idWidth + WIDTHS[0] + WIDTHS[1] + WIDTHS[2] + WIDTHS[3]}px)`;\r\n            return (<div className={classes.mainDiv} ref={this.mainRef}>\r\n                {this.getToolbar()}\r\n                <div key=\"header\" className={classes.header}>\r\n                    <div className={classes.headerCell} style={{width: idWidth}}>{this.getFilterInput('id')}</div>\r\n                    <div className={classes.headerCell} style={{width: width}}>{this.getFilterInput('name')}</div>\r\n                    <div className={classes.headerCell} style={{width: WIDTHS[0]}}>{this.getFilterSelectRole()}</div>\r\n                    <div className={classes.headerCell} style={{width: WIDTHS[1]}}>{this.getFilterSelectRoom()}</div>\r\n                    <div className={classes.headerCell} style={{width: WIDTHS[2]}}>{this.getFilterSelectFunction()}</div>\r\n                    <div className={classes.headerCell} style={{width: WIDTHS[3]}}>{I18n.t('Value')}</div>\r\n                </div>\r\n                <div className={classes.tableDiv}>\r\n                <TreeDataTable\r\n                    ref={this.treeTableRef}\r\n                    key=\"table\"\r\n                    data={this.root.children}\r\n                    height={'100%'}\r\n                    selected={this.state.selected}\r\n                    classNameSelected={classes.selected}\r\n                    classNamePartlyVisible={classes.partlyVisible}\r\n                    className={classes.treeTable}\r\n                    classNameRow={classes.treeTableRow}\r\n                    onRowClick={(data, metadata, toggleChildren, isDoubleClick) => isDoubleClick ?\r\n                        this.onDoubleClick(data, metadata, toggleChildren) :\r\n                        this.onSelect(data.id)}\r\n                >\r\n                    <TreeDataTable.Column grow={0} renderCell={this.renderIndexColumn.bind(this)} className={classes.cellDivId} width={idWidth} />\r\n                    <TreeDataTable.Column grow={1} renderCell={this.renderColumnName.bind(this)}  className={classes.cellDiv} width={width}/>\r\n                    <TreeDataTable.Column grow={1} renderCell={this.renderColumnRole.bind(this)}  className={classes.cellDiv} width={WIDTHS[0]}/>\r\n                    <TreeDataTable.Column grow={1} renderCell={this.renderColumnRoom.bind(this)}  className={classes.cellDiv} width={WIDTHS[1]}/>\r\n                    <TreeDataTable.Column grow={1} renderCell={this.renderColumnFunc.bind(this)}  className={classes.cellDiv} width={WIDTHS[2]}/>\r\n                    <TreeDataTable.Column grow={1} renderCell={this.renderColumnValue.bind(this)} className={classes.cellDiv} width={WIDTHS[3]}/>\r\n                </TreeDataTable></div>\r\n            </div>);\r\n        }\r\n    }\r\n}\r\n\r\nSelectID.propTypes = {\r\n    classes: PropTypes.object,\r\n    statesOnly: PropTypes.bool,\r\n    selected: PropTypes.string,\r\n    onSelect: PropTypes.func,\r\n    connection: PropTypes.object,\r\n    prefix: PropTypes.string\r\n};\r\n\r\nexport default withStyles(styles)(SelectID);\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from '@material-ui/core/Button';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Dialog from '@material-ui/core/Dialog';\r\n\r\nimport I18n from '../i18n';\r\nimport SelectID from '../Components/SelectID';\r\nimport {withStyles} from '@material-ui/core/styles/index';\r\n\r\nconst styles = theme => ({\r\n    headerID: {\r\n        fontWeight: 'bold',\r\n        fontStyle: 'italic'\r\n    },\r\n    dialog: {\r\n        height: '95%'\r\n    },\r\n    content: {\r\n        height: '100%',\r\n        overflow: 'hidden'\r\n    }\r\n});\r\n\r\nclass DialogSelectID extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state =  {\r\n            selected: this.props.selected || '',\r\n            name:     ''\r\n        };\r\n    }\r\n\r\n    handleCancel() {\r\n        this.props.onClose();\r\n    };\r\n\r\n    handleOk() {\r\n        this.props.onOk(this.state.selected, this.state.name);\r\n        this.props.onClose();\r\n    };\r\n\r\n    render() {\r\n        let title;\r\n        if (this.state.name || this.state.selected) {\r\n            title = [(<span key=\"selected\">{I18n.t('Selected')} </span>), (<span key=\"id\" className={this.props.classes.headerID}>{\r\n                (this.state.name || this.state.selected) + (this.state.name ? ' [' + this.state.selected + ']' : '')\r\n            }</span>)];\r\n        } else {\r\n            title = this.props.title || I18n.t('Please select object ID...');\r\n        }\r\n\r\n        return (\r\n            <Dialog\r\n                disableBackdropClick\r\n                maxWidth={false}\r\n                disableEscapeKeyDown\r\n                classes={{paper: this.props.classes.dialog}}\r\n                fullWidth={true}\r\n                open={true}\r\n                aria-labelledby=\"selectid-dialog-title\"\r\n            >\r\n                <DialogTitle id=\"selectid-dialog-title\">{title}</DialogTitle>\r\n                <DialogContent className={this.props.classes.content}>\r\n                    <SelectID\r\n                        prefix={this.props.prefix}\r\n                        statesOnly={this.props.statesOnly}\r\n                        style={{width: '100%', height: '100%'}}\r\n                        connection={this.props.connection}\r\n                        selected={this.state.selected}\r\n                        name={this.state.name}\r\n                        onSelect={(selected, name, isDouble) => {\r\n                            selected !== this.state.selected && this.setState({selected, name});\r\n                            isDouble && this.handleOk();\r\n                        }}\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => this.handleOk()} disabled={!this.state.selected} color=\"primary\">{this.props.ok || I18n.t('Ok')}</Button>\r\n                    <Button onClick={() => this.handleCancel()} color=\"primary\">{this.props.cancel || I18n.t('Cancel')}</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nDialogSelectID.propTypes = {\r\n    classes: PropTypes.object,\r\n    onClose: PropTypes.func,\r\n    onOk: PropTypes.func.isRequire,\r\n    title: PropTypes.string,\r\n    selected: PropTypes.string,\r\n    statesOnly: PropTypes.boolean,\r\n    connection: PropTypes.object.isRequire,\r\n    cancel: PropTypes.string,\r\n    prefix: PropTypes.string,\r\n    ok: PropTypes.string\r\n\r\n};\r\n\r\nexport default withStyles(styles)(DialogSelectID);\r\n","/**\n * Given a cronspec, return the human-readable string.\n * @param {string} cronspec\n * @param withSeconds\n * @param {Object=} locale\n */\nfunction cronToText(cronspec, withSeconds, locale) {\n\n\n    // Constant array to convert valid names to values\n    const NAMES = {\n        JAN: 1, FEB: 2, MAR: 3, APR: 4, MAY: 5, JUN: 6, JUL: 7, AUG: 8,\n        SEP: 9, OCT: 10, NOV: 11, DEC: 12,\n        SUN: 1, MON: 2, TUE: 3, WED: 4, THU: 5, FRI: 6, SAT: 7\n    };\n\n    // Parsable replacements for common expressions\n    const REPLACEMENTS = {\n        '* * * * * *': '0/1 * * * * *',\n        '@YEARLY': '0 0 1 1 *',\n        '@ANNUALLY': '0 0 1 1 *',\n        '@MONTHLY': '0 0 1 * *',\n        '@WEEKLY': '0 0 * * 0',\n        '@DAILY': '0 0 * * *',\n        '@HOURLY': '0 * * * *'\n    };\n\n    // Contains the index, min, and max for each of the constraints\n    const FIELDS = {\n        s: [0, 0, 59], // seconds\n        m: [1, 0, 59], // minutes\n        h: [2, 0, 23], // hours\n        D: [3, 1, 31], // day of month\n        M: [4, 1, 12], // month\n        Y: [6, 1970, 2099], // year\n        d: [5, 1, 7, 1] // day of week\n    };\n\n    /**\n     * Returns the value + offset if value is a number, otherwise it\n     * attempts to look up the value in the NAMES table and returns\n     * that result instead.\n     *\n     * @param {Number,String} value: The value that should be parsed\n     * @param {Number=} offset: Any offset that must be added to the value\n     * @param {Number=} max\n     * @returns {Number|null}\n     */\n    function getValue(value) {\n        const offset = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];\n        const max = arguments.length <= 2 || arguments[2] === undefined ? 9999 : arguments[2];\n\n        return isNaN(value) ? NAMES[value] || null : Math.min(+value + offset, max);\n    }\n\n    /**\n     * Returns a deep clone of a schedule skipping any day of week\n     * constraints.\n     *\n     * @param {Object} sched: The schedule that will be cloned\n     * @returns {Object}\n     */\n    function cloneSchedule(sched) {\n        const clone = {};\n        let field;\n\n        for (field in sched) {\n            if (field !== 'dc' && field !== 'd') {\n                clone[field] = sched[field].slice(0);\n            }\n        }\n\n        return clone;\n    }\n\n    /**\n     * Adds values to the specified constraint in the current schedule.\n     *\n     * @param {Object} sched: The schedule to add the constraint to\n     * @param {String} name: Name of constraint to add\n     * @param {Number} min: Minimum value for this constraint\n     * @param {Number} max: Maximum value for this constraint\n     */\n    function add(sched, name, min, max) {\n        const inc = arguments.length <= 4 || arguments[4] === undefined ? 0 : arguments[4];\n\n        let i = min;\n\n        if (!sched[name]) {\n            sched[name] = [];\n        }\n\n        while (i <= max) {\n            if (sched[name].indexOf(i) < 0) {\n                sched[name].push(i);\n            }\n            i += inc || 1;\n        }\n\n        sched[name].sort(function (a, b) {\n            return a - b;\n        });\n    }\n\n    /**\n     * Adds a hash item (of the form x#y or xL) to the schedule.\n     *\n     * @param {Object} schedules: The current schedule array to add to\n     * @param {Object} curSched: The current schedule to add to\n     * @param {Number} value: The value to add (x of x#y or xL)\n     * @param {Number} hash: The hash value to add (y of x#y)\n     */\n    function addHash(schedules, curSched, value, hash) {\n        // if there are any existing day of week constraints that\n        // aren't equal to the one we're adding, create a new\n        // composite schedule\n        if ((curSched.d && !curSched.dc) || (curSched.dc && curSched.dc.indexOf(hash) < 0)) {\n            schedules.push(cloneSchedule(curSched));\n            curSched = schedules[schedules.length - 1];\n        }\n\n        add(curSched, 'd', value, value);\n        add(curSched, 'dc', hash, hash);\n    }\n\n    /**\n     *\n     * @param {Object} s: The existing set of schedules\n     * @param {Object} curSched: The current schedule to add to\n     * @param {Number} value\n     */\n    function addWeekday(s, curSched, value) {\n        const except1 = {},\n            except2 = {};\n        if (value === 1) {\n            // cron doesn't pass month boundaries, so if 1st is a\n            // weekend then we need to use 2nd or 3rd instead\n            add(curSched, 'D', 1, 3);\n            add(curSched, 'd', NAMES.MON, NAMES.FRI);\n            add(except1, 'D', 2, 2);\n            add(except1, 'd', NAMES.TUE, NAMES.FRI);\n            add(except2, 'D', 3, 3);\n            add(except2, 'd', NAMES.TUE, NAMES.FRI);\n        } else {\n            // normally you want the closest day, so if v is a\n            // Saturday, use the previous Friday.  If it's a\n            // sunday, use the following Monday.\n            add(curSched, 'D', value - 1, value + 1);\n            add(curSched, 'd', NAMES.MON, NAMES.FRI);\n            add(except1, 'D', value - 1, value - 1);\n            add(except1, 'd', NAMES.MON, NAMES.THU);\n            add(except2, 'D', value + 1, value + 1);\n            add(except2, 'd', NAMES.TUE, NAMES.FRI);\n        }\n        s.exceptions.push(except1);\n        s.exceptions.push(except2);\n    }\n\n    /**\n     * Adds a range item (of the form x-y/z) to the schedule.\n     *\n     * @param {String} item: The cron expression item to add\n     * @param {Object} curSched: The current schedule to add to\n     * @param {String} name: The name to use for this constraint\n     * @param {Number} min: The min value for the constraint\n     * @param {Number} max: The max value for the constraint\n     * @param {Number} offset: The offset to apply to the cron value\n     */\n    function addRange(item, curSched, name, min, max, offset) {\n        // parse range/x\n        const incSplit = item.split('/'),\n            inc = +incSplit[1],\n            range = incSplit[0];\n\n        // parse x-y or * or 0\n        if (range !== '*' && range !== '0') {\n            const rangeSplit = range.split('-');\n            min = getValue(rangeSplit[0], offset, max);\n\n            // fix for issue #13, range may be single digit\n            max = getValue(rangeSplit[1], offset, max) || max;\n        }\n\n        add(curSched, name, min, max, inc);\n    }\n\n    /**\n     * Parses a particular item within a cron expression.\n     *\n     * @param {String} item: The cron expression item to parse\n     * @param {Object} s: The existing set of schedules\n     * @param {String} name: The name to use for this constraint\n     * @param {Number} min: The min value for the constraint\n     * @param {Number} max: The max value for the constraint\n     * @param {Number} offset: The offset to apply to the cron value\n     */\n    function parse(item, s, name, min, max, offset) {\n        let value,\n            split,\n            schedules = s.schedules,\n            curSched = schedules[schedules.length - 1];\n\n        // L just means min - 1 (this also makes it work for any field)\n        if (item === 'L') {\n            item = (min - 1).toString(10);\n        }\n\n        // parse x\n        if ((value = getValue(item, offset, max)) !== null) {\n            add(curSched, name, value, value);\n        }\n        // parse xW\n        else if ((value = getValue(item.replace('W', ''), offset, max)) !== null) {\n            addWeekday(s, curSched, value);\n        }\n        // parse xL\n        else if ((value = getValue(item.replace('L', ''), offset, max)) !== null) {\n            addHash(schedules, curSched, value, min - 1);\n        }\n        // parse x#y\n        else if ((split = item.split('#')).length === 2) {\n            value = getValue(split[0], offset, max);\n            addHash(schedules, curSched, value, getValue(split[1]));\n        }\n        // parse x-y or x-y/z or */z or 0/z\n        else {\n            addRange(item, curSched, name, min, max, offset);\n        }\n    }\n\n    /**\n     * Returns true if the item is either of the form x#y or xL.\n     *\n     * @param {String} item: The expression item to check\n     */\n    function isHash(item) {\n        return item.indexOf('#') > -1 || item.indexOf('L') > 0;\n    }\n\n    function itemSorter(a, b) {\n        return isHash(a) && !isHash(b) ? 1 : a - b;\n    }\n\n    /**\n     * Parses each of the fields in a cron expression.  The expression must\n     * include the seconds field, the year field is optional.\n     *\n     * @param {String} expr: The cron expression to parse\n     */\n    function parseExpr(expr) {\n        const schedule = { schedules: [{}], exceptions: [] };\n        const components = expr.replace(/(\\s)+/g, ' ').split(' ');\n        let field;\n        let f;\n        let component;\n        let items;\n\n        for (field in FIELDS) {\n            f = FIELDS[field];\n            component = components[f[0]];\n            if (component && component !== '*' && component !== '?') {\n                // need to sort so that any #'s come last, otherwise\n                // schedule clones to handle # won't contain all of the\n                // other constraints\n                items = component.split(',').sort(itemSorter);\n                let i;\n                const length = items.length;\n                for (i = 0; i < length; i++) {\n                    parse(items[i], schedule, field, f[1], f[2], f[3]);\n                }\n            }\n        }\n\n        return schedule;\n    }\n\n    /**\n     * Make cron expression parsable.\n     *\n     * @param {String} expr: The cron expression to prepare\n     */\n    function prepareExpr(expr) {\n        const prepared = expr.toUpperCase();\n        return REPLACEMENTS[prepared] || prepared;\n    }\n\n    function parseCron(expr, hasSeconds) {\n        const e = prepareExpr(expr);\n        return parseExpr(hasSeconds ? e : '0 ' + e);\n    }\n\n    const schedule = parseCron(cronspec, withSeconds);\n\n    function absFloor(number) {\n        if (number < 0) {\n            return Math.ceil(number);\n        } else {\n            return Math.floor(number);\n        }\n    }\n\n    function toInt(argumentForCoercion) {\n        const coercedNumber = +argumentForCoercion;\n        let value = 0;\n\n        if (coercedNumber !== 0 && isFinite(coercedNumber)) {\n            value = absFloor(coercedNumber);\n        }\n\n        return value;\n    }\n\n    function ordinal(number) {\n        const b = number % 10,\n            output = (toInt(number % 100 / 10) === 1) ? locale.ORDINALS.th :\n                (b === 1) ? locale.ORDINALS.st :\n                    (b === 2) ? locale.ORDINALS.nd :\n                        (b === 3) ? locale.ORDINALS.rd : locale.ORDINALS.th;\n        return number + output;\n    }\n\n    /**\n     * For an array of numbers, e.g. a list of hours in a schedule,\n     * return a string listing out all of the values (complete with\n     * \"and\" plus ordinal text on the last item).\n     * @param {Number[]} numbers\n     * @returns {string}\n     */\n    function numberList(numbers) {\n        if (numbers.length < 2) {\n            return ordinal(numbers);\n        }\n\n        const lastVal = numbers.pop();\n        return numbers.join(', ') + ' ' + locale['and'] + ' ' + ordinal(lastVal);\n    }\n\n    /**\n     * Parse a number into day of week, or a month name;\n     * used in dateList below.\n     * @param {Number|String} value\n     * @param {String} type\n     * @returns {String}\n     */\n    function numberToDateName(value, type) {\n        if (type === 'dow') {\n            return locale.DOW[value - 1];\n        } else if (type === 'mon') {\n            return locale.MONTH[value - 1];\n        }\n    }\n\n    /**\n     * From an array of numbers corresponding to dates (given in type: either\n     * days of the week, or months), return a string listing all the values.\n     * @param {Number[]} numbers\n     * @param {String} type\n     * @returns {String}\n     */\n    function dateList(numbers, type) {\n        if (numbers.length < 2) {\n            return numberToDateName('' + numbers[0], type);\n        }\n\n        const lastVal = '' + numbers.pop();\n        let outputText = '';\n\n        for (let i = 0, value; (value = numbers[i]); i++) {\n            if (outputText.length > 0) {\n                outputText += ', ';\n            }\n            outputText += numberToDateName(value, type);\n        }\n        return outputText + ' ' + locale['and'] + ' ' + numberToDateName(lastVal, type);\n    }\n\n    /**\n     * Pad to equivalent of sprintf('%02d').\n     * @param {Number} x\n     * @returns {string}\n     */\n    function zeroPad(x) {\n        return (x < 10) ? '0' + x : x;\n    }\n\n    //----------------\n\n    /**\n     * Given a schedule, generate a friendly sentence description.\n     * @param {Object} schedule\n     * @param {boolean} withSeconds\n     * @returns {string}\n     */\n    function scheduleToSentence(schedule, withSeconds) {\n        let outputText = locale.Every + ' ';\n\n        if (schedule['h'] && schedule['m'] && schedule['h'].length <= 2 && schedule['m'].length <= 2 && withSeconds && schedule['s'] && schedule['s'].length <= 2 ) {\n            // If there are only one or two specified values for\n            // hour or minute, print them in HH:MM:SS format\n\n            const hm = [];\n            for (let i = 0; i < schedule['h'].length; i++) {\n                for (let j = 0; j < schedule['m'].length; j++) {\n                    for (let k = 0; k < schedule['s'].length; k++) {\n                        hm.push(zeroPad(schedule['h'][i]) + ':' + zeroPad(schedule['m'][j]) + ':' + zeroPad(schedule['s'][k]));\n                    }\n                }\n            }\n            if (hm.length < 2) {\n                outputText = locale['At'] + ' ' + hm[0];\n            } else {\n                const lastVal = hm.pop();\n                outputText = locale['At'] + ' ' + hm.join(', ') + ' ' + locale.and + ' ' + lastVal;\n            }\n            if (!schedule['d'] && !schedule['D']) {\n                outputText += ' ' + locale['every day'] + ' ';\n            }\n        } else\n        if (schedule['h'] && schedule['m'] && schedule['h'].length <= 2 && schedule['m'].length <= 2) {\n            // If there are only one or two specified values for\n            // hour or minute, print them in HH:MM format\n\n            const hm = [];\n            for (let i = 0; i < schedule['h'].length; i++) {\n                for (let j = 0; j < schedule['m'].length; j++) {\n                    hm.push(zeroPad(schedule['h'][i]) + ':' + zeroPad(schedule['m'][j]));\n                }\n            }\n            if (hm.length < 2) {\n                outputText = locale['At'] + ' ' + hm[0];\n            } else {\n                const lastVal = hm.pop();\n                outputText = locale['At'] + ' ' + hm.join(', ') + ' ' + locale.and + ' ' + lastVal;\n            }\n\n            if (!schedule['d'] && !schedule['D']) {\n                outputText += ' ' + locale['every day'] + ' ';\n            }\n        } else {\n            // Otherwise, list out every specified hour/minute value.\n\n            if (schedule['h']) { // runs only at specific hours\n                if (schedule['m']) { // and only at specific minutes\n                    if (withSeconds) {\n                        if (!schedule['s'] || schedule['s'].length === 60) {\n                            outputText += locale['second of every'] + ' ' + numberList(schedule['m']) + ' ' + locale['minute past the'] + ' ' + numberList(schedule['h']) + ' ' + locale['hour'];\n                        } else {\n                            outputText += numberList(schedule['s']) + ' ' + locale['second of every'] + ' ' +numberList(schedule['m']) + ' ' + locale['minute past the'] + ' ' + numberList(schedule['h']) + ' ' + locale['hour'];\n                        }\n                    } else {\n                        outputText += numberList(schedule['m']) + ' ' + locale['minute past the'] + ' ' + numberList(schedule['h']) + ' ' + locale['hour'];\n                    }\n                } else { // specific hours, but every minute\n                    if (withSeconds) {\n                        if (!schedule['s'] || schedule['s'].length === 60) {\n                            outputText += locale['second of every'] + ' ' + locale['minute of'] + ' ' + numberList(schedule['h']) + ' ' + locale['hour'];\n                        } else {\n                            outputText += numberList(schedule['s']) + ' ' + locale['second of every'] + ' ' + locale['minute of'] + ' ' + numberList(schedule['h']) + ' ' + locale['hour'];\n                        }\n                    } else {\n                        outputText += locale['minute of'] + ' ' + numberList(schedule['h']) + ' ' + locale['hour'];\n                    }\n                }\n            } else if (schedule['m']) { // every hour, but specific minutes\n                if (withSeconds) {\n                    if (!schedule['s'] || schedule['s'].length === 60) {\n                        outputText += locale['second of every'] + ' ' + numberList(schedule['m']) + ' ' + locale['minute every hour'];\n                    } else {\n                        outputText += numberList(schedule['s']) + ' ' + locale['second of every'] + ' ' + numberList(schedule['m']) + ' ' + locale['minute every hour'];\n                    }\n                } else {\n                    outputText += numberList(schedule['m']) + ' ' + locale['minute every hour'];\n                }\n            } else if (withSeconds) {\n                if (!schedule['s'] || schedule['s'].length === 60) {\n                    outputText += locale['second'];\n                } else {\n                    outputText += numberList(schedule['s']) + ' ' + locale['second'];\n                }\n            } else { // cronspec has \"*\" for both hour and minute\n                outputText += locale['minute'];\n            }\n        }\n\n        if (schedule['D']) { // runs only on specific day(s) of month\n            outputText += (locale['on the'] ? ' ' + locale['on the'] + ' ' : ' ') + numberList(schedule['D']);\n            if (!schedule['M']) {\n                outputText += ' ' + locale['of every month'];\n            }\n        }\n\n        if (schedule['d']) { // runs only on specific day(s) of week\n            if (schedule['D']) {\n                // if both day fields are specified, cron uses both; superuser.com/a/348372\n                outputText += ' ' + locale['and every'] + ' ';\n            } else {\n                outputText += ' ' + locale['on'] + ' ';\n            }\n            outputText += dateList(schedule['d'], 'dow');\n        }\n\n        if (schedule['M']) {\n            // runs only in specific months; put this output last\n            outputText += ' ' + locale['in'] + ' ' + dateList(schedule['M'], 'mon');\n        }\n\n        return outputText;\n    }\n\n    return scheduleToSentence(schedule.schedules[0], withSeconds);\n}\n\nexport default cronToText;\n","var JQUERY_CRON_LOCALE = {};\n\nJQUERY_CRON_LOCALE.en = {\n    ORDINALS: {\n        th: 'th',\n        st: 'st',\n        nd: 'nd',\n        rd: 'rd'\n    },\n    MONTH: [\n        'Jan',\n        'Feb',\n        'Mar',\n        'Apr',\n        'May',\n        'Jun',\n        'Jul',\n        'Aug',\n        'Sep',\n        'Oct',\n        'Nov',\n        'Dec'\n    ],\n    DOW: [\n        'Sun',\n        'Mon',\n        'Tue',\n        'Wed',\n        'Thu',\n        'Fri',\n        'Sat'\n    ],\n    'Every':            'Every', // start of expression\n    'and':              'and', // 1, 2, 3 and 15th\n    'every day':        'every day',\n    'minute past the':  'minute past the',\n    'hour':             'hour',\n    'minute':           'minute',\n    'minute of':        'minute of',\n    'second':           'second',\n    'second in minute': 'second in minute',\n    'second of every':  'second of every',\n    'minute every hour': 'minute every hour',\n    'on the':           'on the',\n    'of every month':   'of every month',\n    'and every':        'and every',\n    'At':               'At',\n    'on':               'on', // on sun, mon\n    'in':               'in' // in jan, apr\n};\n\nJQUERY_CRON_LOCALE.de = {\n    ORDINALS: {\n        th: '',\n        st: '',\n        nd: '',\n        rd: ''\n    },\n    MONTH: [\n        'Januar',\n        'Februar',\n        'März',\n        'April',\n        'Mai',\n        'Juni',\n        'Juli',\n        'August',\n        'September',\n        'Oktober',\n        'November',\n        'Dezember'\n    ],\n    DOW: [\n        'Sonntag',\n        'Montag',\n        'Dienstag',\n        'Mittwoch',\n        'Donnerstag',\n        'Freitag',\n        'Samstag'\n    ],\n    'Every':            'Jede(r)', // start of expression\n    'and':              'und', // 1, 2, 3 and 15th\n    'every day':        'jeden Tag',\n    'minute past the':  'Minuten nach',\n    'hour':             'Stunde',\n    'minute':           'Minute',\n    'minute of':        'Minuten von',\n    'second':           'Sekunde',\n    'second in minute': 'Sekunde in der Minute',\n    'second of every':  'Sekunde in',\n    'minute every hour': 'Minute jede Stunde',\n    'on the':           'am',\n    'of every month':   'im jeden Monat',\n    'and every':        'und am jeden',\n    'At':               'Um',\n    'on':               'am', // on sun, mon\n    'in':               'im' // in jan, apr\n};\n\nJQUERY_CRON_LOCALE.ru = {\n    ORDINALS: {\n        th: '',\n        st: '',\n        nd: '',\n        rd: ''\n    },\n    MONTH: [\n        'Январе',\n        'Феврале',\n        'Марте',\n        'Апреле',\n        'Майе',\n        'Июне',\n        'Июле',\n        'Августе',\n        'Сентябре',\n        'Октябре',\n        'Ноябре',\n        'Декабре'\n    ],\n    DOW: [\n        'воскресение',\n        'понедельник',\n        'вторник',\n        'среду',\n        'четверг',\n        'пятницу',\n        'субботу'\n    ],\n    'Every':            'Каждую(ый)', // start of expression\n    'and':              'и', // 1, 2, 3 and 15th\n    'every day':        'каждый день',\n    'minute past the':  'минуту в',\n    'hour':             'часа(ов)',\n    'minute':           'минуту',\n    'minute of':        'минут(у) в',\n    'second':           'секунду',\n    'second in minute': 'секунду в минуте',\n    'second of every':  'секунду каждой(го)',\n    'minute every hour': 'минуту каждый час',\n    'on the':           '',\n    'of every month':   'числа каждого месяца',\n    'and every':        'и каждый',\n    'At':               'В',\n    'on':               'в', // on sun, mon\n    'in':               'в' // in jan, apr\n};\n\nJQUERY_CRON_LOCALE.fr = {\n    ORDINALS: {\n        th: 'th',\n        st: 'st',\n        nd: 'nd',\n        rd: 'rd'\n    },\n    MONTH: [\n        'Fév',\n        'Mar',\n        'Avr',\n        'Mai',\n        'Jun',\n        'Juil',\n        'Aug',\n        'Sep',\n        'Oct',\n        'Nov',\n        'Déc'\n\n    ],\n    DOW: [\n        'Dim',\n        'Lun',\n        'Mar',\n        'Mer',\n        'Jeu',\n        'Ven',\n        'Sam'\n\n    ],\n    'Every':            'Chaque',\n    'and':              'et',\n    'every day':        'tous les jours',\n    'minute past the':  'minute après le',\n    'hour':             'heure',\n    'minute':           'minute',\n    'minute of':        'minute de',\n    'second':           'seconde',\n    'second in minute': 'seconde en minute',\n    'second of every':  'deuxième de tous',\n    'minute every hour':'minute toutes les heures',\n    'on the':           'sur le',\n    'of every month':   'de chaque mois',\n    'and every':        'et tous',\n    'At':               'À',\n    'on':               'sur',\n    'in':               'dans'\n};\n\nJQUERY_CRON_LOCALE.it = {\n    ORDINALS: {\n        th: '',\n        st: '',\n        nd: '',\n        rd: ''\n    },\n    MONTH: [\n        'Jan',\n        'Feb',\n        'Mar',\n        'Apr',\n        'Pot',\n        'Giu',\n        'Lug',\n        'Aug',\n        'Sep',\n        'Oct',\n        'Nov',\n        'Dic'\n    ],\n    DOW: [\n        'Dom',\n        'Mon',\n        'Mar',\n        'Mer',\n        'Gio',\n        'Ve',\n        'Sat'\n    ],\n    'Every':             'Ogni',\n    'and':               'e',\n    'every day':         'ogni giorno',\n    'minute past the':   'minuto dopo',\n    'hour':              'ora',\n    'minute':            'Minuto',\n    'minute of':         'minuto di',\n    'second':            'secondo',\n    'second in minute':  \"secondo in minuto\",\n    'second of every':   'secondo di ogni',\n    'minute every hour': 'minuto ogni ora',\n    'on the':            'sul',\n    'of every month':    'di ogni mese',\n    'and every':         'e ogni',\n    'At':                'A',\n    'on':                'sopra',\n    'in':                'in'\n};\n\nJQUERY_CRON_LOCALE.pt = {\n    ORDINALS: {\n        th: '',\n        st: '',\n        nd: '',\n        rd: ''\n    },\n    MONTH: [\n        'Jan',\n        'Feb',\n        'Mar',\n        'Abr',\n        'Pod',\n        'Jun',\n        'Jul',\n        'Ago',\n        'Sep',\n        'Oct',\n        'Nov',\n        'Dec'\n    ],\n    DOW: [\n        'Dom',\n        'Seg',\n        'Ter',\n        'Qua',\n        'Qui',\n        'Sex',\n        'Sen'\n    ],\n    'Every':                'Cada',\n    'and':                  'e',\n    'every day':            'todo dia',\n    'minute past the':      'minuto após o',\n    'hour':                 'hora',\n    'minute':               'minuto',\n    'minute of':            'minuto de',\n    'second':               'segundo',\n    'second in minute':     'segundo em minuto',\n    'second of every':      'segundo de cada',\n    'minute every hour':    'minuto a cada hora',\n    'on the':               'no',\n    'of every month':       'de todos os meses',\n    'and every':            'e todos',\n    'At':                   'At',\n    'on':                   'em',\n    'in':                   'dentro'\n};\n\nJQUERY_CRON_LOCALE.es = {\n    ORDINALS: {\n        th: '',\n        st: '',\n        nd: '',\n        rd: ''\n    },\n    MONTH: [\n        'Ene',\n        'Feb',\n        'Mar',\n        'Abr',\n        'Mayo',\n        'Jun',\n        'Jul',\n        'Ago',\n        'Sep',\n        'Oct',\n        'Nov',\n        'Dic'\n    ],\n    DOW: [\n        'Sol',\n        'Lun',\n        'Mar',\n        'Mie',\n        'Jue',\n        'Vie',\n        'Sab'\n    ],\n    'Every':                'Cada',\n    'and':                  'y',\n    'every day':            'cada día',\n    'minute past the':      'minuto pasado el',\n    'hour':                 'hora',\n    'minute':               'minuto',\n    'minute of':            'minuto de',\n    'second':               'segundo',\n    'second in minute':     'segundo en minuto',\n    'second of every':      'segundo de cada',\n    'minute every hour':    'minuto cada hora',\n    'on the':               'sobre el',\n    'of every month':       'de cada mes',\n    'and every':            'y cada',\n    'At':                   'A',\n    'on':                   'en',\n    'in':                   'en'\n};\n\nJQUERY_CRON_LOCALE.nl = {\n    ORDINALS: {\n        th: '',\n        st: '',\n        nd: '',\n        rd: ''\n    },\n    MONTH: [\n        'Jan',\n        'Feb',\n        'Mar',\n        'Apr',\n        'Mei',\n        'Jun',\n        'Jul',\n        'Aug',\n        'Sep',\n        'Okt',\n        'Nov',\n        'Dec'\n    ],\n    DOW: [\n        'Zon',\n        'Mon',\n        'Di',\n        'Wo',\n        'Don',\n        'Vrij',\n        'Za'\n    ],\n    'Every':                'Elke',\n    'and':                  'en',\n    'every day':            'elke dag',\n    'minute past the':      'minuut voorbij de',\n    'hour':                 'uur',\n    'minute':               'minuut',\n    'minute of':            'minuut van',\n    'second':               'tweede',\n    'second in minute':     'tweede in minuut',\n    'second of every':      'tweede van alles',\n    'minute every hour':    'minuut elk uur',\n    'on the':               'op de',\n    'of every month':       'van elke maand',\n    'and every':            'en elke',\n    'At':                   'Op',\n    'on':                   'op',\n    'in':                   'in'\n};\n\nexport default JQUERY_CRON_LOCALE;","import cronToText from './cron2text';\r\nimport JQUERY_CRON_LOCALE from './jquery.cron.locale';\r\n\r\nfunction correctCasus(text, seconds) {\r\n    text = text.replace('Каждую(ый) минуту',    'Каждую минуту');\r\n    text = text.replace('Каждую(ый) минут(у)',  'Каждую минуту');\r\n    text = text.replace('Каждую(ый) час',       'Каждый час');\r\n    text = text.replace('Каждую(ый) секунду',   'Каждую секунду');\r\n    text = text.replace(/ (\\d{1,2}) числа/,     ' $1го числа');\r\n\r\n    text = text.replace(/ (\\d{1,2}) в Январе/,  ' $1го числа в Январе');\r\n    text = text.replace(/ (\\d{1,2}) в Феврале/, ' $1го числа в Феврале');\r\n    text = text.replace(/ (\\d{1,2}) в Марте/,   ' $1го числа в Марте');\r\n    text = text.replace(/ (\\d{1,2}) в Апреле/,  ' $1го числа в Апреле');\r\n    text = text.replace(/ (\\d{1,2}) в Майе/,    ' $1го числа в Майе');\r\n    text = text.replace(/ (\\d{1,2}) в Июне/,    ' $1го числа в Июне');\r\n    text = text.replace(/ (\\d{1,2}) в Июле/,    ' $1го числа в Июле');\r\n    text = text.replace(/ (\\d{1,2}) в Августе/,  ' $1го числа в Августе');\r\n    text = text.replace(/ (\\d{1,2}) в Сентябре/,  ' $1го числа в Сентябре');\r\n    text = text.replace(/ (\\d{1,2}) в Октябре/,  ' $1го числа в Октябре');\r\n    text = text.replace(/ (\\d{1,2}) в Ноябре/,  ' $1го числа в Ноябре');\r\n    text = text.replace(/ (\\d{1,2}) в Декабре/,  ' $1го числа в Декабре');\r\n\r\n    text = text.replace('Каждую(ый) 0 минуту',   'Каждые ноль минут');\r\n    text = text.replace(/Каждую\\(ый\\) ([\\d\\sи,]+) минуту/, 'Каждую $1 минуту');\r\n\r\n    text = text.replace(/каждой\\(го\\) ([\\d\\sи,]+) минуту/, 'каждой $1 минуты');\r\n    text = text.replace('каждой(го) минут(у)',  'каждой минуты');\r\n\r\n    text = text.replace(' 0 часа(ов)',           ' 0 часов');\r\n    text = text.replace(' 1 часа(ов)',           ' 1 час');\r\n    text = text.replace(' 2 часа(ов)',           ' 2 часа');\r\n    text = text.replace(' 3 часа(ов)',           ' 3 часа');\r\n    text = text.replace(' 4 часа(ов)',           ' 4 часа');\r\n    text = text.replace(/ (\\d{1,2}) часа\\(ов\\)/, ' $1 часов');\r\n\r\n    text = text.replace('Jede(r) Sekunde',      'Jede Sekunde');\r\n    text = text.replace(/Jede\\(r\\) ([\\d\\sund,]+) Sekunde/, 'Jede $1 Sekunde');\r\n    text = text.replace('Jede(r) Minute',       'Jede Minute');\r\n    text = text.replace('Jede Minuten',         'Jede Minute');\r\n    text = text.replace('Jede Stunde',          'Jede Stunde');\r\n    text = text.replace('Jede(r) Stunde',       'Jede Stunde');\r\n    text = text.replace(/Jede\\(r\\) ([\\d\\sund,]+) Minute/, 'Jede $1 Minute');\r\n    text = text.replace('Jede Sekunde in Minuten', 'Jede Sekunde in jeder Minute');\r\n\r\n    return text;\r\n}\r\n\r\nfunction convertCronToText(cron, lang) {\r\n    const withSeconds = cron.split(' ').length === 6;\r\n    let text = cronToText(cron, withSeconds, JQUERY_CRON_LOCALE[lang]);\r\n    return correctCasus(text, withSeconds);\r\n}\r\n\r\nexport default convertCronToText;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Select from '@material-ui/core/Select';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport I18n from '../i18n';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport convertCronToText from './simple-cron/cronText';\r\n\r\nconst styles = theme => ({\r\n    mainDiv: {\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'auto'\r\n    },\r\n    periodSelect: {\r\n        //margin: '0 10px 60px 10px',\r\n        display: 'block',\r\n        width: 200\r\n    },\r\n    slider: {\r\n        marginTop: 20,\r\n        display: 'block',\r\n        width: '100%'\r\n    },\r\n    tabContent: {\r\n        padding: 20\r\n    },\r\n    numberButton: {\r\n        padding: 4,\r\n        minWidth: 40,\r\n        margin: 5\r\n    },\r\n    numberButtonBreak: {\r\n        display: 'block'\r\n    },\r\n    appBar: {\r\n        color: 'white'\r\n    }\r\n});\r\n\r\nconst WEEKDAYS = [\r\n    'Sunday',\r\n    'Monday',\r\n    'Tuesday',\r\n    'Wednesday',\r\n    'Thursday',\r\n    'Friday',\r\n    'Saturday',\r\n    'Sunday',\r\n];\r\nconst MONTHS = [\r\n    'January',\r\n    'February',\r\n    'March',\r\n    'April',\r\n    'May',\r\n    'June',\r\n    'July',\r\n    'August',\r\n    'September',\r\n    'October',\r\n    'November',\r\n    'December'\r\n];\r\n\r\n// 5-7,9-11 => [5,6,7,9,10,11]\r\nfunction convertMinusIntoArray(value, max) {\r\n    let result = [];\r\n    if (value === '*') {\r\n        if (max === 24 || max === 60 || max === 7) {\r\n            for (let i = 0; i < max; i++) {\r\n                result.push(i);\r\n            }\r\n        } else {\r\n            for (let i = 1; i <= max; i++) {\r\n                result.push(i);\r\n            }\r\n        }\r\n        return result; // array with entries max\r\n    }\r\n    const parts = (value || '').toString().split(',');\r\n    for (let p = 0; p < parts.length; p++) {\r\n        if (! parts[p].trim().length) continue;\r\n        const items = parts[p].trim().split('-');\r\n        if (items.length > 1) {\r\n            let iMax = parseInt(items[1], 10);\r\n            for (let i = parseInt(items[0], 10); i <= iMax; i++) {\r\n                result.push(i);\r\n            }\r\n        } else {\r\n            result.push(parseInt(parts[p], 10));\r\n        }\r\n    }\r\n    result = result.map(a => parseInt(a, 10));\r\n\r\n    result.sort();\r\n\r\n\r\n    // remove double entries\r\n    for (let p = result.length - 1; p >= 0; p--) {\r\n        if (result[p] === result[p + 1]) {\r\n            result.splice(p + 1, 1);\r\n        }\r\n    }\r\n\r\n\r\n    return result;\r\n}\r\n\r\n// [5,6,7,9,10,11] => 5-7,9-11\r\nfunction convertArrayIntoMinus(value, max) {\r\n    if (typeof value !== 'object') {\r\n        value = [value];\r\n    }\r\n    if (value.length === max) {\r\n        return '*';\r\n    }\r\n    const newParts = [];\r\n    if (!value.length) {\r\n        return '-';\r\n    }\r\n    value = value.map(a => parseInt(a, 10));\r\n\r\n    value.sort((a, b) => a -b);\r\n\r\n    let start = value[0];\r\n    let end = value[0];\r\n    for (let p = 1; p < value.length; p++) {\r\n        if (value[p] - 1 !== parseInt(value[p - 1], 10)) {\r\n            if (start === end) {\r\n                newParts.push(start)\r\n            } else if (end - 1 === start) {\r\n                newParts.push(start + ',' + end);\r\n            } else {\r\n                newParts.push(start + '-' + end);\r\n            }\r\n            start = value[p];\r\n            end = value[p];\r\n        } else {\r\n            end = value[p];\r\n        }\r\n    }\r\n\r\n    if (start === end) {\r\n        newParts.push(start)\r\n    } else if (end - 1 === start) {\r\n        newParts.push(start + ',' + end);\r\n    } else {\r\n        newParts.push(start + '-' + end);\r\n    }\r\n\r\n    return newParts.join(',');\r\n}\r\n\r\nclass ComplexCron extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let cron = (typeof this.props.cronExpression === 'string') ? this.props.cronExpression.replace(/^[\"']/, '').replace(/[\"']\\n?$/, '') : '';\r\n        if (cron[0] === '{') {\r\n            cron = '';\r\n        }\r\n        const state = ComplexCron.cron2state(cron || '* * * * *');\r\n\r\n        this.state = {\r\n            extended: false,\r\n            tab: state.seconds !== false ? 1 : 0,\r\n            cron: ComplexCron.state2cron(state),\r\n            modes: {\r\n                seconds: null,\r\n                minutes: null,\r\n                hours: null,\r\n                dates: null,\r\n                months: null,\r\n                dows: null\r\n            }\r\n        };\r\n        Object.assign(this.state, state);\r\n        if (this.state.cron !== this.props.cronExpression) {\r\n            setTimeout(() => this.props.onChange && this.props.onChange(this.state.cron), 100);\r\n        }\r\n    }\r\n\r\n    static cron2state(cron) {\r\n        cron = cron.replace(/['\"]/g, '').trim();\r\n        const cronParts = cron.split(' ').map(p => p.trim());\r\n        const options = {};\r\n\r\n        if (cronParts.length === 6) {\r\n            options.seconds = cronParts[0] || '*';\r\n            options.minutes = cronParts[1] || '*';\r\n            options.hours = cronParts[2] || '*';\r\n            options.dates = cronParts[3] || '*';\r\n            options.months = cronParts[4] || '*';\r\n            options.dows = cronParts[5] || '*';\r\n        } else {\r\n            options.seconds = false;\r\n            options.minutes = cronParts[0] || '*';\r\n            options.hours = cronParts[1] || '*';\r\n            options.dates = cronParts[2] || '*';\r\n            options.months = cronParts[3] || '*';\r\n            options.dows = cronParts[4] || '*';\r\n        }\r\n        return options;\r\n    }\r\n    static state2cron(state) {\r\n        let text = `${state.minutes} ${state.hours} ${state.dates} ${state.months} ${state.dows}`;\r\n        if (state.seconds !== false) {\r\n            text = state.seconds + ' ' + text;\r\n        }\r\n        return text;\r\n    }\r\n\r\n    recalcCron() {\r\n        let cron = ComplexCron.state2cron(this.state);\r\n        if (cron !== this.state.cron) {\r\n            this.setState({cron}, () => {\r\n                this.props.onChange && this.props.onChange(this.state.cron);\r\n            });\r\n        }\r\n    }\r\n\r\n    onChange(cron) {\r\n        if (cron !== this.state.cron) {\r\n            this.setState({cron});\r\n            this.props.onChange && this.props.onChange(cron);\r\n        }\r\n    }\r\n\r\n    onToggle(i, type, max) {\r\n        if (i === true) {\r\n            this.setState({[type]: '*'}, () => this.recalcCron());\r\n        } else if (i === false) {\r\n            if (max === 60 || max === 24) {\r\n                this.setState({[type]: '0'}, () => this.recalcCron());\r\n            } else {\r\n                this.setState({[type]: '1'}, () => this.recalcCron());\r\n            }\r\n        } else {\r\n            let nums = convertMinusIntoArray(this.state[type], max);\r\n            const pos = nums.indexOf(i);\r\n            if (pos !== -1) {\r\n                nums.splice(pos, 1);\r\n            } else {\r\n                nums.push(i);\r\n                nums.sort();\r\n            }\r\n            this.setState({[type]: convertArrayIntoMinus(nums, max)}, () => this.recalcCron());\r\n        }\r\n    }\r\n\r\n    getDigitsSelector(type, max) {\r\n        let values = [];\r\n        if (max === 7) {\r\n            values = [1,2,3,4,5,6,0];\r\n        } else if (max === 60 || max === 24) {\r\n            for (let i = 0; i < max; i++) {\r\n                values.push(i);\r\n            }\r\n        } else {\r\n            for (let i = 1; i <= max; i++) {\r\n                values.push(i);\r\n            }\r\n        }\r\n        const parts = convertMinusIntoArray(this.state[type], max);\r\n        return [\r\n            (<Button\r\n                key=\"removeall\"\r\n                variant={'outlined'}\r\n                className={this.props.classes.numberButton}\r\n                //style={{paddingBottom: 20}}\r\n                color={'primary'}\r\n                onClick={() => this.onToggle(false, type, max)}>{I18n.t('Deselect all')}</Button>),\r\n            (<Button\r\n                key=\"addall\"\r\n                variant={'contained'}\r\n                //style={{paddingBottom: 20}}\r\n                className={this.props.classes.numberButton}\r\n                color={'secondary'}\r\n                onClick={() => this.onToggle(true, type, max)}>{I18n.t('Select all')}</Button>),\r\n            (<div key=\"all\">\r\n                {values.map(i =>\r\n                    [((max === 7 && i === 4) ||\r\n                    (max === 12 && i === 7) ||\r\n                    (max === 31 && !((i - 1) % 10)) ||\r\n                    (max === 60 && i && !(i % 10)) ||\r\n                    (max === 24 && i && !(i % 6))) ?\r\n                    (<div key={'allInner' + i} style={{width: '100%'}}/>) : null,\r\n                        (<Button\r\n                            key={'_' + i}\r\n                            variant={parts.indexOf(i) !== -1 ? 'contained' : 'outlined'}\r\n                            className={this.props.classes.numberButton}\r\n                            color={parts.indexOf(i) !== -1 ? 'secondary' : 'primary'}\r\n                            onClick={() => this.onToggle(i, type, max)}>{max === 7 ? I18n.t(WEEKDAYS[i]) : (max === 12 ? MONTHS[i - 1] : i)}</Button>\r\n                    )])}\r\n                    </div>)];\r\n    }\r\n\r\n    getPeriodsTab(type, max) {\r\n        let value = this.state[type];\r\n        let every = value === '*';\r\n        let everyN = value.toString().indexOf('/') !== -1;\r\n        let select;\r\n        if (this.state.modes[type] === null) {\r\n            select = every ? 'every' : (everyN ? 'everyN' : 'specific');\r\n            const modes = JSON.parse(JSON.stringify(this.state.modes));\r\n            modes[type] = select;\r\n            return setTimeout(() => this.setState({modes}, () => this.recalcCron()), 100);\r\n        } else {\r\n            every = this.state.modes[type] === 'every';\r\n            everyN = this.state.modes[type] === 'everyN';\r\n            select = this.state.modes[type];\r\n        }\r\n\r\n        if (everyN) {\r\n            value = parseInt(value.replace('*/', ''), 10) || 1;\r\n        }\r\n\r\n        return (<div>\r\n            <Select\r\n                className={this.props.classes.periodSelect}\r\n                style={{verticalAlign: 'bottom'}}\r\n                value={select}\r\n                onChange={e => {\r\n                    const modes = JSON.parse(JSON.stringify(this.state.modes));\r\n                    modes[type] = e.target.value;\r\n                    if (e.target.value === 'every') {\r\n                        this.setState({[type]: '*', modes}, () => this.recalcCron());\r\n                    } else if (e.target.value === 'everyN') {\r\n                        const num = parseInt(this.state[type].toString().replace('*/', ''), 10) || 1;\r\n                        this.setState({[type]: '*/' + num, modes}, () => this.recalcCron());\r\n                    } else if (e.target.value === 'specific') {\r\n                        let num = parseInt(this.state[type].split(',')[0], 10) || 0;\r\n                        console.log(num);\r\n                        if (!num && (type === 'months' || type === 'dates')) {\r\n                            num = 1;\r\n                        }\r\n                        this.setState({[type]: convertArrayIntoMinus(num, max), modes}, () => this.recalcCron());\r\n                    }\r\n                }}>\r\n                <MenuItem key='every' value='every'>{I18n.t('sc_every_' + type)}</MenuItem>\r\n                <MenuItem key='everyN' value='everyN'>{I18n.t('sc_everyN_' + type)}</MenuItem>\r\n                <MenuItem key='specific' value='specific'>{I18n.t('sc_specific_' + type)}</MenuItem>\r\n            </Select>\r\n            {everyN && false && (<span>{value}</span>)}\r\n            {everyN && (<TextField\r\n                key=\"interval\"\r\n                label={I18n.t('sc_' + type)}\r\n                value={value}\r\n                min={1}\r\n                max={max}\r\n                onChange={e => {\r\n                    this.setState({[type]: '*/' + e.target.value}, () => this.recalcCron());\r\n                }}\r\n                InputLabelProps={{shrink: true,}}\r\n                type=\"number\"\r\n                margin=\"normal\"\r\n            />)}\r\n            {!every && !everyN && this.getDigitsSelector(type, max)}\r\n        </div>);\r\n    }\r\n\r\n    convertCronToText(cron, lang) {\r\n        if (cron.split(' ').indexOf('-') !== -1) {\r\n            return I18n.t('Invalid CRON');\r\n        } else {\r\n            return convertCronToText(cron, lang);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const tab = this.state.seconds !== false ? this.state.tab : this.state.tab + 1;\r\n        return (\r\n            <div className={this.props.classes.mainDiv}>\r\n                <div style={{paddingLeft: 8, width: '100%'}}><TextField style={{width: '100%'}} value={this.state.cron} disabled={true}/></div>\r\n                <div style={{paddingLeft: 8, width: '100%', height: 60}}>{this.convertCronToText(this.state.cron, this.props.language || 'en')}</div>\r\n                <FormControlLabel\r\n                    control={<Checkbox checked={this.state.seconds}\r\n                                       onChange={e => this.setState({seconds: e.target.checked ? '*' : false}, () => this.recalcCron())}/>}\r\n                    label={I18n.t('use seconds')}\r\n                />\r\n                <AppBar position=\"static\" classes={{root: this.props.classes.appBar}} color=\"secondary\">\r\n                    <Tabs value={this.state.tab} className={this.props.classes.appBar} color=\"secondary\" onChange={(active, tab) =>\r\n                        this.setState({tab})}>\r\n                        {this.state.seconds !== false && <Tab id=\"sc_seconds\" label={I18n.t('sc_seconds')}/>}\r\n                        <Tab  id=\"minutes\" label={I18n.t('sc_minutes')}/>\r\n                        <Tab  id=\"hours\" label={I18n.t('sc_hours')}/>\r\n                        <Tab  id=\"dates\" label={I18n.t('sc_dates')}/>\r\n                        <Tab  id=\"months\" label={I18n.t('sc_months')}/>\r\n                        <Tab  id=\"dows\" label={I18n.t('sc_dows')}/>\r\n                    </Tabs>\r\n                </AppBar>\r\n                {tab === 0 && (<div className={this.props.classes.tabContent}>{this.getPeriodsTab('seconds', 60)}</div>)}\r\n                {tab === 1 && (<div className={this.props.classes.tabContent}>{this.getPeriodsTab('minutes', 60)}</div>)}\r\n                {tab === 2 && (<div className={this.props.classes.tabContent}>{this.getPeriodsTab('hours', 24)}</div>)}\r\n                {tab === 3 && (<div className={this.props.classes.tabContent}>{this.getPeriodsTab('dates', 31)}</div>)}\r\n                {tab === 4 && (<div className={this.props.classes.tabContent}>{this.getPeriodsTab('months', 12)}</div>)}\r\n                {tab === 5 && (<div className={this.props.classes.tabContent}>{this.getPeriodsTab('dows', 7)}</div>)}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nComplexCron.propTypes = {\r\n    cronExpression: PropTypes.string,\r\n    onChange: PropTypes.func,\r\n    language: PropTypes.string,\r\n};\r\n\r\nexport default withStyles(styles)(ComplexCron);\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport convertCronToText from './cronText';\r\n\r\nimport I18n from '../../i18n';\r\n\r\nconst styles = theme => ({\r\n    mainDiv: {\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'auto'\r\n    },\r\n    formControl: {\r\n        margin: 0,\r\n        minWidth: 120,\r\n    },\r\n});\r\n\r\nconst PERIODIC = {\r\n    once: 'once',\r\n    interval: 'interval',\r\n    intervalBetween: 'intervalBetween',\r\n    specific: 'specific'\r\n};\r\nconst PERIODIC_TYPES = {\r\n    seconds: 'seconds',\r\n    minutes: 'minutes',\r\n    //hours: 'hours',\r\n};\r\nconst WEEKDAYS = [\r\n    'Sunday',\r\n    'Monday',\r\n    'Tuesday',\r\n    'Wednesday',\r\n    'Thursday',\r\n    'Friday',\r\n    'Saturday',\r\n    'Sunday',\r\n];\r\n\r\nfunction padding(num) {\r\n    if (num < 10) return '0' + num;\r\n    return '' + num;\r\n}\r\nconst DEFAULT_STATE = {\r\n    mode: PERIODIC.interval,\r\n    interval: {\r\n        period: 1,\r\n        unit: PERIODIC_TYPES.minutes\r\n    }\r\n};\r\n\r\nclass SimpleCron extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let cron = (typeof this.props.cronExpression === 'string') ? this.props.cronExpression.replace(/^[\"']/, '').replace(/[\"']\\n?$/, '') : '';\r\n        if (cron[0] === '{') {\r\n            cron = '';\r\n        }\r\n        const state = SimpleCron.cron2state(cron || '* * * * *') || DEFAULT_STATE;\r\n\r\n        this.state = {\r\n            extended: false,\r\n            cron: SimpleCron.state2cron(state),\r\n            mode: 'interval',\r\n            once: {\r\n                time: '00:00',\r\n                date: ''\r\n            },\r\n            interval: {\r\n                period: 1,\r\n                unit: PERIODIC_TYPES.minutes\r\n            },\r\n            intervalBetween: {\r\n                period: 1,\r\n                unit: PERIODIC_TYPES.minutes,\r\n                timeFrom: 0,\r\n                timeTo: 24,\r\n                weekdays: [0, 1, 2, 3, 4, 5, 6]\r\n            },\r\n            specific: {\r\n                time: '00:00',\r\n                weekdays: [0, 1, 2, 3, 4, 5, 6]\r\n            }\r\n        };\r\n        Object.assign(this.state, state);\r\n\r\n        if (this.state.cron !== this.props.cronExpression) {\r\n            setTimeout(() => this.props.onChange && this.props.onChange(this.state.cron), 100);\r\n        }\r\n    }\r\n\r\n    static periodArray2text(list, max) {\r\n        max = max || 7;\r\n        if (list.length === max) {\r\n            return '*'\r\n        } else {\r\n            let text = [];\r\n            let start = null;\r\n            let end = null;\r\n            for (let i = 0; i < list.length; i++) {\r\n                if (start === null) {\r\n                    start = list[i];\r\n                    end = list[i];\r\n                } else if (list[i - 1] + 1 === list[i]) {\r\n                    end = list[i];\r\n                } else {\r\n                    if (start !== end) {\r\n                        text.push(start + '-' + end);\r\n                    } else {\r\n                        text.push(start);\r\n                    }\r\n                    start = list[i];\r\n                    end = list[i];\r\n                }\r\n            }\r\n            if (start !== end) {\r\n                text.push(start + '-' + end);\r\n            } else {\r\n                text.push(start);\r\n            }\r\n            return text.join(',');\r\n        }\r\n    }\r\n\r\n    static text2weekdays(text) {\r\n        if (text === '*') {\r\n            return [0,1,2,3,4,5,6];\r\n        }\r\n        const parts = text.split(',');\r\n        const list = [];\r\n        parts.forEach(part => {\r\n            const _parts = part.split('-');\r\n            if (_parts.length === 2) {\r\n                const start = parseInt(_parts[0], 10);\r\n                const end = parseInt(_parts[1], 10);\r\n                for (let day = start; day <= end; day++) {\r\n                    if (list.indexOf(day === 7 ? 0 : day) === -1) {\r\n                        list.push(day === 7 ? 0 : day);\r\n                    }\r\n                }\r\n            } else {\r\n                if (part === '7') {\r\n                    part = 0;\r\n                }\r\n                part = parseInt(part, 10);\r\n                if (list.indexOf(part) === -1) {\r\n                    list.push(part);\r\n                }\r\n            }\r\n        });\r\n        list.sort();\r\n        return list;\r\n    }\r\n\r\n    static cron2state(cron) {\r\n        cron = cron.replace(/['\"]/g, '').trim();\r\n        const cronParts = cron.split(' ');\r\n        const options = {};\r\n        const state = {\r\n            mode: ''\r\n        };\r\n        if (cronParts.length === 6) {\r\n            options.seconds = cronParts[0] || '*';\r\n            options.minutes = cronParts[1] || '*';\r\n            options.hours = cronParts[2] || '*';\r\n            options.date = cronParts[3] || '*';\r\n            options.months = cronParts[4] || '*';\r\n            options.dow = cronParts[5] || '*';\r\n        } else {\r\n            options.seconds = null;\r\n            options.minutes = cronParts[0] || '*';\r\n            options.hours = cronParts[1] || '*';\r\n            options.date = cronParts[2] || '*';\r\n            options.months = cronParts[3] || '*';\r\n            options.dow = cronParts[4] || '*';\r\n        }\r\n\r\n        // * * * * *\r\n        if (options.seconds === null &&\r\n            options.minutes === '*' &&\r\n            options.hours === '*' &&\r\n            options.date === '*' &&\r\n            options.months === '*') {\r\n            state.mode = PERIODIC.interval;\r\n            state.interval = {\r\n                period: 1,\r\n                unit: PERIODIC_TYPES.minutes\r\n            };\r\n        } // * * * * * *\r\n        if (options.seconds === '*' &&\r\n            options.minutes === '*' &&\r\n            options.hours === '*' &&\r\n            options.date === '*' &&\r\n            options.months === '*') {\r\n            state.mode = PERIODIC.interval;\r\n            state.interval = {\r\n                period: 1,\r\n                unit: PERIODIC_TYPES.seconds\r\n            };\r\n        } else// */n * * * *\r\n        if (options.seconds === null &&\r\n            options.minutes.indexOf('/') !== -1 &&\r\n            options.hours === '*' &&\r\n            options.date === '*' &&\r\n            options.months === '*') {\r\n            state.mode = PERIODIC.interval;\r\n            state.interval = {\r\n                period: parseInt(options.minutes.split('/')[1], 10),\r\n                unit: PERIODIC_TYPES.minutes\r\n            };\r\n        } else\r\n        // */n * * * * *\r\n        if (options.seconds !== null && options.seconds.indexOf('/') !== -1 &&\r\n            options.minutes === '*' &&\r\n            options.hours === '*' &&\r\n            options.date === '*' &&\r\n            options.months === '*') {\r\n            state.mode = PERIODIC.interval;\r\n            state.interval = {\r\n                period: parseInt(options.seconds.split('/')[1], 10),\r\n                unit: PERIODIC_TYPES.seconds\r\n            };\r\n        } else\r\n        // */n * 1-24 * * 1-7 or  */n * 1-24 * * *\r\n        if (options.seconds !== null && options.seconds.indexOf('/') !== -1 &&\r\n            options.minutes === '*' &&\r\n            options.hours.indexOf('-') !== -1 &&\r\n            options.date === '*' &&\r\n            options.months === '*') {\r\n            state.mode = PERIODIC.intervalBetween;\r\n            state.intervalBetween = {\r\n                period: parseInt(options.seconds.split('/')[1], 10),\r\n                unit: PERIODIC_TYPES.seconds,\r\n                timeFrom: parseInt(options.hours.split('-')[0], 10),\r\n                timeTo: parseInt(options.hours.split('-')[1], 10),\r\n                weekdays: SimpleCron.text2weekdays(options.dow)\r\n            };\r\n        } else\r\n        // */n 1-24 * * 1-7 or  */n 1-24 * * *\r\n        if (options.seconds === null &&\r\n            options.minutes.indexOf('/') !== -1 &&\r\n            options.hours.indexOf('-') !== -1 &&\r\n            options.date === '*' &&\r\n            options.months === '*') {\r\n            state.mode = PERIODIC.intervalBetween;\r\n            state.intervalBetween = {\r\n                period: parseInt(options.minutes.split('/')[1], 10),\r\n                unit: PERIODIC_TYPES.minutes,\r\n                timeFrom: parseInt(options.hours.split('-')[0], 10),\r\n                timeTo: parseInt(options.hours.split('-')[1], 10),\r\n                weekdays: SimpleCron.text2weekdays(options.dow)\r\n            };\r\n        } else\r\n        // m h * * 1-7 or m h * * *\r\n        if (options.seconds === null &&\r\n            parseInt(options.minutes, 10).toString() === options.minutes &&\r\n            parseInt(options.hours, 10).toString() === options.hours &&\r\n            options.date === '*' &&\r\n            options.months === '*') {\r\n            state.mode = PERIODIC.specific;\r\n            state.intervalBetween = {\r\n                time: padding(parseInt(options.minutes, 10)) + ':' + padding(parseInt(options.hours, 10)),\r\n                weekdays: SimpleCron.text2weekdays(options.dow)\r\n            };\r\n        } else\r\n        // m h d M *\r\n        if (options.seconds === null &&\r\n            parseInt(options.minutes, 10).toString() === options.minutes &&\r\n            parseInt(options.hours, 10).toString() === options.hours &&\r\n            parseInt(options.date, 10).toString() === options.date &&\r\n            parseInt(options.months, 10).toString() === options.months &&\r\n            options.dow === '*') {\r\n            state.mode = PERIODIC.once;\r\n            state.intervalBetween = {\r\n                time: padding(parseInt(options.minutes, 10)) + ':' + padding(parseInt(options.hours, 10)),\r\n                date: padding(parseInt(options.date, 10)) + '.' + padding(parseInt(options.months, 10)),\r\n                weekdays: SimpleCron.text2weekdays(options.dow)\r\n            };\r\n        }\r\n\r\n        if (state.mode) {\r\n            return state;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    static state2cron(state) {\r\n        let cron = '* * * * *';\r\n        if (state.mode === PERIODIC.interval) {\r\n            const settings = state.interval || {};\r\n            if (settings.period > 60) settings.period = 60;\r\n            if (settings.period < 1) settings.period = 1;\r\n\r\n            if (settings.minutes > 60) settings.minutes = 60;\r\n            if (settings.minutes < 1) settings.minutes = 1;\r\n\r\n            if (settings.hours > 24) settings.hours = 24;\r\n            if (settings.hours < 1) settings.hours = 1;\r\n\r\n            if (state.extended) {\r\n                cron = `${settings.minutes > 1 ? '*/' + settings.minutes : '*'} ${settings.hours > 1 ? '*/' + settings.hours : '*'} * * *`;\r\n            } else {\r\n                switch (settings.unit) {\r\n                    case PERIODIC_TYPES.seconds:\r\n                        cron = `${settings.period > 1 ? '*/' + settings.period : '*'} * * * * *`;\r\n                        break;\r\n                    case PERIODIC_TYPES.minutes:\r\n                        cron = `${settings.period > 1 ? '*/' + settings.period : '*'} * * * *`;\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n        } else if (state.mode === PERIODIC.intervalBetween) {\r\n            const settings = state.intervalBetween || {};\r\n            let hours;\r\n            settings.timeFrom = settings.timeFrom || 0;\r\n            settings.timeTo = settings.timeTo === undefined ? 24 : settings.timeTo;\r\n            if (settings.timeFrom === 0 && settings.timeTo === 24) {\r\n                hours = '*'\r\n            } else {\r\n                hours = settings.timeFrom !== settings.timeTo ? settings.timeFrom + '-' + settings.timeTo : '*';\r\n            }\r\n            if (settings.period > 60) settings.period = 60;\r\n            if (settings.period < 1) settings.period = 1;\r\n            settings.unit = settings.unit || PERIODIC_TYPES.minutes;\r\n            switch (settings.unit) {\r\n                case PERIODIC_TYPES.seconds:\r\n                    cron = `${settings.period > 1 ? '*/' + settings.period : '*'} * ${hours} * * ${this.periodArray2text(settings.weekdays)}`;\r\n                    break;\r\n                case PERIODIC_TYPES.minutes:\r\n                    cron = `${settings.period > 1 ? '*/' + settings.period : '*'} ${hours} * * ${this.periodArray2text(settings.weekdays)}`;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        } else if (state.mode === PERIODIC.specific) {\r\n            const settings = state.specific || {};\r\n            const parts = (settings.time || '00:00').split(':');\r\n            let minutes = parseInt(parts[1], 10) || 0;\r\n            if (minutes > 59) minutes = 59;\r\n            if (minutes < 0) minutes = 0;\r\n            let hours = parseInt(parts[0], 10) || 0;\r\n            if (hours > 23) hours = 59;\r\n            if (hours < 0) hours = 0;\r\n\r\n            cron = `${minutes} ${hours} * * ${this.periodArray2text(settings.weekdays || [])}`;\r\n        } else if (state.mode === PERIODIC.once) {\r\n            const settings = state.once || {};\r\n            if (!settings.date) {\r\n                settings.date = new Date().getDate() + '.' + padding(new Date().getMonth() + 1);\r\n            }\r\n            const parts = (settings.time || '00:00').split(':');\r\n            const partsDate = settings.date.split('.');\r\n            let minutes = parseInt(parts[1], 10) || 0;\r\n            if (minutes > 59) minutes = 59;\r\n            if (minutes < 0) minutes = 0;\r\n            let hours = parseInt(parts[0], 10) || 0;\r\n            if (hours > 23) hours = 59;\r\n            if (hours < 0) hours = 0;\r\n            let date = parseInt(partsDate[0], 10) || 1;\r\n            if (date > 31) date = 31;\r\n            if (date < 1) hours = 1;\r\n            let month = parseInt(partsDate[1], 10) || 1;\r\n            if (month > 12) month = 12;\r\n            if (month < 1) month = 1;\r\n\r\n            cron = `${minutes} ${hours} ${date} ${month} *`;\r\n        }\r\n        return cron;\r\n    }\r\n\r\n    recalcCron() {\r\n        this.onChange(SimpleCron.state2cron(this.state));\r\n    }\r\n\r\n    getControlsWeekdaysElements(type) {\r\n        const settings = this.state[type];\r\n        return (<div key=\"weekdays\" style={{paddingLeft: 8, width: '100%', maxWidth: 600}}>\r\n            <h5>{I18n.t('On weekdays')}</h5>\r\n            {[1,2,3,4,5,6,0].map(day => (\r\n                <FormControlLabel\r\n                    key={WEEKDAYS[day]}\r\n                    control={\r\n                        <Checkbox\r\n                            checked={settings.weekdays.indexOf(day) !== -1}\r\n                            onChange={e => {\r\n                                const settings = JSON.parse(JSON.stringify(this.state[type]));\r\n                                const pos = settings.weekdays.indexOf(day);\r\n                                e.target.checked && pos === -1 && settings.weekdays.push(day);\r\n                                !e.target.checked && pos !== -1 && settings.weekdays.splice(pos, 1);\r\n                                settings.weekdays.sort();\r\n                                this.setState({[type]: settings}, () => this.recalcCron());\r\n                            }}\r\n                            value={day.toString()}\r\n                        />\r\n                    }\r\n                    label={I18n.t(WEEKDAYS[day])}\r\n                />))\r\n            }</div>);\r\n    }\r\n\r\n    getControlsPeriodElements(type) {\r\n        const settings = this.state[type];\r\n\r\n        if (this.state.extended) {\r\n            return (<div key=\"period\" style={{paddingLeft: 8, display: 'inline-block'}}>\r\n                <h5 style={{marginBottom: 5}}>{I18n.t('sc_period')}</h5>\r\n                <TextField\r\n                    style={{marginTop: 0, marginBottom: 0, verticalAlign: 'bottom'}}\r\n                    key=\"value\"\r\n                    label={I18n.t('sc_minutes')}\r\n                    value={settings.minutes}\r\n                    onChange={e => {\r\n                        const settings = JSON.parse(JSON.stringify(this.state[type]));\r\n                        settings.minutes = parseInt(e.target.value, 10);\r\n                        this.setState({[type]: settings}, () => this.recalcCron());\r\n                    }}\r\n                    min={1}\r\n                    max={60}\r\n                    type=\"number\"\r\n                    InputLabelProps={{shrink: true,}}\r\n                    margin=\"normal\"\r\n                />\r\n                <TextField\r\n                    style={{marginTop: 0, marginBottom: 0, verticalAlign: 'bottom'}}\r\n                    key=\"value\"\r\n                    label={I18n.t('sc_hours')}\r\n                    value={settings.hours}\r\n                    onChange={e => {\r\n                        const settings = JSON.parse(JSON.stringify(this.state[type]));\r\n                        settings.hours = parseInt(e.target.value, 10);\r\n                        this.setState({[type]: settings}, () => this.recalcCron());\r\n                    }}\r\n                    min={1}\r\n                    max={24}\r\n                    type=\"number\"\r\n                    InputLabelProps={{shrink: true,}}\r\n                    margin=\"normal\"\r\n                />\r\n            </div>);\r\n        } else {\r\n            return (<div key=\"period\" style={{paddingLeft: 8, display: 'inline-block'}}>\r\n                <h5 style={{marginBottom: 5}}>{I18n.t('sc_period')}</h5>\r\n                <TextField\r\n                    style={{marginTop: 0, marginBottom: 0, verticalAlign: 'bottom'}}\r\n                    key=\"value\"\r\n                    label={I18n.t('sc_every')}\r\n                    value={settings.period}\r\n                    onChange={e => {\r\n                        const settings = JSON.parse(JSON.stringify(this.state[type]));\r\n                        settings.period = parseInt(e.target.value, 10);\r\n                        this.setState({[type]: settings}, () => this.recalcCron());\r\n                    }}\r\n                    min={1}\r\n                    max={60}\r\n                    type=\"number\"\r\n                    InputLabelProps={{shrink: true,}}\r\n                    margin=\"normal\"\r\n                /><Select\r\n                style={{verticalAlign: 'bottom'}}\r\n                value={settings.unit}\r\n                onChange={e => {\r\n                    const settings = JSON.parse(JSON.stringify(this.state[type]));\r\n                    settings.unit = e.target.value;\r\n                    this.setState({[type]: settings}, () => this.recalcCron());\r\n                }}>\r\n                {Object.keys(PERIODIC_TYPES).map(mode => (<MenuItem key={PERIODIC_TYPES[mode]} value={PERIODIC_TYPES[mode]}>{I18n.t('sc_' + PERIODIC_TYPES[mode])}</MenuItem>))}\r\n            </Select></div>);\r\n        }\r\n\r\n    }\r\n\r\n    getControlsTime(type) {\r\n        const settings = this.state[type];\r\n        return (<FormControl className={this.props.classes.formControl}>\r\n            <TextField\r\n                key=\"at\"\r\n                label={I18n.t('sc_time')}\r\n                value={settings.time}\r\n                onChange={e => {\r\n                    const settings = JSON.parse(JSON.stringify(this.state[type]));\r\n                    settings.time = e.target.value;\r\n                    this.setState({[type]: settings}, () => this.recalcCron());\r\n                }}\r\n                InputLabelProps={{shrink: true,}}\r\n                margin=\"normal\"\r\n            />\r\n        </FormControl>);\r\n    }\r\n\r\n    getControlsDate(type) {\r\n        const settings = this.state[type];\r\n\r\n        if (!settings.date) {\r\n            const d = new Date();\r\n            settings.date = d.getDate() + '.'  + padding(d.getMonth() + 1);\r\n        }\r\n\r\n        //<InputLabel htmlFor=\"formatted-text-mask-input\">{I18n.t('sc_at')}</InputLabel>\r\n        return (<FormControl className={this.props.classes.formControl}>\r\n            <TextField\r\n                key=\"date\"\r\n                label={I18n.t('sc_date')}\r\n                value={settings.date}\r\n                onChange={e => {\r\n                    const settings = JSON.parse(JSON.stringify(this.state[type]));\r\n                    settings.date = e.target.value;\r\n                    this.setState({[type]: settings}, () => this.recalcCron());\r\n                }}\r\n                InputLabelProps={{shrink: true,}}\r\n                margin=\"normal\"\r\n            />\r\n        </FormControl>);\r\n    }\r\n\r\n    getOnceElements() {\r\n        return (<div style={{marginLeft: 8}}>\r\n            {this.getControlsTime('once')}\r\n            {this.getControlsDate('once')}\r\n            </div>);\r\n    }\r\n\r\n    getIntervalElements() {\r\n        return this.getControlsPeriodElements('interval');\r\n    }\r\n\r\n    getIntervalBetweenElements() {\r\n        const settings = this.state.intervalBetween;\r\n        return [\r\n            this.getControlsPeriodElements('intervalBetween'),\r\n            (<div key=\"between\" style={{paddingLeft: 8, display: 'inline-block', verticalAlign: 'top'}}>\r\n                <h5 style={{marginBottom: 5}}>{I18n.t('sc_hours')}</h5>\r\n                <FormControl className={this.props.classes.formControl}>\r\n                    <InputLabel shrink htmlFor=\"age-label-placeholder\">{I18n.t('sc_from')}</InputLabel>\r\n                    <Select\r\n                    style={{width: 100}}\r\n                    value={settings.timeFrom}\r\n                    onChange={e => {\r\n                        const settings = JSON.parse(JSON.stringify(this.state.intervalBetween));\r\n                        settings.timeFrom = parseInt(e.target.value, 10);\r\n                        this.setState({intervalBetween: settings}, () => this.recalcCron());\r\n                    }}>\r\n                    {[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23].map(hour => (<MenuItem key={'B_' + hour} value={hour}>{padding(hour) + ':00'}</MenuItem>))}\r\n                </Select>\r\n                </FormControl>\r\n                <FormControl className={this.props.classes.formControl}>\r\n                    <InputLabel shrink htmlFor=\"age-label-placeholder\">{I18n.t('sc_to')}</InputLabel>\r\n                    <Select\r\n                        style={{width: 100}}\r\n                        value={settings.timeTo}\r\n                        onChange={e => {\r\n                            const settings = JSON.parse(JSON.stringify(this.state.intervalBetween));\r\n                            settings.timeTo = parseInt(e.target.value, 10);\r\n                            this.setState({intervalBetween: settings}, () => this.recalcCron());\r\n                        }}>\r\n                        {[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24].map(hour => (<MenuItem key={'A_' + hour} value={hour}>{padding(hour) + ':00'}</MenuItem>))}\r\n                    </Select>\r\n                </FormControl>\r\n            </div>),\r\n            this.getControlsWeekdaysElements('intervalBetween')\r\n        ];\r\n    }\r\n\r\n    getSpecificTimeElements() {\r\n        return [\r\n            (<div key=\"time\" style={{marginLeft: 8}}>{this.getControlsTime('specific')}</div>),\r\n            this.getControlsWeekdaysElements('specific')\r\n        ]\r\n    }\r\n\r\n    onModeChange(mode) {\r\n        if (mode !== this.state.mode) {\r\n            this.setState({mode}, () => this.recalcCron());\r\n        }\r\n    }\r\n\r\n    onChange(cron) {\r\n        if (cron !== this.state.cron) {\r\n            this.setState({cron});\r\n            this.props.onChange && this.props.onChange(cron);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={this.props.classes.mainDiv}>\r\n                <div style={{paddingLeft: 8, width: '100%'}}><TextField style={{width: '100%'}} value={this.state.cron} disabled={true}/></div>\r\n                <div style={{paddingLeft: 8, width: '100%', height: 60}}>{convertCronToText(this.state.cron, this.props.language || 'en')}</div>\r\n                <div><FormControl style={{marginLeft: 8, marginTop: 8}} className={this.props.classes.formControl}>\r\n                    <InputLabel>{I18n.t('Repeat')}</InputLabel>\r\n                    <Select\r\n                        value={this.state.mode}\r\n                        onChange={e => this.onModeChange(e.target.value)}\r\n                        inputProps={{name: 'mode', id: 'mode',}}>\r\n                        {Object.keys(PERIODIC).map(mode => (<MenuItem key={PERIODIC[mode]} value={PERIODIC[mode]}>{I18n.t('sc_' + PERIODIC[mode])}</MenuItem>))}\r\n                    </Select>\r\n                </FormControl></div>\r\n                {this.state.mode === PERIODIC.once && this.getOnceElements()}\r\n                {this.state.mode === PERIODIC.interval && this.getIntervalElements()}\r\n                {this.state.mode === PERIODIC.intervalBetween && this.getIntervalBetweenElements()}\r\n                {this.state.mode === PERIODIC.specific && this.getSpecificTimeElements()}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nSimpleCron.propTypes = {\r\n    cronExpression: PropTypes.string,\r\n    onChange: PropTypes.func,\r\n    language: PropTypes.string,\r\n};\r\n\r\nexport default withStyles(styles)(SimpleCron);\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport Input from '@material-ui/core/Input';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport MaskedInput from 'react-text-mask';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Select from '@material-ui/core/Select';\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nimport I18n from '../i18n';\r\n\r\nconst styles = theme => ({\r\n    hr: {\r\n        border: 0,\r\n        borderTop: '1px solid gray'\r\n    },\r\n    scrollWindow: {\r\n        width: '100%',\r\n        overflow: 'auto',\r\n        height: 'calc(100% - 22px)'\r\n    },\r\n    rowDiv: {\r\n        width: '100%',\r\n    },\r\n    modeDiv: {\r\n        width: 200,\r\n        display: 'inline-block',\r\n        verticalAlign: 'top'\r\n    },\r\n    settingsDiv: {\r\n        display: 'inline-block',\r\n        verticalAlign: 'top'\r\n    },\r\n    inputTime: {\r\n        width: 90,\r\n        marginTop: 0,\r\n        marginLeft: 5\r\n    },\r\n    inputDate: {\r\n        width: 140,\r\n        marginTop: 0,\r\n        marginLeft: 5\r\n    },\r\n    inputEvery: {\r\n        width: 40,\r\n        marginLeft: 5,\r\n        marginRight: 5,\r\n    },\r\n    inputRadio: {\r\n        padding: '4px 12px',\r\n        verticalAlign: 'top'\r\n    },\r\n    inputGroup: {\r\n        maxWidth: 400,\r\n        display: 'inline-block'\r\n    },\r\n    inputGroupElement: {\r\n        width: 120,\r\n    },\r\n    inputDateDay: {\r\n        width: 60,\r\n    },\r\n    inputDateDayCheck: {\r\n        padding: 4,\r\n    },\r\n    inputSmallCheck: {\r\n        padding: 0,\r\n    },\r\n    rowOnce: {\r\n\r\n    },\r\n\r\n    rowDays: {\r\n        background: '#ddeaff'\r\n    },\r\n    rowDows: {\r\n        background: '#DDFFDD'\r\n    },\r\n    rowDates: {\r\n        background: '#DDDDFF'\r\n    },\r\n    rowWeeks: {\r\n        background: '#DDDDFF'\r\n    },\r\n    rowMonths: {\r\n        background: '#DDFFFF'\r\n    },\r\n    rowMonthsDates: {\r\n        background: '#EEFFFF',\r\n        maxWidth: 600\r\n    },\r\n    rowYears: {\r\n        background: '#fbffdd'\r\n    },\r\n    rowDaysDows: {\r\n        background: '#EEEAFF',\r\n        paddingLeft: 10,\r\n        paddingBottom: 10\r\n    },\r\n    rowDowsDows: {\r\n        background: '#EEFFEE',\r\n        paddingLeft: 10,\r\n        paddingBottom: 10\r\n    }\r\n});\r\n\r\nconst WEEKDAYS = [\r\n    'Sunday',\r\n    'Monday',\r\n    'Tuesday',\r\n    'Wednesday',\r\n    'Thursday',\r\n    'Friday',\r\n    'Saturday',\r\n    'Sunday',\r\n];\r\nconst MONTHS = [\r\n    'January',\r\n    'February',\r\n    'March',\r\n    'April',\r\n    'May',\r\n    'June',\r\n    'July',\r\n    'August',\r\n    'September',\r\n    'October',\r\n    'November',\r\n    'December'\r\n];\r\nconst PERIODS = {\r\n    'minutes': 'minutes',\r\n    'hours': 'hours',\r\n};\r\nconst ASTRO = [\r\n    'sunrise',\r\n    'sunriseEnd',\r\n    'goldenHourEnd',\r\n    'solarNoon',\r\n    'goldenHour',\r\n    'sunsetStart',\r\n    'sunset',\r\n    'dusk',\r\n    'nauticalDusk',\r\n    'night',\r\n    'nightEnd',\r\n    'nauticalDawn',\r\n    'dawn',\r\n    'nadir',\r\n];\r\n\r\nfunction padding(num) {\r\n    if (num < 10) return '0' + num;\r\n    return '' + num;\r\n}\r\n\r\nfunction TextTime(props) {\r\n    const { inputRef, ...other } = props;\r\n\r\n    return (\r\n        <MaskedInput\r\n            {...other}\r\n            ref={inputRef}\r\n            mask={[/[0-2]/, /[0-9]/, ':', /[0-5]/, /[0-9]/]}\r\n            placeholderChar={props.placeholder || '00:00'}\r\n            showMask\r\n        />\r\n    );\r\n}\r\n\r\nTextTime.propTypes = {\r\n    inputRef: PropTypes.func.isRequired,\r\n};\r\n\r\nfunction TextDate(props) {\r\n    const { inputRef, ...other } = props;\r\n\r\n    return (\r\n        <MaskedInput\r\n            {...other}\r\n            ref={inputRef}\r\n            mask={[/[0-3]/, /[0-9]/, '.', /[0-1]/, /[0-9]/, '.', '2', '0', /[0-9]/, /[0-9]/]}\r\n            placeholderChar={props.placeholder || '01.01.2019'}\r\n            showMask\r\n        />\r\n    );\r\n}\r\n\r\nTextDate.propTypes = {\r\n    inputRef: PropTypes.func.isRequired,\r\n};\r\n\r\nconst DEFAULT = {\r\n    time: {\r\n        exactTime: false,\r\n\r\n        start: '00:00',\r\n        end: '23:59',\r\n\r\n        mode: 'hours',\r\n        interval: 1,\r\n    },\r\n    period: {\r\n        once: '',\r\n        days: 1,\r\n        dows: '',\r\n        dates: '',\r\n        weeks: 0,\r\n        months: '',\r\n\r\n        years: 0,\r\n        yearMonth: 0,\r\n        yearDate: 0,\r\n    },\r\n    valid: {\r\n        from: '',\r\n        to: ''\r\n    }\r\n};\r\nfunction string2USdate(date) {\r\n    const parts = date.split('.');\r\n    if (parts.length === 3) {\r\n        return parts[2] + '-' + parts[1] + '-' + parts[0];\r\n    }\r\n\r\n}\r\nclass Schedule extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let schedule;\r\n        if (this.props.schedule && typeof this.props.schedule === 'string' && this.props.schedule[0] === '{') {\r\n            try {\r\n                schedule = JSON.parse(this.props.schedule);\r\n            } catch (e) {\r\n\r\n            }\r\n        }\r\n\r\n        if ((!schedule || !Object.keys(schedule).length) && this.props.onChange) {\r\n            setTimeout(() => this.onChange(this.state.schedule, true), 200);\r\n        }\r\n        schedule = schedule || {};\r\n        schedule = Object.assign({}, DEFAULT, schedule);\r\n        schedule.valid.from = schedule.valid.from || this.now2string();\r\n\r\n        this.state = {\r\n            schedule,\r\n            desc: this.state2text(schedule)\r\n        };\r\n\r\n        if (JSON.stringify(schedule) !== this.props.schedule) {\r\n            setTimeout(() => this.props.onChange && this.props.onChange(JSON.stringify(schedule)), 100);\r\n        }\r\n    }\r\n\r\n    onChange(schedule, force) {\r\n        const isDiff = JSON.stringify(schedule) !== JSON.stringify(this.state.schedule);\r\n        if (force || isDiff) {\r\n            isDiff && this.setState({schedule, desc: this.state2text(schedule)});\r\n            const copy = JSON.parse(JSON.stringify(schedule));\r\n            if (copy.period.once) {\r\n                let once = copy.period.once;\r\n                delete copy.period;\r\n                copy.period = {once};\r\n                delete copy.valid;\r\n            } else\r\n            if (copy.period.days) {\r\n                let days = copy.period.days;\r\n                let dows = copy.period.dows;\r\n                delete copy.period;\r\n                copy.period = {days};\r\n                if (dows && dows !== '[]') {\r\n                    copy.period.dows = dows;\r\n                }\r\n            } else\r\n            if (copy.period.weeks) {\r\n                let weeks = copy.period.weeks;\r\n                let dows = copy.period.dows;\r\n                delete copy.period;\r\n                copy.period = {weeks};\r\n                if (dows && dows !== '[]') {\r\n                    copy.period.dows = dows;\r\n                }\r\n            } else\r\n            if (copy.period.months) {\r\n                let months = copy.period.months;\r\n                let dates = copy.period.dates;\r\n                delete copy.period;\r\n                copy.period = {months};\r\n                if (dates && dates !== '[]') {\r\n                    copy.period.dates = dates;\r\n                }\r\n            } else\r\n            if (copy.period.years) {\r\n                let years = copy.period.years;\r\n                let yearMonth = copy.period.yearMonth;\r\n                let yearDate = copy.period.yearDate;\r\n                delete copy.period;\r\n                copy.period = {years, yearDate};\r\n                if (yearMonth) {\r\n                    copy.period.yearMonth = yearMonth;\r\n                }\r\n            }\r\n\r\n            if (copy.time.exactTime) {\r\n                delete copy.time.end;\r\n                delete copy.time.mode;\r\n                delete copy.time.interval;\r\n            } else {\r\n                delete copy.time.exactTime;\r\n            }\r\n            if (copy.valid) {\r\n                if (!copy.valid.to) {\r\n                    delete copy.valid.to;\r\n                }\r\n                if (copy.period.days === 1 || copy.period.weeks === 1 || copy.period.months === 1 || copy.period.years === 1) {\r\n                    const from = this.string2date(copy.valid.from);\r\n                    const today = new Date();\r\n                    today.setHours(0);\r\n                    today.setMinutes(0);\r\n                    today.setSeconds(0);\r\n                    today.setMilliseconds(0);\r\n                    if (from <= today) {\r\n                        delete copy.valid.from;\r\n                    }\r\n                }\r\n                if (!copy.valid.from && !copy.valid.to) {\r\n                    delete copy.valid;\r\n                }\r\n            }\r\n\r\n            this.props.onChange && this.props.onChange(JSON.stringify(copy));\r\n        }\r\n    }\r\n\r\n    state2text(schedule) {\r\n        let desc = [];\r\n        let validFrom = this.string2date(schedule.valid.from);\r\n        if (schedule.period.once) {\r\n            // once\r\n            let once = this.string2date(schedule.period.once);\r\n            let now = new Date();\r\n            now.setMilliseconds(0);\r\n            now.setSeconds(0);\r\n            now.setMinutes(0);\r\n            now.setHours(0);\r\n\r\n            //\r\n            if (once < now) {\r\n                // will ne be not executed any more, because start is in the past\r\n                return I18n.t('sch_desc_onceInPast');\r\n            } else {\r\n                // only once\r\n                desc.push(I18n.t('sch_desc_once_on', schedule.period.once));\r\n            }\r\n        } else\r\n        if (schedule.period.days) {\r\n            if (schedule.period.days === 1) {\r\n                if (schedule.period.dows) {\r\n                    const dows = JSON.parse(schedule.period.dows);\r\n                    if (dows.length === 2 && dows[0] === 0 && dows[1] === 6) {\r\n                        // on weekends\r\n                        desc.push(I18n.t('sch_desc_onWeekends'));\r\n                    } else if (dows.length === 5 && dows[0] === 1 && dows[1] === 2 && dows[2] === 3 && dows[3] === 4 && dows[4] === 5) {\r\n                        // on workdays\r\n                        desc.push(I18n.t('sch_desc_onWorkdays'));\r\n                    } else {\r\n                        const tDows = dows.map(day => I18n.t(WEEKDAYS[day]));\r\n                        if (tDows.length === 1) {\r\n                            // on Monday\r\n                            desc.push(I18n.t('sch_desc_onWeekday', tDows[0]));\r\n                        } else if (tDows.length === 7) {\r\n                            // on every day\r\n                            desc.push(I18n.t('sch_desc_everyDay'));\r\n                        } else {\r\n                            const last = tDows.pop();\r\n                            // on Monday and Sunday\r\n                            desc.push(I18n.t('sch_desc_onWeekdays', tDows.join(', '), last));\r\n                        }\r\n                    }\r\n                } else {\r\n                    desc.push(I18n.t('sch_desc_everyDay'));\r\n                }\r\n            } else {\r\n                desc.push(I18n.t('sch_desc_everyNDay', schedule.period.days));\r\n            }\r\n        } else\r\n        if (schedule.period.weeks) {\r\n            if (schedule.period.weeks === 1) {\r\n                desc.push(I18n.t('sch_desc_everyWeek'));\r\n            } else {\r\n                desc.push(I18n.t('sch_desc_everyNWeeks', schedule.period.weeks));\r\n            }\r\n\r\n            if (schedule.period.dows) {\r\n                const dows = JSON.parse(schedule.period.dows);\r\n                if (dows.length === 2 && dows[0] === 0 && dows[1] === 6) {\r\n                    // on weekends\r\n                    desc.push(I18n.t('sch_desc_onWeekends'));\r\n                } else if (dows.length === 5 && dows[0] === 1 && dows[1] === 2 && dows[2] === 3 && dows[3] === 4 && dows[4] === 5) {\r\n                    // on workdays\r\n                    desc.push(I18n.t('sch_desc_onWorkdays'));\r\n                } else {\r\n                    const tDows = dows.map(day => I18n.t(WEEKDAYS[day]));\r\n                    if (tDows.length === 1) {\r\n                        // on Monday\r\n                        desc.push(I18n.t('sch_desc_onWeekday', tDows[0]));\r\n                    } else if (tDows.length === 7) {\r\n                        // on every day\r\n                        desc.push(I18n.t('sch_desc_everyDay'));\r\n                    } else {\r\n                        const last = tDows.pop();\r\n                        // on Monday and Sunday\r\n                        desc.push(I18n.t('sch_desc_onWeekdays', tDows.join(', '), last));\r\n                    }\r\n                }\r\n            } else {\r\n                return I18n.t('sch_desc_never');\r\n            }\r\n        } else\r\n        if (schedule.period.months) {\r\n            if (schedule.period.dates) {\r\n                const dates = JSON.parse(schedule.period.dates);\r\n                if (dates.length === 1) {\r\n                    // in 1 of month\r\n                    desc.push(I18n.t('sch_desc_onDate', dates[0]));\r\n                } else if (dates.length === 31) {\r\n                    desc.push(I18n.t('sch_desc_onEveryDate'));\r\n                } else if (!dates.length) {\r\n                    return I18n.t('sch_desc_never');\r\n                } else {\r\n                    const last = dates.pop();\r\n                    // in 1 and 4 of month\r\n                    desc.push(I18n.t('sch_desc_onDates', dates.join(', '), last));\r\n                }\r\n            } else {\r\n                desc.push(I18n.t('sch_desc_onEveryDate'));\r\n            }\r\n\r\n            if (schedule.period.months === 1) {\r\n                desc.push(I18n.t('sch_desc_everyMonth'));\r\n            } else if (typeof schedule.period.months === 'number') {\r\n                desc.push(I18n.t('sch_desc_everyNMonths', schedule.period.months));\r\n            } else {\r\n                const months = JSON.parse(schedule.period.months);\r\n                const tMonths = months.map(month => I18n.t(MONTHS[month - 1]));\r\n                if (!tMonths.length) {\r\n                    // in January\r\n                    return I18n.t('sch_desc_never');\r\n                } else if (tMonths.length === 1) {\r\n                    // in January\r\n                    desc.push(I18n.t('sch_desc_onMonth', tMonths[0]));\r\n                } else if (tMonths.length === 12) {\r\n                    // every month\r\n                    desc.push(I18n.t('sch_desc_everyMonth'));\r\n                } else {\r\n                    const last = tMonths.pop();\r\n                    // in January and May\r\n                    desc.push(I18n.t('sch_desc_onMonths', tMonths.join(', '), last));\r\n                }\r\n            }\r\n        }\r\n        else\r\n        if (schedule.period.years) {\r\n            if (schedule.period.years === 1) {\r\n                desc.push(I18n.t('sch_desc_everyYear'));\r\n            } else {\r\n                desc.push(I18n.t('sch_desc_everyNYears', schedule.period.years));\r\n            }\r\n            desc.push(I18n.t('sch_desc_onDate', schedule.period.yearDate, schedule.period.yearMonth ? I18n.t(MONTHS[schedule.period.yearMonth - 1]) : I18n.t('sch_desc_everyMonth')));\r\n        }\r\n\r\n        // time\r\n        if (schedule.time.exactTime) {\r\n            if (ASTRO.indexOf(schedule.time.start) !== -1) {\r\n                // at sunset\r\n                desc.push(I18n.t('sch_desc_atTime', I18n.t('sch_astro_' + schedule.time.start)));\r\n            } else {\r\n                // at HH:MM\r\n                desc.push(I18n.t('sch_desc_atTime', schedule.time.start));\r\n            }\r\n        } else {\r\n            if (schedule.time.mode === PERIODS.minutes) {\r\n                if (schedule.time.interval === 1) {\r\n                    // every minute\r\n                    desc.push(I18n.t('sch_desc_everyMinute'));\r\n                } else {\r\n                    // every N minutes\r\n                    desc.push(I18n.t('sch_desc_everyNMinutes', schedule.time.interval));\r\n                }\r\n            } else {\r\n                if (schedule.time.interval === 1) {\r\n                    // every minute\r\n                    desc.push(I18n.t('sch_desc_everyHour'));\r\n                } else {\r\n                    // every N minutes\r\n                    desc.push(I18n.t('sch_desc_everyNHours', schedule.time.interval));\r\n                }\r\n            }\r\n            const start = ASTRO.indexOf(schedule.time.start) !== -1 ? I18n.t('sch_astro_' + schedule.time.start) : schedule.time.start;\r\n            const end = ASTRO.indexOf(schedule.time.end) !== -1 ? I18n.t('sch_astro_' + schedule.time.end) : schedule.time.end;\r\n            if (start !== '00:00' || (end !== '24:00' && end !== '23:59')) {\r\n                // from HH:mm to HH:mm\r\n                desc.push(I18n.t('sch_desc_intervalFromTo', start, end));\r\n            }\r\n        }\r\n\r\n        if (!schedule.period.once) {\r\n            // valid\r\n            if (validFrom.getTime() > Date.now() && schedule.valid.to) {\r\n                // from XXX to XXXX\r\n                desc.push(I18n.t('sch_desc_validFromTo', schedule.valid.from, schedule.valid.to));\r\n            } else if (validFrom.getTime() > Date.now()) {\r\n                // from XXXX\r\n                desc.push(I18n.t('sch_desc_validFrom', schedule.valid.from));\r\n            } else if (schedule.valid.to) {\r\n                // till XXXX\r\n                desc.push(I18n.t('sch_desc_validTo', schedule.valid.to));\r\n            }\r\n        }\r\n        return desc.join(' ');\r\n    }\r\n\r\n    getTimePeriodElements() {\r\n        const schedule = this.state.schedule;\r\n        let wholeDay = false;\r\n        let day = false;\r\n        let night = false;\r\n        let fromTo = true;\r\n        if (schedule.time.start === '00:00' && schedule.time.end === '24:00') {\r\n            wholeDay = true;\r\n            fromTo = false;\r\n        } else if (schedule.time.start === 'sunrise') {\r\n            day = true;\r\n            fromTo = false;\r\n        } else if (schedule.time.start === 'sunset') {\r\n            night = true;\r\n            fromTo = false;\r\n        }\r\n\r\n        return (\r\n            <div key=\"timePeriod\" className={this.props.classes.rowDiv}>\r\n                <div className={this.props.classes.modeDiv}>\r\n                    <FormControlLabel control={<Radio className={this.props.classes.inputRadio} checked={!schedule.time.exactTime} onClick={() => {\r\n                        const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                        _schedule.time.exactTime = false;\r\n                        this.onChange(_schedule);\r\n                    }}/>} label={I18n.t('sch_intervalTime')} />\r\n                </div>\r\n                <div className={this.props.classes.settingsDiv}>\r\n                    <div className={this.props.classes.settingsDiv}>\r\n                        {!schedule.time.exactTime && (<div>\r\n                            <div><FormControlLabel control={<Radio className={this.props.classes.inputRadio} checked={fromTo} onClick={() => {\r\n                                const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                _schedule.time.start = '00:00';\r\n                                _schedule.time.end = '23:59';\r\n                                this.onChange(_schedule);\r\n                            }}/>} label={!fromTo ? I18n.t('sch_fromTo') : ''} />\r\n                                {fromTo && [\r\n                                    (<TextField\r\n                                        className={this.props.classes.inputTime}\r\n                                        style={{marginRight: 10}}\r\n                                        key=\"exactTimeFrom\"\r\n                                        type=\"time\"\r\n                                        value={this.state.schedule.time.start}\r\n                                        //InputProps={{inputComponent: TextTime}}\r\n                                        onChange={e => {\r\n                                            const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                            _schedule.time.start = e.target.value;\r\n                                            this.onChange(_schedule);\r\n                                        }}\r\n                                        InputLabelProps={{shrink: true,}}\r\n                                        label={I18n.t('sch_from')}\r\n                                        margin=\"normal\"\r\n                                    />),\r\n                                    (<TextField\r\n                                        className={this.props.classes.inputTime}\r\n                                        key=\"exactTimeTo\"\r\n                                        type=\"time\"\r\n                                        value={this.state.schedule.time.end}\r\n                                        //InputProps={{inputComponent: TextTime}}\r\n                                        onChange={e => {\r\n                                            const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                            _schedule.time.end = e.target.value;\r\n                                            this.onChange(_schedule);\r\n                                        }}\r\n                                        InputLabelProps={{shrink: true,}}\r\n                                        label={I18n.t('sch_to')}\r\n                                        margin=\"normal\"\r\n                                    />)\r\n                                ]}\r\n                            </div>\r\n                        </div>)}\r\n\r\n                        {!schedule.time.exactTime && (<div><FormControlLabel control={<Radio className={this.props.classes.inputRadio} checked={wholeDay} onClick={() => {\r\n                            const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                            _schedule.time.start = '00:00';\r\n                            _schedule.time.end = '24:00';\r\n                            this.onChange(_schedule);\r\n                        }}/>} label={I18n.t('sch_wholeDay')} /></div>) }\r\n\r\n                        {!schedule.time.exactTime && (<div><FormControlLabel control={<Radio className={this.props.classes.inputRadio} checked={day} onClick={() => {\r\n                            const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                            _schedule.time.start = 'sunrise';\r\n                            _schedule.time.end = 'sunset';\r\n                            this.onChange(_schedule);\r\n                        }}/>} label={I18n.t('sch_astroDay')} /></div>) }\r\n\r\n                        {!schedule.time.exactTime && (<div><FormControlLabel control={<Radio className={this.props.classes.inputRadio} checked={night} onClick={() => {\r\n                            const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                            _schedule.time.start = 'sunset';\r\n                            _schedule.time.end = 'sunrise';\r\n                            this.onChange(_schedule);\r\n                        }}/>} label={I18n.t('sch_astroNight')} /></div>) }\r\n                    </div>\r\n                    {!schedule.time.exactTime && this.getPeriodSettingsMinutes()}\r\n                </div>\r\n            </div>);\r\n    }\r\n\r\n    getTimeExactElements() {\r\n        const isAstro = ASTRO.indexOf(this.state.schedule.time.start) !== -1;\r\n\r\n        return (<div key=\"timeExact\"  className={this.props.classes.rowDiv}>\r\n            <div className={this.props.classes.modeDiv}>\r\n                <FormControlLabel control={<Radio className={this.props.classes.inputRadio} checked={this.state.schedule.time.exactTime} onClick={() => {\r\n                    const schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                    schedule.time.exactTime = true;\r\n                    this.onChange(schedule);\r\n                }}/>} label={I18n.t('sch_exactTime')} />\r\n            </div>\r\n            {this.state.schedule.time.exactTime &&\r\n                (<Select value={isAstro ? this.state.schedule.time.start : '00:00'}\r\n                         onChange={e => {\r\n                             const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                             _schedule.time.start = e.target.value;\r\n                             this.onChange(_schedule);\r\n                         }}\r\n                >\r\n                    <MenuItem key=\"specific\" value={'00:00'}>{I18n.t('sch_specificTime')}</MenuItem>\r\n                    {ASTRO.map(event => (<MenuItem key={event} value={event}>{I18n.t('sch_astro_' + event)}</MenuItem>))}\r\n                </Select>)\r\n            }\r\n            {this.state.schedule.time.exactTime && !isAstro &&\r\n                (<div className={this.props.classes.settingsDiv}><TextField\r\n                    className={this.props.classes.inputTime}\r\n                    key=\"exactTimeValue\"\r\n                    value={this.state.schedule.time.start}\r\n                    type=\"time\"\r\n                    // inputComponent={TextTime}\r\n                    onChange={e => {\r\n                        const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                        _schedule.time.start = e.target.value;\r\n                        this.onChange(_schedule);\r\n                    }}\r\n                    InputLabelProps={{shrink: true,}}\r\n                    margin=\"normal\"\r\n                /></div>)\r\n            }\r\n        </div>)\r\n    }\r\n\r\n    getDivider() {\r\n        return (<hr className={this.props.classes.hr}/>);\r\n    }\r\n\r\n    getPeriodModes() {\r\n        const schedule = this.state.schedule;\r\n        const isOnce = !schedule.period.dows && !schedule.period.months && !schedule.period.dates && !schedule.period.years && !schedule.period.days && !schedule.period.weeks;\r\n        if (isOnce && !schedule.period.once) {\r\n            schedule.period.once = this.now2string(true);\r\n        }\r\n\r\n        return [\r\n            // ----- once ---\r\n            (<div key=\"once\" className={this.props.classes.rowDiv + ' ' + this.props.classes.rowOnce}>\r\n                <div className={this.props.classes.modeDiv}>\r\n                    <FormControlLabel control={(<Radio className={this.props.classes.inputRadio} checked={isOnce} onClick={() => {\r\n                                    const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                    _schedule.period.once = _schedule.period.once || this.now2string(true);\r\n                                    _schedule.period.dows = '';\r\n                                    _schedule.period.months = '';\r\n                                    _schedule.period.dates = '';\r\n                                    _schedule.period.years = 0;\r\n                                    _schedule.period.yearDate = 0;\r\n                                    _schedule.period.yearMonth = 0;\r\n                                    _schedule.period.weeks = 0;\r\n                                    _schedule.period.days = 0;\r\n                                    this.onChange(_schedule);\r\n                                }}/>)}\r\n                              label={I18n.t('sch_periodOnce')} />\r\n                </div>\r\n                {isOnce && (<div className={this.props.classes.settingsDiv}>\r\n                    {<TextField\r\n                        className={this.props.classes.inputDate}\r\n                        type=\"date\"\r\n                        key=\"exactDateAt\"\r\n                        value={string2USdate(schedule.period.once)}\r\n                        //InputProps={{inputComponent: TextTime}}\r\n                        onChange={e => {\r\n                            const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                            const date = this.string2date(e.target.value);\r\n                            _schedule.period.once = padding(date.getDate()) + '.' + padding(date.getMonth() + 1) + '.' + date.getFullYear();\r\n                            this.onChange(_schedule);\r\n                        }}\r\n                        InputLabelProps={{shrink: true,}}\r\n                        label={I18n.t('sch_at')}\r\n                        margin=\"normal\"\r\n                    />}\r\n                </div>)}\r\n            </div>),\r\n\r\n\r\n            // ----- days ---\r\n            (<div key=\"days\" className={this.props.classes.rowDiv + ' ' + this.props.classes.rowDays}>\r\n                <div className={this.props.classes.modeDiv}>\r\n                    <FormControlLabel control={(<Radio className={this.props.classes.inputRadio} checked={!!schedule.period.days} onClick={() => {\r\n                               const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                _schedule.period.days = 1;\r\n                                _schedule.period.dows = '';\r\n                                _schedule.period.months = '';\r\n                                _schedule.period.dates = '';\r\n                                _schedule.period.years = 0;\r\n                                _schedule.period.yearDate = 0;\r\n                                _schedule.period.yearMonth = 0;\r\n                                _schedule.period.weeks = 0;\r\n                                _schedule.period.once = '';\r\n                               this.onChange(_schedule);\r\n                           }}/>)}\r\n                           label={I18n.t('sch_periodDaily')} />\r\n                </div>\r\n                <div className={this.props.classes.settingsDiv}>\r\n                    {this.getPeriodSettingsDaily()}\r\n                    {schedule.period.days ? this.getPeriodSettingsWeekdays() : null}\r\n                </div>\r\n            </div>),\r\n\r\n\r\n            // ----- days of weeks ---\r\n            /*!schedule.period.days && (\r\n                <div key=\"dows\" className={this.props.classes.rowDiv + ' ' + this.props.classes.rowDows}>\r\n                    <div className={this.props.classes.modeDiv}>\r\n                        <FormControlLabel control={(<Radio className={this.props.classes.inputRadio} checked={!!schedule.period.dows} onClick={() => {\r\n                            const schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                            schedule.period.dows = schedule.period.dows ? '' : '[0,1,2,3,4,5,6]';\r\n                            this.onChange(schedule);\r\n                        }}/>)}\r\n                        label={I18n.t('sch_periodWeekdays')} />\r\n                    </div>\r\n                    <div className={this.props.classes.settingsDiv}>\r\n                        {this.getPeriodSettingsWeekdays()}\r\n                    </div>\r\n                </div>),\r\n*/\r\n            // ----- weeks ---\r\n            (<div key=\"weeks\" className={this.props.classes.rowDiv + ' ' + this.props.classes.rowDows}>\r\n                <div className={this.props.classes.modeDiv}>\r\n                    <FormControlLabel control={(<Radio className={this.props.classes.inputRadio} checked={!!schedule.period.weeks} onClick={() => {\r\n                        const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                        _schedule.period.weeks = schedule.period.weeks ? 0 : 1;\r\n                        _schedule.period.dows = schedule.period.dows || '[0]';\r\n                        _schedule.period.months = '';\r\n                        _schedule.period.dates = '';\r\n                        _schedule.period.years = 0;\r\n                        _schedule.period.yearDate = 0;\r\n                        _schedule.period.yearMonth = 0;\r\n                        _schedule.period.days = 0;\r\n                        _schedule.period.once = '';\r\n                        this.onChange(_schedule);\r\n                    }}/>)}\r\n                    label={I18n.t('sch_periodWeekly')} />\r\n                </div>\r\n                <div className={this.props.classes.settingsDiv}>\r\n                    <div className={this.props.classes.settingsDiv}>{this.getPeriodSettingsWeekly()}</div>\r\n                    <div className={this.props.classes.settingsDiv + ' ' + this.props.classes.rowDowsDows}>{this.state.schedule.period.weeks ? this.getPeriodSettingsWeekdays() : null}</div>\r\n                </div>\r\n            </div>),\r\n\r\n\r\n            // ----- months ---\r\n            (<div key=\"months\" className={this.props.classes.rowDiv + ' ' + this.props.classes.rowMonths}>\r\n                <div className={this.props.classes.modeDiv}>\r\n                    <FormControlLabel control={(<Radio className={this.props.classes.inputRadio} checked={!!schedule.period.months} onClick={() => {\r\n                           const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                            _schedule.period.months = 1;\r\n                            _schedule.period.dows = '';\r\n                            _schedule.period.dates = '';\r\n                            _schedule.period.years = 0;\r\n                            _schedule.period.yearDate = 0;\r\n                            _schedule.period.yearMonth = 0;\r\n                            _schedule.period.weeks = 0;\r\n                            _schedule.period.days = 0;\r\n                            _schedule.period.once = '';\r\n                           this.onChange(_schedule);\r\n                       }}/>)}\r\n                       label={I18n.t('sch_periodMonthly')} />\r\n                </div>\r\n                <div className={this.props.classes.settingsDiv}>\r\n                    {this.getPeriodSettingsMonthly()}\r\n                    {schedule.period.months ? (<div>\r\n                        <div className={this.props.classes.settingsDiv + ' ' + this.props.classes.rowMonthsDates}>\r\n                            <FormControlLabel control={(<Checkbox className={this.props.classes.inputRadio} checked={!!schedule.period.dates} onClick={() => {\r\n                                const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                _schedule.period.months = _schedule.period.months || 1;\r\n                                const dates = [];\r\n                                for (let i = 1; i <= 31; i++) {\r\n                                    dates.push(i);\r\n                                }\r\n                                _schedule.period.dates = _schedule.period.dates || JSON.stringify(dates);\r\n                                _schedule.period.dows = '';\r\n                                _schedule.period.years = 0;\r\n                                _schedule.period.yearDate = 0;\r\n                                _schedule.period.yearMonth = 0;\r\n                                _schedule.period.weeks = 0;\r\n                                _schedule.period.days = 0;\r\n                                _schedule.period.once = '';\r\n\r\n                                this.onChange(_schedule);\r\n                            }}/>)}\r\n                            label={I18n.t('sch_periodDates')} /></div>\r\n                        <div className={this.props.classes.settingsDiv + ' ' + this.props.classes.rowMonthsDates}>\r\n                            {this.getPeriodSettingsDates()}\r\n                        </div>\r\n                    </div>) : null}\r\n                </div>\r\n            </div>),\r\n\r\n\r\n            // ----- years ---\r\n            (<div key=\"years\" className={this.props.classes.rowDiv + ' ' + this.props.classes.rowYears}>\r\n                <div className={this.props.classes.modeDiv}>\r\n                    <FormControlLabel control={(<Radio className={this.props.classes.inputRadio} checked={!!schedule.period.years} onClick={() => {\r\n                       const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                        _schedule.period.years = 1;\r\n                        _schedule.period.yearDate = 1;\r\n                        _schedule.period.yearMonth = 1;\r\n                        _schedule.period.dows = '';\r\n                        _schedule.period.months = 0;\r\n                        _schedule.period.dates = '';\r\n                        _schedule.period.weeks = 0;\r\n                        _schedule.period.days = 0;\r\n                        _schedule.period.once = '';\r\n                       this.onChange(_schedule);\r\n                   }}/>)}\r\n                   label={I18n.t('sch_periodYearly')} />\r\n                </div>\r\n                <div className={this.props.classes.settingsDiv}>\r\n                    <div className={this.props.classes.settingsDiv}>{this.getPeriodSettingsYearly()}</div>\r\n                    {!!schedule.period.years && (<div className={this.props.classes.settingsDiv}>\r\n                        <span>{I18n.t('sch_on')}</span>\r\n                        <Input key=\"input\" value={this.state.schedule.period.yearDate} className={this.props.classes.inputEvery} type=\"number\" min=\"1\" max=\"31\" onChange={e => {\r\n                            const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                            _schedule.period.yearDate = parseInt(e.target.value, 10);\r\n                            this.onChange(_schedule);\r\n                        }} />\r\n                        <Select value={schedule.period.yearMonth}\r\n                             onChange={e => {\r\n                                 const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                 _schedule.period.yearMonth = e.target.value;\r\n                                 this.onChange(_schedule);\r\n                             }}\r\n                        >\r\n                            <MenuItem key=\"every\" value={0}>{I18n.t('sch_yearEveryMonth')}</MenuItem>\r\n                            {MONTHS.map((month, i) => (<MenuItem key={month} value={i + 1}>{I18n.t(month)}</MenuItem>))}\r\n                        </Select>\r\n                    </div>)}\r\n                </div>\r\n            </div>),\r\n        ];\r\n    }\r\n\r\n    getPeriodSettingsMinutes() {\r\n        return (<div style={{display: 'inline-block'}}>\r\n            <label>{I18n.t('sch_every')}</label>\r\n            <Input value={this.state.schedule.time.interval}\r\n                   style={{ verticalAlign: 'bottom'}}\r\n                   className={this.props.classes.inputEvery} type=\"number\" min=\"1\" onChange={e => {\r\n                const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                _schedule.time.interval = parseInt(e.target.value, 10);\r\n                this.onChange(_schedule);\r\n            }} />\r\n            <Select value={this.state.schedule.time.mode}\r\n                    onChange={e => {\r\n                        const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                        _schedule.time.mode = e.target.value;\r\n                        this.onChange(_schedule);\r\n                    }}\r\n            >\r\n                <MenuItem value={PERIODS.minutes}>{I18n.t('sch_periodMinutes')}</MenuItem>\r\n                <MenuItem value={PERIODS.hours}>{I18n.t('sch_periodHours')}</MenuItem>\r\n            </Select>\r\n        </div>);\r\n    }\r\n\r\n    getPeriodSettingsWeekdays() {\r\n        // || this.state.schedule.period.dows === '[1, 2, 3, 4, 5]' || this.state.schedule.period.dows === '[0, 6]'\r\n        const schedule = this.state.schedule;\r\n        const isSpecific = schedule.period.dows && schedule.period.dows !== '[1, 2, 3, 4, 5]' && schedule.period.dows !== '[0, 6]';\r\n        return [\r\n            (<div key=\"workdays\"><FormControlLabel control={(<Radio className={this.props.classes.inputRadio} checked={schedule.period.dows === '[1, 2, 3, 4, 5]'} onClick={() => {\r\n                    const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                    _schedule.period.dows = '[1, 2, 3, 4, 5]';\r\n                    if (_schedule.period.days) {\r\n                        _schedule.period.days = 1;\r\n                    }\r\n                    this.onChange(_schedule);\r\n                }}/>)}\r\n                label={I18n.t('sch_periodWorkdays')} /></div>),\r\n\r\n            (<div key=\"weekend\"><FormControlLabel control={(<Radio className={this.props.classes.inputRadio} checked={schedule.period.dows === '[0, 6]'} onClick={() => {\r\n                    const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                    _schedule.period.dows = '[0, 6]';\r\n                    if (_schedule.period.days) {\r\n                        _schedule.period.days = 1;\r\n                    }\r\n                    this.onChange(_schedule);\r\n                }}/>)}\r\n                label={I18n.t('sch_periodWeekend')} /></div>),\r\n\r\n            (<div key=\"specific\" style={{verticalAlign: 'top'}}><FormControlLabel style={{verticalAlign: 'top'}}\r\n                                                                   control={(<Radio className={this.props.classes.inputRadio} checked={isSpecific} onClick={() => {\r\n                    const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                    _schedule.period.dows = '[0,1,2,3,4,5,6]';\r\n                    if (_schedule.period.days) {\r\n                        _schedule.period.days = 1;\r\n                    }\r\n                    this.onChange(_schedule);\r\n                }}/>)\r\n                }\r\n                label={I18n.t('sch_periodWeekdays')} />\r\n                {isSpecific && (schedule.period.days === 1 || schedule.period.weeks) && (<FormGroup row className={this.props.classes.inputGroup} style={{width: 150}}>\r\n                    {[1,2,3,4,5,6,0].map(i =>\r\n                        (<FormControlLabel key={'specific_' + i} className={this.props.classes.inputGroupElement} control={\r\n                              <Checkbox className={this.props.classes.inputSmallCheck} checked={schedule.period.dows.indexOf('' + i) !== -1}\r\n                                    onChange={e => {\r\n                                        const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                        let dows;\r\n                                        try {\r\n                                            dows = JSON.parse(_schedule.period.dows);\r\n                                        } catch (e) {\r\n                                            dows = [];\r\n                                        }\r\n                                        if (e.target.checked && dows.indexOf(i) === -1) {\r\n                                            dows.push(i);\r\n                                        } else if (!e.target.checked && dows.indexOf(i) !== -1) {\r\n                                            dows.splice(dows.indexOf(i), 1);\r\n                                        }\r\n                                        dows.sort((a, b) => a - b);\r\n                                        _schedule.period.dows = JSON.stringify(dows);\r\n                                        if (_schedule.period.days) {\r\n                                            _schedule.period.days = 1;\r\n                                        }\r\n                                        this.onChange(_schedule);\r\n                                    }}\r\n                              />\r\n                          }\r\n                          label={I18n.t(WEEKDAYS[i])}\r\n                        />))}\r\n                </FormGroup>)}\r\n            </div>),\r\n            ];\r\n    }\r\n\r\n    getPeriodSettingsDaily() {\r\n        if (!this.state.schedule.period.days) {\r\n            return;\r\n        }\r\n        const schedule = this.state.schedule;\r\n        return [\r\n            (<div key=\"every_day\"><FormControlLabel control={(<Radio className={this.props.classes.inputRadio} checked={schedule.period.days === 1 && !schedule.period.dows} onClick={() => {\r\n                                   const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                    _schedule.period.days = 1;\r\n                                    _schedule.period.dows = '';\r\n                                   this.onChange(_schedule);\r\n                               }}/>)}\r\n                                    label={I18n.t('sch_periodEveryDay')} /></div>),\r\n            (<div key=\"everyN_day\"><FormControlLabel control={(<Radio className={this.props.classes.inputRadio} checked={schedule.period.days > 1} onClick={() => {\r\n                                    const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                    _schedule.period.days = 2;\r\n                                    _schedule.period.dows = '';\r\n                                    this.onChange(_schedule);\r\n                               }}/>)}\r\n                                    label={I18n.t('sch_periodEvery')} />\r\n                {schedule.period.days > 1 && [(<Input key=\"input\" value={this.state.schedule.period.days} className={this.props.classes.inputEvery} type=\"number\" min=\"2\" onChange={e => {\r\n                    const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                    _schedule.period.days = parseInt(e.target.value, 10);\r\n                    _schedule.period.dows = '';\r\n                    this.onChange(_schedule);\r\n                }} />), (<span key=\"span\" style={{paddingRight: 10}}>{I18n.t('sch_periodDay')}</span>)]}\r\n            </div>),\r\n            ];\r\n    }\r\n\r\n    getPeriodSettingsWeekly() {\r\n        if (!this.state.schedule.period.weeks) {\r\n            return;\r\n        }\r\n        const schedule = this.state.schedule;\r\n        return [\r\n            (<div key=\"radios\" style={{display: 'inline-block', verticalAlign: 'top'}}>\r\n                    <div><FormControlLabel control={(<Radio className={this.props.classes.inputRadio} checked={schedule.period.weeks === 1} onClick={() => {\r\n                                            const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                            _schedule.period.weeks = 1;\r\n                                            this.onChange(_schedule);\r\n                                        }}/>)\r\n                                        }\r\n                                             label={I18n.t('sch_periodEveryWeek')} /></div>\r\n                    <div>\r\n                        <FormControlLabel control={(<Radio className={this.props.classes.inputRadio} checked={schedule.period.weeks > 1} onClick={() => {\r\n                                            const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                            _schedule.period.weeks = 2;\r\n                                            this.onChange(_schedule);\r\n                                        }}/>)\r\n                                        }\r\n                                        label={I18n.t('sch_periodEvery')} />\r\n                        {schedule.period.weeks > 1 && [(<Input value={this.state.schedule.period.weeks} className={this.props.classes.inputEvery} type=\"number\" min=\"2\" onChange={e => {\r\n                            const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                            _schedule.period.weeks = parseInt(e.target.value, 10);\r\n                            this.onChange(_schedule);\r\n                        }} />), (<span>{I18n.t('sch_periodWeek')}</span>)]}\r\n                    </div>\r\n                </div>),\r\n            ];\r\n    }\r\n\r\n    getPeriodSettingsDates() {\r\n        if (!this.state.schedule.period.dates) {\r\n            return;\r\n        }\r\n        const schedule = this.state.schedule;\r\n\r\n        const dates = [];\r\n        for (let i = 1; i <= 31; i++) {\r\n            dates.push(i);\r\n        }\r\n\r\n        const parsedDates = JSON.parse(schedule.period.dates);\r\n\r\n        return (\r\n            <FormGroup row className={this.props.classes.inputGroup} style={{maxWidth: 620}}>\r\n                <FormControlLabel className={this.props.classes.inputDateDay}\r\n                    control={\r\n                        <Checkbox className={this.props.classes.inputDateDayCheck} checked={parsedDates.length === 31}\r\n                            onChange={e => {\r\n                                const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                const dates = [];\r\n                                for (let i = 1; i <= 31; i++) {\r\n                                    dates.push(i);\r\n                                }\r\n                                _schedule.period.dates = JSON.stringify(dates);\r\n                                this.onChange(_schedule);\r\n                            }}\r\n                      />\r\n                    } label={I18n.t('sch_all')}\r\n                />\r\n                <FormControlLabel className={this.props.classes.inputDateDay}\r\n                    control={\r\n                        <Checkbox className={this.props.classes.inputDateDayCheck} checked={!parsedDates.length}\r\n                            onChange={e => {\r\n                                const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                _schedule.period.dates = '[]';\r\n                                this.onChange(_schedule);\r\n                            }}\r\n                        />\r\n                    } label={I18n.t('sch_no_one')}\r\n                />\r\n                {parsedDates.length !== 31 && !!parsedDates.length && (<FormControlLabel className={this.props.classes.inputDateDay}\r\n                    control={\r\n                        <Checkbox className={this.props.classes.inputDateDayCheck} checked={false}\r\n                            onChange={e => {\r\n                                const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                const result = [];\r\n                                const parsedDates = JSON.parse(_schedule.period.dates);\r\n                                for (let i = 1; i <= 31; i++) {\r\n                                    if (parsedDates.indexOf(i) === -1) {\r\n                                        result.push(i);\r\n                                    }\r\n                                }\r\n                                result.sort((a, b) => a - b);\r\n                                _schedule.period.dates = JSON.stringify(result);\r\n                                this.onChange(_schedule);\r\n                            }}\r\n                        />\r\n                    } label={I18n.t('sch_invert')}\r\n                />)}\r\n                <div/>\r\n            {dates.map(i =>\r\n                (<FormControlLabel key={'date_' + i} className={this.props.classes.inputDateDay} style={!i ? {opacity: 0, cursor: 'default', userSelect: 'none', pointerEvents: 'none'}: {}}\r\n                      control={\r\n                          <Checkbox className={this.props.classes.inputDateDayCheck} checked={JSON.parse(schedule.period.dates).indexOf(i) !== -1}\r\n                                    onChange={e => {\r\n                                        const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                        let dates;\r\n                                        try {\r\n                                            dates = JSON.parse(_schedule.period.dates);\r\n                                        } catch (e) {\r\n                                            dates = [];\r\n                                        }\r\n                                        if (e.target.checked && dates.indexOf(i) === -1) {\r\n                                            dates.push(i);\r\n                                        } else if (!e.target.checked && dates.indexOf(i) !== -1) {\r\n                                            dates.splice(dates.indexOf(i), 1);\r\n                                        }\r\n                                        dates.sort((a, b) => a - b);\r\n                                        _schedule.period.dates = JSON.stringify(dates);\r\n                                        this.onChange(_schedule);\r\n                                    }}\r\n                          />\r\n                      } label={i < 10 ? [(<span key=\"0\" style={{opacity: 0}}>0</span>), (<span key=\"num\">{i}</span>)] : i}\r\n                />))}\r\n            </FormGroup>);\r\n    }\r\n\r\n    getPeriodSettingsMonthly() {\r\n        if (!this.state.schedule.period.months) {\r\n            return;\r\n        }\r\n        const schedule = this.state.schedule;\r\n        const parsedMonths = typeof schedule.period.months === 'string' ? JSON.parse(schedule.period.months)  : [];\r\n\r\n        return [\r\n            (<div key=\"every\"><FormControlLabel control={(<Radio className={this.props.classes.inputRadio} checked={typeof schedule.period.months === 'number' && schedule.period.months === 1} onClick={() => {\r\n                                        const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                        _schedule.period.months = 1;\r\n                                        this.onChange(schedule);\r\n                                    }}/>)\r\n                                    }\r\n                                    label={I18n.t('sch_periodEveryMonth')} /></div>),\r\n            (<div key=\"everyN\"><FormControlLabel control={(<Radio className={this.props.classes.inputRadio} checked={typeof schedule.period.months === 'number' && schedule.period.months > 1} onClick={() => {\r\n                                        const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                        _schedule.period.months = 2;\r\n                                        this.onChange(_schedule);\r\n                                    }}/>)\r\n                                    }\r\n                                    label={I18n.t('sch_periodEvery')} />\r\n                {typeof schedule.period.months === 'number' && schedule.period.months > 1 && [(<Input value={schedule.period.months} className={this.props.classes.inputEvery} type=\"number\" min=\"2\" onChange={e => {\r\n                    const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                    _schedule.period.months = parseInt(e.target.value, 10);\r\n                    this.onChange(_schedule);\r\n                }} />), (<span>{I18n.t('sch_periodMonth')}</span>)]}\r\n            </div>),\r\n            (<div  key=\"specific\" style={{verticalAlign: 'top'}}><FormControlLabel style={{verticalAlign: 'top'}} control={(<Radio className={this.props.classes.inputRadio} checked={typeof schedule.period.months === 'string'} onClick={() => {\r\n                                        const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                        _schedule.period.months = '[1,2,3,4,5,6,7,8,9,10,11,12]';\r\n                                        this.onChange(_schedule);\r\n                                    }}/>)\r\n                                    }\r\n                                    label={I18n.t('sch_periodSpecificMonths')} />\r\n                {typeof schedule.period.months === 'string' &&\r\n                (<FormGroup row className={this.props.classes.inputGroup}>\r\n                    <FormControlLabel className={this.props.classes.inputDateDay}\r\n                                      control={\r\n                                          <Checkbox className={this.props.classes.inputDateDayCheck} checked={parsedMonths.length === 12}\r\n                                                    onChange={e => {\r\n                                                        const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                                        const months = [];\r\n                                                        for (let i = 1; i <= 12; i++) {\r\n                                                            months.push(i);\r\n                                                        }\r\n                                                        _schedule.period.months = JSON.stringify(months);\r\n                                                        this.onChange(_schedule);\r\n                                                    }}\r\n                                          />\r\n                                      } label={I18n.t('sch_all')}\r\n                    />\r\n                    <FormControlLabel className={this.props.classes.inputDateDay}\r\n                                      control={\r\n                                          <Checkbox className={this.props.classes.inputDateDayCheck} checked={!parsedMonths.length}\r\n                                                    onChange={e => {\r\n                                                        const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                                        _schedule.period.months = '[]';\r\n                                                        this.onChange(_schedule);\r\n                                                    }}\r\n                                          />\r\n                                      } label={I18n.t('sch_no_one')}\r\n                    />\r\n                    {parsedMonths.length !== 12 && !!parsedMonths.length && (<FormControlLabel className={this.props.classes.inputDateDay}\r\n                                                                                             control={\r\n                                                                                                 <Checkbox className={this.props.classes.inputDateDayCheck} checked={false}\r\n                                                                                                           onChange={e => {\r\n                                                                                                               const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                                                                                               const result = [];\r\n                                                                                                               const parsedMonths = JSON.parse(_schedule.period.months);\r\n                                                                                                               for (let i = 1; i <= 12; i++) {\r\n                                                                                                                   if (parsedMonths.indexOf(i) === -1) {\r\n                                                                                                                       result.push(i);\r\n                                                                                                                   }\r\n                                                                                                               }\r\n                                                                                                               result.sort((a, b) => a - b);\r\n                                                                                                               _schedule.period.months = JSON.stringify(result);\r\n                                                                                                               this.onChange(_schedule);\r\n                                                                                                           }}\r\n                                                                                                 />\r\n                                                                                             } label={I18n.t('sch_invert')}\r\n                    />)}\r\n                    <div/>\r\n                    {MONTHS.map((month, i) => (<FormControlLabel className={this.props.classes.inputGroupElement}\r\n                        control={\r\n                            <Checkbox className={this.props.classes.inputSmallCheck} checked={JSON.parse(schedule.period.months).indexOf(i + 1) !== -1}\r\n                                      onChange={e => {\r\n                                          const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                          let months;\r\n                                          try {\r\n                                              months = JSON.parse(_schedule.period.months);\r\n                                          } catch (e) {\r\n                                              months = [];\r\n                                          }\r\n                                          if (e.target.checked && months.indexOf(i + 1) === -1) {\r\n                                              months.push(i + 1);\r\n                                          } else if (!e.target.checked && months.indexOf(i + 1) !== -1) {\r\n                                              months.splice(months.indexOf(i + 1), 1);\r\n                                          }\r\n                                          months.sort((a, b) => a - b);\r\n                                          _schedule.period.months = JSON.stringify(months);\r\n                                          this.onChange(_schedule);\r\n                                      }}\r\n                            />\r\n                        }\r\n                        label={I18n.t(month)}\r\n                    />))}\r\n                </FormGroup>)}\r\n            </div>),\r\n        ];\r\n    }\r\n\r\n    getPeriodSettingsYearly() {\r\n        if (!this.state.schedule.period.years) {\r\n            return;\r\n        }\r\n        const schedule = this.state.schedule;\r\n        return [\r\n            (<div><FormControlLabel control={(<Radio className={this.props.classes.inputRadio} checked={schedule.period.years === 1} onClick={() => {\r\n                                        const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                        _schedule.period.years = 1;\r\n                                        this.onChange(_schedule);\r\n                                    }}/>)\r\n                                    }\r\n                                    label={I18n.t('sch_periodEveryYear')} /></div>),\r\n            (<div><FormControlLabel control={(<Radio className={this.props.classes.inputRadio} checked={schedule.period.years > 1} onClick={() => {\r\n                                        const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                        _schedule.period.years = 2;\r\n                                        this.onChange(_schedule);\r\n                                    }}/>)\r\n                                    }\r\n                                    label={I18n.t('sch_periodEvery')} />\r\n                {schedule.period.years > 1 && [(<Input value={this.state.schedule.period.years} className={this.props.classes.inputEvery} type=\"number\" min=\"2\" onChange={e => {\r\n                    const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                    _schedule.period.years = parseInt(e.target.value, 10);\r\n                    this.onChange(_schedule);\r\n                }} />), (<span>{I18n.t('sch_periodYear')}</span>)]}\r\n            </div>),\r\n        ];\r\n    }\r\n\r\n    now2string(isEnd) {\r\n        const d = new Date();\r\n        d.setHours(0);\r\n        d.setMinutes(0);\r\n        d.setSeconds(0);\r\n        d.setMilliseconds(0);\r\n        if (isEnd) {\r\n            d.setDate(d.getDate() + 2);\r\n            d.setMilliseconds(d.getMilliseconds() - 1);\r\n        }\r\n\r\n        return padding(d.getDate()) + '.' + padding(d.getMonth() + 1) + '.' + padding(d.getFullYear());\r\n    }\r\n\r\n    string2date(str) {\r\n        let parts = str.split('.'); // 31.12.2019\r\n        if (parts.length === 1) {\r\n            parts = str.split('-'); // 2018-12-31\r\n            return new Date(parseInt(parts[0], 10), parseInt(parts[1], 10) - 1, parseInt(parts[2], 10));\r\n        } else {\r\n            return new Date(parseInt(parts[2], 10), parseInt(parts[1], 10) - 1, parseInt(parts[0], 10));\r\n        }\r\n    }\r\n\r\n    getValidSettings() {\r\n        const schedule = this.state.schedule;\r\n        // ----- from ---\r\n        return (\r\n            <div className={this.props.classes.rowDiv}>\r\n                <div className={this.props.classes.modeDiv} style={{verticalAlign: 'middle'}}>\r\n                    <span style={{fontWeight: 'bold', paddingRight: 10}}>{I18n.t('sch_valid')}</span>\r\n                    <span>{I18n.t('sch_validFrom')}</span>\r\n                </div>\r\n                <div className={this.props.classes.settingsDiv}>\r\n                    <TextField\r\n                        className={this.props.classes.inputDate}\r\n                        style={{marginRight: 10}}\r\n                        key=\"exactTimeFrom\"\r\n                        value={string2USdate(schedule.valid.from)}\r\n                        type=\"date\"\r\n                        //inputComponent={TextDate}\r\n                        onChange={e => {\r\n                            const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                            const date = this.string2date(e.target.value);\r\n                            _schedule.valid.from = padding(date.getDate()) + '.' + padding(date.getMonth() + 1) + '.' + date.getFullYear();\r\n                            this.onChange(_schedule);\r\n                        }}\r\n                        InputLabelProps={{shrink: true,}}\r\n                        margin=\"normal\"\r\n                    />\r\n                    <FormControlLabel control={(<Checkbox className={this.props.classes.inputRadio} checked={!!schedule.valid.to} onClick={() => {\r\n                        const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                        _schedule.valid.to = _schedule.valid.to ? '' : this.now2string(true);\r\n                        this.onChange(_schedule);\r\n                    }}/>)}\r\n                        label={I18n.t('sch_validTo')} />\r\n                        {!!schedule.valid.to && (\r\n                            <TextField\r\n                                className={this.props.classes.inputDate}\r\n                                style={{marginRight: 10}}\r\n                                key=\"exactTimeFrom\"\r\n                                type=\"date\"\r\n                                value={string2USdate(schedule.valid.to)}\r\n                                //inputComponent={TextDate}\r\n                                onChange={e => {\r\n                                    const _schedule = JSON.parse(JSON.stringify(this.state.schedule));\r\n                                    const date = this.string2date(e.target.value);\r\n                                    _schedule.valid.to = padding(date.getDate()) + '.' + padding(date.getMonth() + 1) + '.' + date.getFullYear();\r\n                                    this.onChange(_schedule);\r\n                                }}\r\n                                InputLabelProps={{shrink: true,}}\r\n                                margin=\"normal\"\r\n                            />)}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (<div style={{height: 'calc(100% - 48px)', width: '100%', overflow: 'hidden'}}>\r\n            <div>{this.state.desc}</div>\r\n            <div className={this.props.classes.scrollWindow}>\r\n                <h5>{I18n.t('sch_time')}</h5>\r\n                {this.getTimePeriodElements()}\r\n                {this.getTimeExactElements()}\r\n                {this.getDivider()}\r\n                <h5>{I18n.t('sch_period')}</h5>\r\n                {this.getPeriodModes()}\r\n                {!this.state.schedule.period.once && this.getDivider()}\r\n                {!this.state.schedule.period.once && this.getValidSettings()}\r\n            </div>\r\n        </div>);\r\n    }\r\n}\r\n\r\nSchedule.propTypes = {\r\n    schedule: PropTypes.string,\r\n    onChange: PropTypes.func\r\n};\r\n\r\nexport default withStyles(styles)(Schedule);\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles/index';\r\nimport Button from '@material-ui/core/Button';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Radio from '@material-ui/core/Radio';\r\n\r\nimport ComplexCron from '../Components/ComplexCron';\r\nimport SimpleCron from '../Components/simple-cron/SimpleCron';\r\nimport Schedule from '../Components/Schedule';\r\n\r\nimport I18n from '../i18n';\r\n\r\n// Generate cron expression\r\n\r\nconst styles = theme => ({\r\n    headerID: {\r\n        fontWeight: 'bold',\r\n        fontStyle: 'italic'\r\n    },\r\n    radio: {\r\n        display: 'inline-block'\r\n    },\r\n    dialogPaper: {\r\n        height: 'calc(100% - 96px)'\r\n    }\r\n});\r\n\r\nclass DialogCron extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let cron;\r\n        if (this.props.cron && typeof this.props.cron === 'string' && this.props.cron.replace(/^[\"']/, '')[0] !== '{') {\r\n            cron = this.props.cron.replace(/['\"]/g, '').trim();\r\n        } else {\r\n            cron = this.props.cron || '{}';\r\n            if (typeof cron === 'string') {\r\n                cron = cron.replace(/^[\"']/, '').replace(/[\"']\\n?$/, '');\r\n            }\r\n        }\r\n\r\n        this.state =  {\r\n            cron,\r\n            mode: this.props.simple ?\r\n                'simple' :\r\n                (typeof cron === 'object' || cron[0] === '{' ?\r\n                    'wizard' :\r\n                    (SimpleCron.cron2state(this.props.cron || '* * * * *') ? 'simple' : 'complex'))\r\n        };\r\n    }\r\n\r\n    handleCancel() {\r\n        this.props.onClose();\r\n    }\r\n\r\n    handleOk() {\r\n        this.props.onOk(this.state.cron);\r\n        this.props.onClose();\r\n    }\r\n\r\n    setMode(mode) {\r\n        this.setState({mode});\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Dialog\r\n                disableBackdropClick\r\n                disableEscapeKeyDown\r\n                maxWidth=\"md\"\r\n                fullWidth={true}\r\n                classes={{paper: this.props.classes.dialogPaper}}\r\n                open={true}\r\n                aria-labelledby=\"cron-dialog-title\"\r\n            >\r\n                <DialogTitle id=\"cron-dialog-title\">{this.props.title || I18n.t('Define schedule...')}</DialogTitle>\r\n                <DialogContent style={{height: '100%', overflow: 'hidden'}}>\r\n                    {!this.props.simple && (<div>\r\n                        <Radio\r\n                            key=\"wizard\"\r\n                            checked={this.state.mode === 'wizard'}\r\n                            onChange={e => this.setMode('wizard')}\r\n                        /><label onClick={e => this.setMode('wizard')}\r\n                                 style={this.state.mode !== 'wizard' ? {color: 'lightgrey'} : {}}>{I18n.t('sc_wizard')}</label>\r\n\r\n                        <Radio\r\n                            key=\"simple\"\r\n                            checked={this.state.mode === 'simple'}\r\n                            onChange={e => this.setMode('simple')}\r\n                        /><label onClick={e => this.setMode('simple')}\r\n                                 style={this.state.mode !== 'simple' ? {color: 'lightgrey'} : {}}>{I18n.t('sc_simple')}</label>\r\n                        <Radio\r\n                            key=\"complex\"\r\n                            checked={this.state.mode === 'complex'}\r\n                            onChange={e => this.setMode('complex')}\r\n                        /><label onClick={e => this.setMode('complex')} style={this.state.mode !== 'complex' ? {color: 'lightgrey'} : {}}>{I18n.t('sc_cron')}</label></div>)}\r\n\r\n                    {this.state.mode === 'simple' &&\r\n                        (<SimpleCron\r\n                            cronExpression={this.state.cron}\r\n                            onChange={cron => this.setState({cron})}\r\n                            language={I18n.getLanguage()}\r\n                        />)}\r\n                    {this.state.mode === 'wizard' &&\r\n                        (<Schedule\r\n                            schedule={this.state.cron}\r\n                            onChange={cron => this.setState({cron})}\r\n                            language={I18n.getLanguage()}\r\n                        />)}\r\n                    {this.state.mode === 'complex' &&\r\n                        (<ComplexCron\r\n                            cronExpression={this.state.cron}\r\n                            onChange={cron => this.setState({cron})}\r\n                            language={I18n.getLanguage()}\r\n                        />)}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => this.handleOk()}     color=\"primary\">{this.props.ok || I18n.t('Ok')}</Button>\r\n                    <Button onClick={() => this.handleCancel()} color=\"secondary\">{this.props.cancel || I18n.t('Cancel')}</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nDialogCron.propTypes = {\r\n    classes: PropTypes.object,\r\n    onClose: PropTypes.func,\r\n    onOk: PropTypes.func.isRequire,\r\n    title: PropTypes.string,\r\n    cron: PropTypes.string,\r\n    cancel: PropTypes.string,\r\n    ok: PropTypes.string,\r\n    simple: PropTypes.bool,\r\n    language: PropTypes.string\r\n\r\n};\r\n\r\nexport default withStyles(styles)(DialogCron);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Dialog from '@material-ui/core/Dialog';\r\n\r\nimport ScriptEditorComponent from '../Components/ScriptEditorVanilaMonaco';\r\n\r\nimport I18n from '../i18n';\r\n\r\nconst styles = theme => ({\r\n    textArea: {\r\n        width: 'calc(100% - 10px)',\r\n        resize: 'none'\r\n    },\r\n    dialog: {\r\n        height: '95%'\r\n    },\r\n    fullHeight: {\r\n        height: '100%',\r\n        overflow: 'hidden'\r\n    },\r\n    args: {\r\n        color: theme.palette.type === 'dark' ? 'white' : 'black',\r\n        height: 30,\r\n        width: '100%',\r\n        fontSize: 16\r\n    },\r\n    argsTitle: {\r\n        color: theme.palette.type === 'dark' ? 'white' : 'black',\r\n        fontWeight: 'bold'\r\n    }\r\n});\r\n\r\nclass DialogScriptEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            source: this.props.source,\r\n        };\r\n        if (!this.state.source && this.props.isReturn) {\r\n            this.state.source = '\\nreturn false';\r\n        }\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        setTimeout(() => {\r\n            try {\r\n                window.document.getElementById('source-text-area').focus();\r\n            } catch (e) {\r\n\r\n            }\r\n        }, 100);\r\n    }\r\n\r\n    handleCancel () {\r\n        this.props.onClose(false);\r\n    }\r\n\r\n    handleOk () {\r\n        if (this.props.isReturn && this.state.source.indexOf('return ') === -1) {\r\n\r\n        } else {\r\n            this.props.onClose(this.state.source);\r\n        }\r\n    }\r\n\r\n    onChange(value) {\r\n        this.setState({source: value});\r\n    }\r\n\r\n    render() {\r\n        const classes = this.props.classes;\r\n\r\n        return (\r\n            <Dialog\r\n                disableBackdropClick\r\n                disableEscapeKeyDown\r\n                maxWidth=\"lg\"\r\n                classes={{paper: classes.dialog}}\r\n                fullWidth={true}\r\n                open={true}\r\n                aria-labelledby=\"source-dialog-title\"\r\n            >\r\n                <DialogTitle id=\"source-dialog-title\">{I18n.t('Function editor')}</DialogTitle>\r\n                <DialogContent className={classes.fullHeight}>\r\n                    {this.props.args && (<div key=\"arguments\" className={classes.args}>\r\n                        <span className={classes.argsTitle}>{I18n.t('function (')}</span>\r\n                        {this.props.args}\r\n                        <span className={classes.argsTitle}>)</span>\r\n                    </div>)}\r\n                    <ScriptEditorComponent\r\n                        className={classes.textArea}\r\n                        style={{height: this.props.args ? 'calc(100% - 30px)' : '100%'}}\r\n                        key=\"scriptEditor\"\r\n                        name={'blockly'}\r\n                        connection={this.props.connection}\r\n                        readOnly={false}\r\n                        checkJs={false}\r\n                        code={this.state.source}\r\n                        isDark={this.props.theme === 'dark'}\r\n                        onChange={newValue => this.onChange(newValue)}\r\n                        language={'javascript'}\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={event => this.handleOk()} color=\"primary\">{I18n.t('Save')}</Button>\r\n                    <Button onClick={event => this.handleCancel()} color=\"secondary\">{I18n.t('Cancel')}</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nDialogScriptEditor.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    onClose: PropTypes.func,\r\n    source: PropTypes.string,\r\n    args: PropTypes.string,\r\n    isReturn: PropTypes.bool,\r\n    theme: PropTypes.string,\r\n    connection: PropTypes.object\r\n};\r\n\r\nexport default withStyles(styles)(DialogScriptEditor);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nimport {MdSave as IconSave} from 'react-icons/md';\r\nimport {MdCancel as IconCancel} from 'react-icons/md';\r\nimport {MdClose as IconClose} from 'react-icons/md';\r\nimport {MdRefresh as IconRestart} from 'react-icons/md';\r\nimport {MdInput as IconDoEdit} from 'react-icons/md';\r\nimport {FaClock as IconCron} from 'react-icons/fa';\r\nimport {FaClipboardList as IconSelectId} from 'react-icons/fa';\r\nimport {FaFileExport as IconExport} from 'react-icons/fa';\r\nimport {FaFileImport as IconImport} from 'react-icons/fa';\r\nimport {FaFlagCheckered as IconCheck} from 'react-icons/fa';\r\nimport {MdGpsFixed as IconLocate} from 'react-icons/md';\r\n\r\nimport ImgJS from './assets/js.png';\r\nimport ImgBlockly from './assets/blockly.png';\r\nimport ImgTypeScript from './assets/typescript.png';\r\nimport ImgBlockly2Js from './assets/blockly2js.png'\r\n\r\nimport I18n from './i18n';\r\nimport Theme from './Theme';\r\nimport ScriptEditor from './Components/ScriptEditorVanilaMonaco';\r\nimport BlocklyEditor from './Components/BlocklyEditor';\r\nimport DialogConfirm from './Dialogs/Confirmation';\r\nimport DialogSelectID from './Dialogs/SelectID';\r\nimport DialogCron from './Dialogs/Cron';\r\nimport DialogScriptEditor from './Dialogs/ScriptEditor';\r\n\r\nconst images = {\r\n    'Blockly': ImgBlockly,\r\n    'Javascript/js': ImgJS,\r\n    def: ImgJS,\r\n    'TypeScript/ts': ImgTypeScript,\r\n};\r\n\r\nconst styles = theme => ({\r\n    toolbar: {\r\n        minHeight: 38,//Theme.toolbar.height,\r\n        boxShadow: '0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12)'\r\n    },\r\n    toolbarButtons: {\r\n        padding: 4,\r\n        marginLeft: 4\r\n    },\r\n    editorDiv: {\r\n        height: `calc(100% - ${Theme.toolbar.height + 38/*Theme.toolbar.height */ + 1}px)`,\r\n        width: '100%',\r\n        overflow: 'hidden',\r\n        position: 'relative'\r\n    },\r\n    textButton: {\r\n        marginRight: 10,\r\n        minHeight: 24,\r\n        padding: '6px 16px'\r\n    },\r\n    tabIcon: {\r\n        width: 24,\r\n        height: 24,\r\n        verticalAlign: 'middle',\r\n        marginBottom: 2,\r\n        marginRight: 2,\r\n        borderRadius: 3\r\n    },\r\n    hintIcon: {\r\n        //fontSize: 32,\r\n        padding: '0 8px 0 8px'\r\n    },\r\n    hintText: {\r\n        //fontSize: 18\r\n    },\r\n    hintButton: {\r\n        marginTop: 8,\r\n        marginLeft: 10\r\n    },\r\n    tabChanged: {\r\n        color: theme.palette.secondary.main\r\n    },\r\n    tabText: {\r\n        maxWidth: 160,\r\n        textOverflow: 'ellipsis',\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n    },\r\n    tabChangedIcon: {\r\n        color: '#FF0000',\r\n        fontSize: 16\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        top: 8,\r\n        right: 0,\r\n        zIndex: 10,\r\n        padding: 8,\r\n        cursor: 'pointer'\r\n    },\r\n    notRunning: {\r\n        color: '#ffbc00'\r\n    },\r\n    tabButton: {\r\n\r\n    }\r\n});\r\n\r\nclass Editor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const selected = window.localStorage.getItem('Editor.selected') || '';\r\n        let editing = window.localStorage.getItem('Editor.editing') || '[]';\r\n        try {\r\n            editing = JSON.parse(editing);\r\n        } catch (e) {\r\n            editing = [];\r\n        }\r\n        if (selected && editing.indexOf(selected) === -1) {\r\n            editing.push(selected);\r\n        }\r\n\r\n        this.tabsRef = React.createRef();\r\n\r\n        this.state = {\r\n            selected: selected,\r\n            editing: editing, // array of opened scripts\r\n            changed: false,\r\n            blockly: null,\r\n            showBlocklyCode: false,\r\n            showSelectId: false,\r\n            showCron: false,\r\n            showScript: false,\r\n            insert: '',\r\n            searchText: '',\r\n            theme: this.props.theme,\r\n            visible: props.visible,\r\n            cmdToBlockly: '',\r\n            menuOpened: !!this.props.menuOpened,\r\n            runningInstances: this.props.runningInstances || {}\r\n        };\r\n        /* ----------------------- */\r\n        // required by selectIdDialog in Blockly\r\n        this.selectId = {\r\n            initValue: null,\r\n            callback: null\r\n        };\r\n        this.cron = {\r\n            initValue: null,\r\n            callback: null\r\n        };\r\n        this.scriptDialog = {\r\n            initValue: null,\r\n            callback: null,\r\n            args: null,\r\n            isReturn: false\r\n        };\r\n\r\n        const instances = [];\r\n        if (this.props.objects) {\r\n            for (let id in this.props.objects) {\r\n                if (this.props.objects.hasOwnProperty(id) && id.startsWith('system.adapter.') && this.props.objects[id] && this.props.objects[id].type === 'instance') {\r\n                    instances.push(id);\r\n                }\r\n            }\r\n        }\r\n\r\n        window.systemLang = I18n.getLanguage();\r\n        window.main = {\r\n            objects: this.props.objects,\r\n            instances,\r\n            selectIdDialog: (initValue, cb) => {\r\n                this.selectId.callback = cb;\r\n                this.selectId.initValue = initValue;\r\n                this.setState({showSelectId: true});\r\n            },\r\n            cronDialog: (initValue, cb) => {\r\n                this.cron.callback = cb;\r\n                this.cron.initValue = initValue;\r\n                this.setState({showCron: true});\r\n            },\r\n            showScriptDialog: (value, args, isReturn, cb) => {\r\n                this.scriptDialog.callback = cb;\r\n                this.scriptDialog.initValue = value;\r\n                this.scriptDialog.args = args;\r\n                this.scriptDialog.isReturn = isReturn || false;\r\n                this.setState({showScript: true});\r\n            }\r\n        };\r\n        this.objects = props.objects;\r\n        /* ----------------------- */\r\n\r\n        this.scripts = {};\r\n\r\n        if (!this.state.selected && this.state.editing.length) {\r\n            this.state.selected = this.state.editing[0];\r\n        }\r\n\r\n        // to enable logging\r\n        if (this.props.onSelectedChange && this.state.selected) {\r\n            setTimeout(() => this.props.onSelectedChange(this.state.selected, this.state.editing), 100);\r\n        }\r\n        this.onBrowserCloseBound = this.onBrowserClose.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('beforeunload', this.onBrowserCloseBound, false);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('beforeunload', this.onBrowserCloseBound);\r\n    }\r\n\r\n    onBrowserClose(e) {\r\n        const isChanged = Object.keys(this.scripts).find(id =>\r\n            JSON.stringify(this.scripts[id]) !== JSON.stringify(this.props.objects[id].common));\r\n\r\n        if (!!isChanged) {\r\n            console.log('Script ' + console.log('Script ' + JSON.stringify(this.scripts[isChanged])));\r\n            const message = I18n.t('Configuration not saved.');\r\n            e = e || window.event;\r\n            // For IE and Firefox\r\n            if (e) {\r\n                e.returnValue = message;\r\n            }\r\n\r\n            // For Safari\r\n            return message;\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        const newState = {};\r\n        let _changed = false;\r\n        if (JSON.stringify(nextProps.runningInstances) !== JSON.stringify(this.state.runningInstances)) {\r\n            _changed = true;\r\n            newState.runningInstances = nextProps.runningInstances;\r\n        }\r\n\r\n        if (this.state.menuOpened !== nextProps.menuOpened) {\r\n            newState.menuOpened = nextProps.menuOpened;\r\n            _changed = true;\r\n        }\r\n\r\n        if (this.state.theme !== nextProps.theme) {\r\n            newState.theme = nextProps.theme;\r\n            _changed = true;\r\n        }\r\n\r\n        // check if all opened files still exists\r\n        if (this.state.editing && nextProps.objects['system.config']) {\r\n            const isAnyNonExists = this.state.editing.find(id => !nextProps.objects[id]);\r\n\r\n            if (isAnyNonExists) {\r\n                // remove non-existing scripts\r\n                const editing = JSON.parse(JSON.stringify(this.state.editing));\r\n                for (let i = editing.length - 1; i >= 0; i--) {\r\n                    if (!this.objects[editing[i]]) {\r\n                        _changed = true;\r\n                        editing.splice(i, 1);\r\n                    }\r\n                }\r\n                if (_changed) {\r\n                    newState.editing = editing;\r\n                }\r\n                if (this.state.selected && !this.objects[this.state.selected]) {\r\n                    _changed = true;\r\n                    newState.selected = editing[0] || '';\r\n                    if (this.scripts[newState.selected] && this.state.blockly !== (this.scripts[newState.selected].engineType === 'Blockly')) {\r\n                        newState.blockly = this.scripts[newState.selected].engineType === 'Blockly';\r\n                        _changed = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // update search text\r\n        if (this.state.searchText !== nextProps.searchText) {\r\n            newState.searchText = nextProps.searchText;\r\n            _changed = true;\r\n        }\r\n\r\n        // if objects read\r\n        if (this.objects !== nextProps.objects) {\r\n            this.objects = nextProps.objects;\r\n            window.main.objects = nextProps.objects;\r\n\r\n            // update all scripts\r\n            for (const id in this.scripts) {\r\n                if (!this.scripts.hasOwnProperty(id)) continue;\r\n                const source = this.scripts[id].source;\r\n                this.scripts[id] = JSON.parse(JSON.stringify(this.objects[id].common));\r\n                this.scripts[id].source = source;\r\n            }\r\n\r\n            const instances = [];\r\n            for (let id in window.main.objects) {\r\n                if (window.main.objects.hasOwnProperty(id) && id.startsWith('system.adapter.') && window.main.objects[id] && window.main.objects[id].type === 'instance') {\r\n                    instances.push(id);\r\n                }\r\n            }\r\n            window.main.instances = instances;\r\n\r\n            // if script is blockly\r\n            if (this.state.selected && this.objects[this.state.selected]) {\r\n                this.scripts[this.state.selected] = this.scripts[this.state.selected] || JSON.parse(JSON.stringify(this.objects[this.state.selected].common));\r\n                if (this.state.blockly !== (this.scripts[this.state.selected].engineType === 'Blockly')) {\r\n                    newState.blockly = this.scripts[this.state.selected].engineType === 'Blockly';\r\n                    _changed = true;\r\n                }\r\n            }\r\n\r\n            // remove non-existing scripts\r\n            const editing = JSON.parse(JSON.stringify(this.state.editing));\r\n            for (let i = editing.length - 1; i >= 0; i--) {\r\n                if (!this.objects[editing[i]]) {\r\n                    _changed = true;\r\n                    editing.splice(i, 1);\r\n                }\r\n            }\r\n            if (this.state.selected && !this.objects[this.state.selected]) {\r\n                newState.selected = editing[0] || '';\r\n            }\r\n            if (_changed) {\r\n                newState.editing = editing;\r\n            }\r\n        } else {\r\n            // update all scripts\r\n            for (const id in this.scripts) {\r\n                if (!this.scripts.hasOwnProperty(id)) continue;\r\n                if (this.objects[id] && this.objects[id].common) {\r\n                    const source = this.scripts[id].source;\r\n                    const commonLocal = JSON.parse(JSON.stringify(this.scripts[id]));\r\n                    commonLocal.source = this.objects[id].common.source;\r\n                    if (JSON.stringify(commonLocal) !== JSON.stringify(this.objects[id].common)) {\r\n                        this.scripts[id] = JSON.parse(JSON.stringify(this.objects[id].common));\r\n                        this.scripts[id].source = source;\r\n                    }\r\n\r\n                    if (id === nextProps.selected) {\r\n                        if (this.scripts[id].source !== this.objects[id].common.source) {\r\n                            if (!this.state.changed) {\r\n                                newState.changed = true;\r\n                                _changed = true;\r\n                            }\r\n                        } else {\r\n                            if (this.state.changed) {\r\n                                newState.changed = false;\r\n                                _changed = true;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                } else {\r\n                    delete this.scripts[id];\r\n                    if (this.state.selected === id) {\r\n                        if (this.state.editing.indexOf(id) !== -1) {\r\n                            const editing = JSON.parse(JSON.stringify(this.state.editing));\r\n                            const pos = editing.indexOf(id);\r\n                            if (id !== -1) {\r\n                                editing.splice(pos, 1);\r\n                                newState.editing = editing;\r\n                                _changed = true;\r\n                            }\r\n                        }\r\n                        newState.selected = this.state.editing[0] || '';\r\n                        _changed = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.state.selected !== nextProps.selected && nextProps.selected) {\r\n            if (nextProps.selected) {\r\n                this.scripts[nextProps.selected] = this.scripts[nextProps.selected] || JSON.parse(JSON.stringify(this.props.objects[nextProps.selected].common));\r\n            }\r\n\r\n            const nextCommon = this.props.objects[nextProps.selected] && this.props.objects[nextProps.selected].common;\r\n\r\n            const changed = nextCommon && JSON.stringify(this.scripts[nextProps.selected]) !== JSON.stringify(nextCommon);\r\n\r\n            const editing = JSON.parse(JSON.stringify(this.state.editing));\r\n            if (nextProps.selected && editing.indexOf(nextProps.selected) === -1) {\r\n                editing.push(nextProps.selected);\r\n                this.props.onSelectedChange(nextProps.selected, editing);\r\n                window.localStorage && window.localStorage.setItem('Editor.editing', JSON.stringify(editing));\r\n            }\r\n\r\n            _changed = true;\r\n            newState.changed = changed;\r\n            newState.editing = editing;\r\n            newState.selected = nextProps.selected;\r\n            newState.blockly = this.scripts[nextProps.selected].engineType === 'Blockly';\r\n            newState.showBlocklyCode = false;\r\n        } else {\r\n\r\n        }\r\n\r\n        if (this.state.visible !== nextProps.visible) {\r\n            _changed = true;\r\n            newState.visible = nextProps.visible;\r\n        }\r\n        _changed && this.setState(newState);\r\n    }\r\n\r\n    onRestart() {\r\n        this.props.onRestart && this.props.onRestart(this.state.selected);\r\n    }\r\n\r\n    onSave() {\r\n        if (this.state.changed) {\r\n            this.setState({changed: false}, () =>\r\n                this.props.onChange && this.props.onChange(this.state.selected, this.scripts[this.state.selected]));\r\n        }\r\n    }\r\n\r\n    onCancel() {\r\n        this.scripts[this.state.selected] = JSON.parse(JSON.stringify(this.props.objects[this.state.selected].common));\r\n        this.setState({changed: false});\r\n    }\r\n\r\n    onRegisterSelect(func) {\r\n        this.getSelect = func;\r\n    }\r\n\r\n    onConvert2JS() {\r\n        this.showConfirmDialog(I18n.t('It will not be possible to revert this operation.'), result => {\r\n            if (result) {\r\n                this.scripts[this.state.selected].engineType = 'Javascript/js';\r\n                let source = this.scripts[this.state.selected].source;\r\n                const lines = source.split('\\n');\r\n                lines.pop();\r\n                this.scripts[this.state.selected].source = lines.join('\\n');\r\n                const nowSelected = this.state.selected;\r\n                this.setState({changed: true, blockly: false, selected: ''}, () => {\r\n                    // force update of the editor\r\n                    setTimeout(() => this.setState({selected: nowSelected}), 100);\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    onChange(newValue) {\r\n        this.scripts[this.state.selected].source = newValue;\r\n        const changed = JSON.stringify(this.scripts[this.state.selected]) !== JSON.stringify(this.props.objects[this.state.selected].common);\r\n        if (changed !== this.state.changed) {\r\n            this.setState({changed});\r\n        }\r\n    }\r\n\r\n    onTabChange(event, selected) {\r\n        window.localStorage && window.localStorage.setItem('Editor.selected', selected);\r\n        const common = this.scripts[selected] || (this.props.objects[selected] && this.props.objects[selected].common);\r\n        this.setState({selected, blockly: common.engineType === 'Blockly', showBlocklyCode: false});\r\n        this.props.onSelectedChange && this.props.onSelectedChange(selected, this.state.editing);\r\n    }\r\n\r\n    isScriptChanged(id) {\r\n        return this.scripts[id] && this.props.objects[id] && JSON.stringify(this.scripts[id]) !== JSON.stringify(this.props.objects[id].common);\r\n    }\r\n\r\n    onTabClose(id, e) {\r\n        e && e.stopPropagation();\r\n\r\n        const pos = this.state.editing.indexOf(id);\r\n        if (this.state.editing.indexOf(id) !== -1) {\r\n            if (this.isScriptChanged(id)) {\r\n                this.showConfirmDialog(I18n.t('Discard changes for %s', this.props.objects[id].common.name), ok => {\r\n                    if (ok) {\r\n                        delete this.scripts[id];\r\n                        this.onTabClose(id);\r\n                    }\r\n                });\r\n            } else {\r\n                const editing = JSON.parse(JSON.stringify(this.state.editing));\r\n                editing.splice(pos, 1);\r\n                const newState = {editing};\r\n                if (id === this.state.selected) {\r\n                    if (editing.length) {\r\n                        if (pos === 0 || editing.length === 1) {\r\n                            newState.selected = editing[0];\r\n                        } else {\r\n                            newState.selected = editing[pos - 1];\r\n                        }\r\n                    } else {\r\n                        newState.selected = '';\r\n                    }\r\n                } else if (this.state.selected && !editing.length) {\r\n                    newState.selected = '';\r\n                }\r\n                window.localStorage && window.localStorage.setItem('Editor.editing', JSON.stringify(editing));\r\n                if (newState.selected !== undefined) {\r\n                    newState.changed = this.isScriptChanged(newState.selected);\r\n                    const common = newState.selected && (this.scripts[newState.selected] || (this.props.objects[newState.selected] && this.props.objects[newState.selected].common));\r\n                    newState.blockly = common ? common.engineType === 'Blockly' : false;\r\n                    newState.showBlocklyCode = false;\r\n                }\r\n\r\n                this.setState(newState, () =>  {\r\n                    if (newState.selected !== undefined) {\r\n                        this.props.onSelectedChange && this.props.onSelectedChange(newState.selected, this.state.editing);\r\n                        window.localStorage && window.localStorage.setItem('Editor.selected', newState.selected);\r\n                    } else {\r\n                        this.props.onSelectedChange && this.props.onSelectedChange(this.state.selected, this.state.editing);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    showConfirmDialog(question, cb) {\r\n        this.confirmCallback = cb;\r\n        this.setState({confirm: question});\r\n    }\r\n\r\n    sendCommandToBlockly(cmd) {\r\n        this.setState({cmdToBlockly: cmd}, () =>\r\n            setTimeout(() =>\r\n                this.setState({cmdToBlockly: ''}), 200));\r\n    }\r\n\r\n    getTabs() {\r\n        if (this.state.editing.length) {\r\n            return (<Tabs\r\n                    key=\"tabs1\"\r\n                    value={this.state.selected}\r\n                    onChange={(event, value) => this.onTabChange(event, value)}\r\n                    indicatorColor=\"primary\"\r\n                    style={{position: 'relative'}}\r\n                    textColor=\"primary\"\r\n                    scrollable\r\n                    scrollButtons=\"auto\"\r\n                >\r\n                    {this.state.editing.map(id => {\r\n                        if (!this.props.objects[id]) {\r\n                            const label = [\r\n                                (<span key=\"text\" className={this.props.classes.tabText + ' ' + (this.isScriptChanged(id) ? this.props.classes.tabChanged : '')}>{id.split('.').pop()}</span>),\r\n                                (<span key=\"icon\" className={this.props.classes.closeButton}><IconClose key=\"close\" onClick={e => this.onTabClose(id, e)} fontSize=\"small\"/></span>)];\r\n                            return (<Tab component={'div'} key={id} label={label} value={id}/>);\r\n                        } else {\r\n                            let text = this.props.objects[id].common.name;\r\n                            let title = '';\r\n                            if (text.length > 18) {\r\n                                title = text;\r\n                                text = text.substring(0, 15) + '...';\r\n                            }\r\n                            const changed = this.props.objects[id].common && this.scripts[id] && this.props.objects[id].common.source !== this.scripts[id].source;\r\n                            const label = [\r\n                                (<img key=\"icon\" alt={\"\"} src={images[this.props.objects[id].common.engineType] || images.def} className={this.props.classes.tabIcon}/>),\r\n                                (<span key=\"text\" className={this.props.classes.tabText + ' ' + (this.isScriptChanged(id) ? this.props.classes.tabChanged : '')}>{text}</span>),\r\n                                changed ? (<span key=\"changedSign\" className={this.props.classes.tabChangedIcon}>▣</span>) : null,\r\n                                (<span key=\"icon2\" className={this.props.classes.closeButton}><IconClose key=\"close\" onClick={e => this.onTabClose(id, e)} fontSize=\"small\"/></span>)];\r\n\r\n                            return (<Tab component={'div'} key={id} label={label} className={this.props.classes.tabButton} value={id} title={title}/>);\r\n                        }\r\n                    })}\r\n                </Tabs>);\r\n        } else {\r\n            return (<div key=\"tabs2\" className={this.props.classes.toolbar}>\r\n                <Button key=\"select1\" disabled={true} className={this.props.classes.hintButton}>\r\n                    <span key=\"select2\">{I18n.t('Click on this icon')}</span>\r\n                    <IconDoEdit key=\"select3\" className={this.props.classes.hintIcon}/>\r\n                    <span key=\"select4\">{I18n.t('for edit or create script')}</span>\r\n                </Button>\r\n            </div>);\r\n        }\r\n    }\r\n\r\n    getToolbar() {\r\n        const isInstanceRunning = this.state.selected && this.scripts[this.state.selected] && this.scripts[this.state.selected].engine && this.state.runningInstances[this.scripts[this.state.selected].engine];\r\n        const isScriptRunning = this.state.selected && this.scripts[this.state.selected] && this.scripts[this.state.selected].enabled;\r\n\r\n        if (this.state.selected) {\r\n            return (\r\n                <Toolbar variant=\"dense\" className={this.props.classes.toolbar} key=\"toolbar1\">\r\n                    {this.state.menuOpened && this.props.onLocate && (<IconButton className={this.props.classes.toolbarButtons} key=\"locate\" title={I18n.t('Locate file')} onClick={() => this.props.onLocate(this.state.selected)}><IconLocate/></IconButton>)}\r\n                    {!this.state.changed && isInstanceRunning && (<IconButton key=\"restart\" variant=\"contained\" className={this.props.classes.toolbarButtons} onClick={() => this.onRestart()} title={I18n.t('Restart')}><IconRestart /></IconButton>)}\r\n                    {!this.state.changed && !isScriptRunning && (<span className={this.props.classes.notRunning}>{I18n.t('Script is not running')}</span>)}\r\n                    {!this.state.changed && isScriptRunning && !isInstanceRunning && (<span className={this.props.classes.notRunning}>{I18n.t('Instance is disabled')}</span>)}\r\n                    {this.state.changed && (<Button key=\"save\" variant=\"contained\" color=\"secondary\" className={this.props.classes.textButton} onClick={() => this.onSave()}>{I18n.t('Save')}<IconSave /></Button>)}\r\n                    {this.state.changed && (<Button key=\"cancel\" variant=\"contained\" className={this.props.classes.textButton} onClick={() => this.onCancel()}>{I18n.t('Cancel')}<IconCancel /></Button>)}\r\n                    <div style={{flex: 2}}/>\r\n\r\n                    {this.state.blockly && !this.state.showBlocklyCode &&\r\n                        (<IconButton key=\"export\" aria-label=\"Export Blocks\"\r\n                                     title={I18n.t('Export blocks')}\r\n                             className={this.props.classes.toolbarButtons}\r\n                             onClick={() => this.sendCommandToBlockly('export')}>\r\n                        <IconExport /></IconButton>)}\r\n\r\n                    {this.state.blockly && !this.state.showBlocklyCode &&\r\n                        (<IconButton key=\"import\" aria-label=\"Import Blocks\"\r\n                                     title={I18n.t('Import blocks')}\r\n                                     className={this.props.classes.toolbarButtons}\r\n                                     onClick={() => this.sendCommandToBlockly('import')}>\r\n                            <IconImport /></IconButton>)}\r\n\r\n                    {this.state.blockly && !this.state.showBlocklyCode &&\r\n                        (<IconButton key=\"check\" aria-label=\"Check code\"\r\n                                     title={I18n.t('Check blocks')}\r\n                                     className={this.props.classes.toolbarButtons}\r\n                                     onClick={() => this.sendCommandToBlockly('check')}>\r\n                            <IconCheck /></IconButton>)}\r\n\r\n                    {!this.state.blockly && !this.state.showBlocklyCode && (<IconButton key=\"select-cron\" aria-label=\"select ID\"\r\n                                                                                        title={I18n.t('Create or edit CRON or time wizard')}\r\n                                                                                        className={this.props.classes.toolbarButtons}\r\n                                                                                        onClick={() => this.setState({showCron: true})}><IconCron/></IconButton>)}\r\n\r\n                    {!this.state.blockly && !this.state.showBlocklyCode && (<IconButton key=\"select-id\" aria-label=\"select ID\"\r\n                                                                                        title={I18n.t('Insert object ID')}\r\n                                                                                        className={this.props.classes.toolbarButtons}\r\n                                                                                        onClick={() => this.setState({showSelectId: true})}><IconSelectId/></IconButton>)}\r\n\r\n                    {this.state.blockly && this.state.showBlocklyCode && (<Button key=\"convert2js\" aria-label=\"convert to javascript\"\r\n                                                                                  title={I18n.t('Convert blockly to javascript for ever.')}\r\n                                                                                  onClick={() => this.onConvert2JS()}\r\n                    >Blockly=>JS</Button>)}\r\n\r\n                    {this.state.blockly && (<Button key=\"blockly-code\" aria-label=\"blockly\"\r\n                                                    title={I18n.t('Show javascript code')}\r\n                                                    className={this.props.classes.toolbarButtons}\r\n                                                    color={this.state.showBlocklyCode ? 'secondary' : 'inherit'}\r\n                                                    style={{padding: '0 5px'}}\r\n                                                    onClick={() => this.setState({showBlocklyCode: !this.state.showBlocklyCode})}>\r\n                        <img alt=\"blockly2js\" src={ImgBlockly2Js} /></Button>)}\r\n                </Toolbar>);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getScriptEditor() {\r\n        if (this.state.selected && this.props.objects[this.state.selected] && this.state.blockly !== null && (!this.state.blockly || this.state.showBlocklyCode)) {\r\n            this.scripts[this.state.selected] = this.scripts[this.state.selected] || JSON.parse(JSON.stringify(this.props.objects[this.state.selected].common));\r\n\r\n            return (<div className={this.props.classes.editorDiv} key=\"scriptEditorDiv\">\r\n                <ScriptEditor\r\n                    key=\"scriptEditor\"\r\n                    name={this.state.selected}\r\n                    insert={this.state.insert}\r\n                    onInserted={() => this.setState({insert: ''})}\r\n                    onForceSave={() => this.onSave()}\r\n                    searchText={this.state.searchText}\r\n                    onRegisterSelect={func => this.onRegisterSelect(func)}\r\n                    readOnly={this.state.showBlocklyCode}\r\n                    code={this.scripts[this.state.selected].source || ''}\r\n                    isDark={this.state.theme === 'dark'}\r\n                    connection={this.props.connection}\r\n                    onChange={newValue => this.onChange(newValue)}\r\n                    language={this.scripts[this.state.selected].engineType === 'TypeScript/ts' ? 'typescript' : 'javascript'}\r\n                />\r\n            </div>);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getBlocklyEditor() {\r\n        if (this.state.selected && this.props.objects[this.state.selected] && (this.state.blockly && !this.state.showBlocklyCode) && this.state.visible) {\r\n            this.scripts[this.state.selected] = this.scripts[this.state.selected] || JSON.parse(JSON.stringify(this.props.objects[this.state.selected].common));\r\n\r\n            return (<div className={this.props.classes.editorDiv} key=\"blocklyEditorDiv\">\r\n                <BlocklyEditor\r\n                    command={this.state.cmdToBlockly}\r\n                    key=\"BlocklyEditor\"\r\n                    theme={this.state.theme}\r\n                    searchText={this.state.searchText}\r\n                    resizing={this.props.resizing}\r\n                    code={this.scripts[this.state.selected].source || ''}\r\n                    onChange={newValue => this.onChange(newValue)}\r\n                />\r\n            </div>);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getConfirmDialog() {\r\n        if (this.state.confirm) {\r\n            return (<DialogConfirm\r\n                key=\"dialogConfirm1\"\r\n                question={this.state.confirm}\r\n                onClose={() => {\r\n                    this.setState({confirm: ''});\r\n                    if (this.confirmCallback) {\r\n                        const cb = this.confirmCallback;\r\n                        this.confirmCallback = null;\r\n                        cb(false);\r\n                    }\r\n                }}\r\n                onOk={() => {\r\n                    if (this.confirmCallback) {\r\n                        const cb = this.confirmCallback;\r\n                        this.confirmCallback = null;\r\n                        cb(true);\r\n                    }\r\n                }}\r\n            />);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getSelectIdDialog() {\r\n        if (this.state.showSelectId) {\r\n            return (<DialogSelectID\r\n                key=\"dialogSelectID1\"\r\n                prefix={'../..'}\r\n                connection={this.props.connection}\r\n                selected={this.selectId.callback ? this.selectId.initValue || '' : this.getSelect ? this.getSelect() : ''}\r\n                statesOnly={true}\r\n                onClose={() => this.setState({showSelectId: false})}\r\n                onOk={(selected, name) => {\r\n                    this.selectId.initValue = null;\r\n                    if (this.selectId.callback) {\r\n                        this.selectId.callback(selected);\r\n                        this.selectId.callback = null;\r\n                    } else {\r\n                        this.setState({insert: `'${selected}'/*${name}*/`})\r\n                    }\r\n                }}\r\n            />);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getCronDialog() {\r\n        if (this.state.showCron) {\r\n            return (<DialogCron\r\n                key=\"dialogCron1\"\r\n                cron={this.cron.callback ? this.cron.initValue || '' : this.getSelect ? this.getSelect() : '* * * * *'}\r\n                onClose={() => this.setState({showCron: false})}\r\n                onOk={cron => {\r\n                    this.cron.initValue = null;\r\n                    if (this.cron.callback) {\r\n                        this.cron.callback(cron);\r\n                        this.cron.callback = null;\r\n                    } else {\r\n                        this.setState({insert: `'${cron}'`})\r\n                    }\r\n                }}\r\n            />);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getEditorDialog() {\r\n        if (this.state.showScript) {\r\n            return (<DialogScriptEditor\r\n                key=\"scriptEditorDialog\"\r\n                source={this.scriptDialog.initValue}\r\n                args={this.scriptDialog.args ? this.scriptDialog.args.join(', ') : ''}\r\n                isReturn={this.scriptDialog.isReturn}\r\n                connection={this.props.connection}\r\n                theme={this.state.theme}\r\n                onClose={result => {\r\n                    this.scriptDialog.initValue = null;\r\n                    if (this.scriptDialog.callback) {\r\n                        result !== false && this.scriptDialog.callback(result || '');\r\n                        this.scriptDialog.callback = null;\r\n                    }\r\n                    this.setState({showScript: false});\r\n                }}\r\n            />);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.state.selected && this.props.objects[this.state.selected] && this.state.blockly === null) {\r\n            this.scripts[this.state.selected] = this.scripts[this.state.selected] || JSON.parse(JSON.stringify(this.props.objects[this.state.selected].common));\r\n            setTimeout(() => this.setState({blockly: this.scripts[this.state.selected].engineType === 'Blockly', showBlocklyCode: false}), 100);\r\n        }\r\n\r\n        return [\r\n            this.getTabs(),\r\n            this.getToolbar(),\r\n            this.getScriptEditor(),\r\n            this.getBlocklyEditor(),\r\n            this.getConfirmDialog(),\r\n            this.getSelectIdDialog(),\r\n            this.getCronDialog(),\r\n            this.getEditorDialog()\r\n        ];\r\n    }\r\n}\r\n\r\nEditor.propTypes = {\r\n    objects: PropTypes.object.isRequired,\r\n    selected: PropTypes.string.isRequired,\r\n    onSelectedChange: PropTypes.func.isRequired,\r\n    onRestart: PropTypes.func,\r\n    onChange: PropTypes.func.isRequired,\r\n    visible: PropTypes.bool,\r\n    menuOpened: PropTypes.bool,\r\n    onLocate: PropTypes.func,\r\n    runningInstances: PropTypes.object,\r\n    connection: PropTypes.object,\r\n    searchText: PropTypes.string,\r\n    theme: PropTypes.string\r\n};\r\n\r\nexport default withStyles(styles)(Editor);\r\n","import PropTypes from 'prop-types';\r\n\r\nexport const PROGRESS = {\r\n    CONNECTING: 0,\r\n    CONNECTED: 1,\r\n    OBJECTS_LOADED: 2,\r\n    READY: 3\r\n};\r\n\r\nclass Connection {\r\n    constructor(props) {\r\n        props = props || {};\r\n        this.props = props;\r\n        this.autoSubscribes = this.props.autoSubscribes || [];\r\n        this.autoSubscribeLog = this.props.autoSubscribeLog;\r\n        this.socket = window.io.connect(\r\n            window.location.protocol + '//' + window.location.host.replace('3000', 8081),\r\n            {query: 'ws=true'});\r\n        this.states = {};\r\n        this.objects = null;\r\n        this.scripts = {\r\n            list: [],\r\n            hosts: [],\r\n            groups: [],\r\n            instances: []\r\n        };\r\n        this.acl = null;\r\n        this.firstConnect = true;\r\n        this.waitForRestart = false;\r\n        this.systemLang = 'en';\r\n        this.connected = false;\r\n        this.statesSubscribes = {}; // subscribe for states\r\n        this.onProgress = this.props.onProgress || function () {};\r\n        this.onError = this.props.onError || function (err) {console.error(err);};\r\n\r\n        this.socket.on('connect', () => {\r\n            this.connected = true;\r\n            if (this.firstConnect) {\r\n                this.onProgress(PROGRESS.CONNECTED);\r\n                this.firstConnect = false;\r\n                this.socket.emit('getUserPermissions', (err, acl) => {\r\n                    this.acl = acl;\r\n                    // Read system configuration\r\n                    this.socket.emit('getObject', 'system.config', (err, data) => {\r\n                        this.systemConfig = data;\r\n                        if (!err && this.systemConfig && this.systemConfig.common) {\r\n                            this.systemLang = this.systemConfig.common.language;\r\n                        } else {\r\n                            this.systemLang = window.navigator.userLanguage || window.navigator.language;\r\n\r\n                            if (this.systemLang !== 'en' && this.systemLang !== 'de' && this.systemLang !== 'ru') {\r\n                                this.systemConfig.common.language = 'en';\r\n                                this.systemLang = 'en';\r\n                            }\r\n                        }\r\n                        this.props.onLanguage && this.props.onLanguage(this.systemLang);\r\n\r\n                        this.getObjects(() => {\r\n                            this.onProgress(PROGRESS.READY);\r\n                            this.props.onReady && this.props.onReady(this.objects, this.scripts);\r\n                        });\r\n                    });\r\n                });\r\n            } else {\r\n                this.onProgress(PROGRESS.READY);\r\n            }\r\n\r\n            this.subscribe(true);\r\n\r\n            if (this.waitForRestart) {\r\n                window.location.reload();\r\n            }\r\n        });\r\n        this.socket.on('disconnect', () => {\r\n            this.connected = false;\r\n            this.subscribed = false;\r\n            this.onProgress(PROGRESS.CONNECTING)\r\n        });\r\n        this.socket.on('reconnect', () => {\r\n            this.onProgress(PROGRESS.READY);\r\n            if (this.waitForRestart) {\r\n                window.location.reload();\r\n            }\r\n        });\r\n        this.socket.on('reauthenticate', () => window.location.reload());\r\n        this.socket.on('log', message => {\r\n            this.props.onLog && this.props.onLog(message);\r\n            this.onLogHandler && this.onLogHandler(message);\r\n        });\r\n\r\n        this.socket.on('permissionError', err =>\r\n            this.onError({message: 'no permission', operation: err.operation, type: err.type, id: (err.id || '')}));\r\n\r\n        this.socket.on('objectChange', (id, obj) => setTimeout(() => this.objectChange(id, obj), 0));\r\n        this.socket.on('stateChange', (id, state) => setTimeout(() => this.stateChange(id, state), 0))\r\n    }\r\n\r\n    subscribeState(id, cb) {\r\n        if (!this.statesSubscribes[id]) {\r\n            this.statesSubscribes[id] = {reg: new RegExp(id.replace(/\\./g, '\\\\.').replace(/\\*/g, '.*')), cbs: []};\r\n            this.statesSubscribes[id].cbs.push(cb);\r\n            if (this.connected) {\r\n                this.socket.emit('subscribe', id);\r\n            }\r\n        } else {\r\n            this.statesSubscribes[id].cbs.indexOf(cb) === -1 && this.statesSubscribes[id].cbs.push(cb);\r\n        }\r\n        this.getState(id, cb);\r\n    }\r\n\r\n    objectChange(id, obj) {\r\n        // update main.objects cache\r\n        if (!this.objects) return;\r\n\r\n        let changed = false;\r\n        if (obj) {\r\n            if (obj._rev && this.objects[id]) {\r\n                this.objects[id]._rev = obj._rev;\r\n            }\r\n\r\n            if (!this.objects[id] || JSON.stringify(this.objects[id]) !== JSON.stringify(obj)) {\r\n                this.objects[id] = obj;\r\n                changed = true;\r\n                let pos;\r\n                if (obj.type === 'instance') {\r\n                    pos = this.scripts.instances.indexOf(id);\r\n                    if (pos === -1) this.scripts.instances.push(id);\r\n                } else\r\n                if (obj.type === 'script') {\r\n                    pos = this.scripts.list.indexOf(id);\r\n                    if (pos === -1) this.scripts.list.push(id);\r\n                } else\r\n                if (id.match(/^script\\.js\\./) && obj.type === 'channel') {\r\n                    pos = this.scripts.groups.indexOf(id);\r\n                    if (pos === -1) this.scripts.groups.push(id);\r\n                }\r\n            }\r\n        } else if (this.objects[id]) {\r\n            const oldObj = {_id: id, type: this.objects[id].type};\r\n            delete this.objects[id];\r\n            let pos;\r\n            if (oldObj.type === 'instance') {\r\n                pos = this.scripts.instances.indexOf(id);\r\n                if (pos !== -1) this.scripts.instances.splice(pos, 1);\r\n            } else\r\n            if (oldObj.type === 'script') {\r\n                pos = this.scripts.list.indexOf(id);\r\n                if (pos !== -1) this.scripts.list.splice(pos, 1);\r\n            } else\r\n            if (id.match(/^script\\.js\\./) && oldObj.type === 'channel') {\r\n                pos = this.scripts.groups.indexOf(id);\r\n                if (pos !== -1) this.scripts.groups.splice(pos, 1);\r\n            }\r\n            changed = true;\r\n        }\r\n\r\n        if (id.match(/^system\\.adapter\\.[-\\w\\d]+\\$/)) {\r\n            if (obj[id].common && obj[id].common.blockly) {\r\n                this.props.onBlocklyChanges(id);\r\n            }\r\n        }\r\n        if (changed) {\r\n            this.props.onObjectChange && this.props.onObjectChange(this.objects, this.scripts);\r\n        }\r\n    }\r\n\r\n    stateChange(id, state) {\r\n        id = id ? id.replace(/[\\s'\"]/g, '_') : '';\r\n        for (const task in this.statesSubscribes) {\r\n            if (this.statesSubscribes.hasOwnProperty(task) && this.statesSubscribes[task].reg.test(id)) {\r\n                this.statesSubscribes[task].cbs.forEach(cb => cb(id, state));\r\n            }\r\n        }\r\n    }\r\n\r\n    getStates(cb, disableProgressUdpate) {\r\n        this.socket.emit('getStates', (err, res) => {\r\n            this.states = res;\r\n            !disableProgressUdpate && this.onProgress(PROGRESS.STATES_LOADED);\r\n            cb && setTimeout(() => cb(this.states), 0);\r\n        });\r\n    }\r\n\r\n    getState(id, cb) {\r\n        if (!cb) {\r\n            return new Promise((resolve, reject) =>\r\n                this.getState(id, (err, state) => err ? reject(err) : resolve(state)));\r\n        } else {\r\n            this.socket.emit('getState', id, cb);\r\n        }\r\n    }\r\n\r\n    getObjects(refresh, cb, disableProgressUdpate) {\r\n        if (typeof refresh === 'function') {\r\n            disableProgressUdpate = cb;\r\n            cb = refresh;\r\n            refresh = false;\r\n        }\r\n\r\n        if (!refresh && this.objects) {\r\n            return setTimeout(() => cb && cb(this.objects), 0);\r\n        }\r\n\r\n        this.socket.emit('getAllObjects', (err, res) => {\r\n            setTimeout(() => {\r\n                let obj;\r\n                this.objects = res;\r\n                for (const id in this.objects) {\r\n                    if (!this.objects.hasOwnProperty(id) || id.slice(0, 7) === '_design') continue;\r\n\r\n                    obj = res[id];\r\n                    if (obj.type === 'instance') {\r\n                        id.startsWith('system.adapter.javascript.') && this.scripts.instances.push(parseInt(id.split('.').pop()));\r\n                    }\r\n                    if (obj.type === 'script')   this.scripts.list.push(id);\r\n                    if (obj.type === 'channel' && id.match(/^script\\.js\\./)) this.scripts.groups.push(id);\r\n                    if (obj.type === 'host')     this.scripts.hosts.push(id);\r\n                }\r\n                disableProgressUdpate && this.onProgress(PROGRESS.OBJECTS_LOADED);\r\n\r\n                cb && cb(this.objects);\r\n            }, 0);\r\n        });\r\n    }\r\n\r\n    subscribe(isEnable) {\r\n        if (isEnable && !this.subscribed) {\r\n            this.subscribed = true;\r\n            console.log('Subscribe logs');\r\n            this.autoSubscribes.forEach(id => this.socket.emit('subscribeObjects', id));\r\n            this.autoSubscribeLog && this.socket.emit('requireLog', true);\r\n\r\n            Object.keys(this.statesSubscribes).forEach(id => this.socket.emit('subscribe', id));\r\n        } else if (!isEnable && this.subscribed) {\r\n            this.subscribed = false;\r\n            console.log('Unsubscribe logs');\r\n            this.autoSubscribes.forEach(id => this.socket.emit('unsubscribeObjects', id));\r\n            this.autoSubscribeLog && this.socket.emit('requireLog', false);\r\n\r\n            Object.keys(this.statesSubscribes).forEach(id => this.socket.emit('unsubscribe', id));\r\n        }\r\n    }\r\n\r\n    delObject(id) {\r\n        return new Promise((resolve, reject) => {\r\n            this.socket.emit('delObject', id, err => {\r\n                err ? reject(err) : resolve();\r\n            });\r\n        });\r\n    }\r\n\r\n    setObject(id, obj) {\r\n        return new Promise((resolve, reject) => {\r\n            this.socket.emit('setObject', id, obj, err => {\r\n                err ? reject(err) : resolve();\r\n            });\r\n        });\r\n    }\r\n\r\n    updateScript(oldId, newId, newCommon) {\r\n        return new Promise((resolve, reject) => {\r\n            this.socket.emit('getObject', oldId, (err, _obj) => {\r\n                setTimeout(() => {\r\n                    const obj = {common: {}};\r\n\r\n                    if (newCommon.engine  !== undefined) obj.common.engine  = newCommon.engine;\r\n                    if (newCommon.enabled !== undefined) obj.common.enabled = newCommon.enabled;\r\n                    if (newCommon.source  !== undefined) obj.common.source  = newCommon.source;\r\n                    if (newCommon.debug   !== undefined) obj.common.debug   = newCommon.debug;\r\n                    if (newCommon.verbose !== undefined) obj.common.verbose = newCommon.verbose;\r\n\r\n                    if (oldId === newId && _obj && _obj.common && newCommon.name === _obj.common.name) {\r\n                        if (!newCommon.engineType || newCommon.engineType !== _obj.common.engineType) {\r\n                            if (newCommon.engineType !== undefined) obj.common.engineType  = newCommon.engineType || 'Javascript/js';\r\n\r\n                            this.socket.emit('extendObject', oldId, obj, err => err ? reject(err) : resolve());\r\n                        } else {\r\n                            this.socket.emit('extendObject', oldId, obj, err => err ? reject(err) : resolve());\r\n                        }\r\n                    } else {\r\n                        // let prefix;\r\n\r\n                        // let parts = _obj.common.engineType.split('/');\r\n\r\n                        // prefix = 'script.' + (parts[1] || parts[0]) + '.';\r\n\r\n                        if (_obj && _obj.common) {\r\n                            _obj.common.engineType = newCommon.engineType || _obj.common.engineType || 'Javascript/js';\r\n                            this.socket.emit('delObject', oldId, err => {\r\n                                if (err) {\r\n                                    reject(err);\r\n                                } else {\r\n                                    if (obj.common.engine  !== undefined) _obj.common.engine  = obj.common.engine;\r\n                                    if (obj.common.enabled !== undefined) _obj.common.enabled = obj.common.enabled;\r\n                                    if (obj.common.source  !== undefined) _obj.common.source  = obj.common.source;\r\n                                    if (obj.common.name    !== undefined) _obj.common.name    = obj.common.name;\r\n                                    if (obj.common.debug   !== undefined) _obj.common.debug   = obj.common.debug;\r\n                                    if (obj.common.verbose !== undefined) _obj.common.verbose = obj.common.verbose;\r\n\r\n                                    delete _obj._rev;\r\n\r\n                                    // Name must always exist\r\n                                    _obj.common.name = newCommon.name;\r\n\r\n                                    _obj._id = newId; // prefix + newCommon.name.replace(/[\\s\"']/g, '_');\r\n\r\n                                    this.socket.emit('setObject', newId, _obj, err => err ? reject(err) : resolve());\r\n                                }\r\n                            });\r\n                            return;\r\n                        } else {\r\n                            _obj = obj;\r\n                        }\r\n\r\n                        // Name must always exist\r\n                        _obj.common.name = newCommon.name;\r\n\r\n                        _obj._id = newId; // prefix + newCommon.name.replace(/[\\s\"']/g, '_');\r\n\r\n                        this.socket.emit('setObject', newId, _obj, err => err ? reject(err) : resolve());\r\n                    }\r\n                }, 0);\r\n            });\r\n        });\r\n    }\r\n\r\n    _deleteGroup(id, originalGroup, confirmed, deleted) {\r\n        if (confirmed.indexOf(id) === -1) {\r\n            confirmed.push(id);\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            // find all elements\r\n            for (let l = 0; l < this.scripts.list.length; l++) {\r\n                if (this.scripts.list[l].substring(0, id.length + 1) === id + '.' &&\r\n                    (!deleted || deleted.indexOf(this.scripts.list[l]) === -1)) {\r\n                    return this.deleteId(this.scripts.list[l], id, confirmed, deleted);\r\n                }\r\n            }\r\n\r\n            for (let g = 0; g < this.scripts.groups.length; g++) {\r\n                if (this.scripts.groups[g].substring(0, id.length + 1) === id + '.') {\r\n                    return this.deleteId(this.scripts.groups[g], id, confirmed, deleted);\r\n                }\r\n            }\r\n\r\n            this.socket.emit('delObject', id, err => {\r\n                if (err) {\r\n                    reject(err);\r\n                } else if (originalGroup !== id) {\r\n                    return this.deleteId(originalGroup, null, confirmed, deleted);\r\n                } else {\r\n                    // finish\r\n                    resolve();\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    deleteId(id, originalGroup, confirmed, deleted) {\r\n        originalGroup = originalGroup || id;\r\n        confirmed     = confirmed     || [];\r\n        deleted       = deleted       || [];\r\n\r\n        return new Promise((resolve, reject) => {\r\n            if (this.objects[id] && this.objects[id].type === 'script') {\r\n                if (this.props.onConfirmDelete) {\r\n                    this.props.onConfirmDelete(false, this.objects[id].common.name, result => {\r\n                        if (result) {\r\n                            this.socket.emit('delObject', id, err => {\r\n                                if (err) {\r\n                                    reject(err);\r\n                                } else {\r\n                                    deleted.push(id);\r\n                                    return this.deleteId(originalGroup, null, confirmed, deleted);\r\n                                }\r\n                            });\r\n                        } else {\r\n                            // Do nothing\r\n                            reject('canceled');\r\n                        }\r\n                    });\r\n                } else {\r\n                    this.socket.emit('delObject', id, err => {\r\n                        if (err) {\r\n                            reject(err);\r\n                        } else {\r\n                            deleted.push(id);\r\n                            return this.deleteId(originalGroup, null, confirmed, deleted);\r\n                        }\r\n                    });\r\n                }\r\n            } else {\r\n                let name = id;\r\n                if (confirmed.indexOf(id) === -1) {\r\n                    if (this.objects[id] && this.objects[id].common && this.objects[id].common.name) {\r\n                        name = this.objects[id].common.name;\r\n                    }\r\n\r\n                    if (this.props.onConfirmDelete) {\r\n                        this.props.onConfirmDelete(true, name, result => {\r\n                            if (result) {\r\n                                return this._deleteGroup(id, originalGroup, confirmed, deleted);\r\n                            } else {\r\n                                reject('canceled');\r\n                            }\r\n                        });\r\n                    } else {\r\n                        return this._deleteGroup(id, originalGroup, confirmed, deleted);\r\n                    }\r\n                } else {\r\n                    return this._deleteGroup(id, originalGroup, confirmed, deleted);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    renameGroup(id, newId, newName, _list) {\r\n        return new Promise((resolve, reject) => {\r\n            if (!_list) {\r\n                _list = [];\r\n\r\n                // collect all elements to rename\r\n                // find all elements\r\n                for (let l = 0; l < this.scripts.list.length; l++) {\r\n                    if (this.scripts.list[l].substring(0, id.length + 1) === id + '.') {\r\n                        _list.push(this.scripts.list[l]);\r\n                    }\r\n                }\r\n                for (let g = 0; g < this.scripts.groups.length; g++) {\r\n                    if (this.scripts.groups[g].substring(0, id.length + 1) === id + '.') {\r\n                        _list.push(this.scripts.list[g]);\r\n                    }\r\n                }\r\n\r\n                this.socket.emit('getObject', id, (err, obj) => {\r\n                    if (err) {\r\n                        reject(err);\r\n                    } else {\r\n                        obj = obj || {common: {}};\r\n                        obj.common.name = newName;\r\n                        obj._id = newId;\r\n\r\n                        this.socket.emit('delObject', id, err => {\r\n                            if (err) {\r\n                                reject(err);\r\n                            } else {\r\n                                this.socket.emit('setObject', newId, obj, err => {\r\n                                    if (err) {\r\n                                        reject(err);\r\n                                    } else {\r\n                                        return this.renameGroup(id, newId, newName, _list);\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            } else {\r\n                if (_list.length) {\r\n                    let nId = _list.pop();\r\n\r\n                    this.socket.emit('getObject', nId, (err, obj) => {\r\n                        if (err) {\r\n                            reject(err);\r\n                        } else {\r\n                            this.socket.emit('delObject', nId, err => {\r\n                                if (err) {\r\n                                    reject(err);\r\n                                } else {\r\n                                    nId = newId + nId.substring(id.length);\r\n                                    this.socket.emit('setObject', nId, obj, err => {\r\n                                        if (err) {\r\n                                            reject(err);\r\n                                        } else {\r\n                                            return this.renameGroup(id, newId, newName, _list);\r\n                                        }\r\n                                    });\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                } else {\r\n                    resolve();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    getScripts() {\r\n        return this.scripts;\r\n    }\r\n\r\n    sendTo(instance, command, data, cb) {\r\n        this.socket.emit('sendTo', instance, command, data, cb);\r\n    }\r\n    extendObject(id, obj, cb) {\r\n        this.socket.emit('extendObject', id, obj, cb);\r\n    }\r\n\r\n    registerLogHandler(handler) {\r\n        this.onLogHandler = handler;\r\n    }\r\n    unregisterLogHandler(handler) {\r\n        this.onLogHandler = null;\r\n    }\r\n\r\n}\r\n\r\nConnection.Connection = {\r\n    onLog: PropTypes.func,\r\n    onReady: PropTypes.func,\r\n    onProgress: PropTypes.func,\r\n};\r\n\r\nexport default Connection;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport './loader.css'\r\n\r\nconst styles = theme => ({\r\n\r\n});\r\n\r\nclass Loader extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.size = this.props.size || 234;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={'logo-back logo-background-' + this.props.theme}>\r\n                <div className=\"logo-div\" style={{width: this.size, height: this.size}}>\r\n                    <div className={'logo-top logo-background-' + this.props.theme} style={{left: '37%'}}/>\r\n                    <div className={'logo-top logo-background-' + this.props.theme} style={{left: '57%'}}/>\r\n                    <div\r\n                        className={'logo-border logo-background-' + this.props.theme + ' logo-animate-wait'}\r\n                        style={{borderWidth: this.size * 0.132}}\r\n                    />\r\n                    <div className={'logo-i logo-animate-color-inside-' + this.props.theme}/>\r\n                    <div className={'logo-i-top logo-animate-color-inside-' + this.props.theme} style={{top: '18%'}}/>\r\n                    <div className={'logo-i-top logo-animate-color-inside-' + this.props.theme} style={{bottom: '18%'}}/>\r\n                </div>\r\n                <div className={'logo-animate-grow logo-animate-grow-' + this.props.theme}\r\n                     style={{width: this.size + 11, height: this.size + 11}}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nLoader.propTypes = {\r\n    size: PropTypes.number,\r\n    theme: PropTypes.string\r\n};\r\n\r\nexport default withStyles(styles)(Loader);\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Dropzone from 'react-dropzone';\r\nimport DialogError from './Error';\r\nimport {MdFileUpload as IconUpload} from 'react-icons/md';\r\nimport {MdCancel as IconNo} from 'react-icons/md';\r\nimport {MdPlusOne as IconPlus} from 'react-icons/md';\r\n\r\nimport I18n from '../i18n';\r\n\r\nconst styles = theme => ({\r\n    dialog: {\r\n        height: '95%'\r\n    },\r\n    fullHeight: {\r\n        height: '100%',\r\n        overflow: 'hidden'\r\n    },\r\n    dropzone: {\r\n        marginTop: 20,\r\n        width: '100%',\r\n        borderWidth: 5,\r\n        borderStyle: 'dashed',\r\n        borderColor: '#d0cccc',\r\n        textAlign: 'center',\r\n        boxSizing: 'border-box',\r\n        paddingTop: 45,\r\n        borderRadius: 10,\r\n        height: 'calc(100% - 10px)'\r\n    },\r\n    dropzoneRejected: {\r\n        borderColor: '#970000',\r\n    },\r\n    dropzoneAccepted: {\r\n        borderColor: '#17cd02',\r\n    },\r\n    icon: {\r\n        height: '30%',\r\n        width: '30%',\r\n        color: '#eeeeee',\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        transform: 'translate(-50%,-50%)',\r\n        zIndex: 0,\r\n    },\r\n    text: {\r\n        top: '50%',\r\n        left: '50%',\r\n        transform: 'translate(-50%,-50%)',\r\n        color: '#868686',\r\n        position: 'absolute',\r\n        zIndex: 1,\r\n    }\r\n});\r\nclass DialogImportFile extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            error: '',\r\n            imageStatus: ''\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        setTimeout(() => {\r\n            try {\r\n                window.document.getElementById('import-text-area').focus();\r\n            } catch (e) {\r\n\r\n            }\r\n        }, 100);\r\n    }\r\n\r\n    handleCancel () {\r\n        this.props.onClose();\r\n    }\r\n\r\n    onChange(e) {\r\n        this.setState({text: e.target.value});\r\n    }\r\n\r\n    static readFileDataUrl(file, cb) {\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n            cb(null, {data: reader.result, name: file.name});\r\n        };\r\n        reader.onabort = () => {\r\n            console.error('file reading was aborted');\r\n            cb(I18n.t('file reading was aborted'));\r\n        };\r\n        reader.onerror = (e) => {\r\n            console.error('file reading has failed');\r\n            cb(I18n.t('file reading has failed: %s', e));\r\n        };\r\n\r\n        reader.readAsDataURL(file)\r\n    }\r\n\r\n    handleDropFile(files) {\r\n        if (files && files.hasOwnProperty('target')) {\r\n            files = files.target.files;\r\n        }\r\n\r\n        if (!files && !files.length) {\r\n            return;\r\n        }\r\n\r\n        const file = files[files.length - 1];\r\n\r\n        if (!file) {\r\n            return;\r\n        }\r\n        DialogImportFile.readFileDataUrl(file, (err, result) => {\r\n            if (err) {\r\n                this.setState({error: err})\r\n            } else {\r\n                this.props.onClose(result && result.data);\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const classes = this.props.classes;\r\n        const className = classes.dropzone + ' ' + (this.state.imageStatus === 'accepted' ? classes.dropzoneAccepted : (this.state.imageStatus === 'rejected' ? classes.dropzoneRejected : ''));\r\n\r\n        return (\r\n            <Dialog\r\n                disableBackdropClick\r\n                disableEscapeKeyDown\r\n                maxWidth=\"lg\"\r\n                classes={{paper: classes.dialog}}\r\n                fullWidth={true}\r\n                open={true}\r\n                aria-labelledby=\"import-dialog-title\"\r\n            >\r\n                <DialogTitle id=\"import-dialog-title\">{I18n.t('Import scripts')}</DialogTitle>\r\n                <DialogContent className={classes.fullHeight}>\r\n                    <Dropzone   key='image-drop'\r\n\r\n                                maxSize={50000000}\r\n                                acceptClassName={classes.dropzoneAccepted}\r\n                                rejectClassName={classes.dropzoneRejected}\r\n                                onDrop={files =>\r\n                                    this.handleDropFile(files)}\r\n                                multiple={false}\r\n                                accept='application/x-zip-compressed'\r\n                                className={className}>\r\n                        {\r\n                            ({isDragActive, isDragReject}) => {\r\n\r\n                                if (isDragReject) {\r\n                                    if (this.state.imageStatus !== 'rejected') {\r\n                                        this.setState({imageStatus: 'rejected'});\r\n                                    }\r\n                                    return [(<span key=\"text\" className={this.props.classes.text}>{I18n.t('Some files will be rejected')}</span>),\r\n                                        (<IconNo key=\"icon\" className={this.props.classes.icon}/>)];\r\n                                } else if (isDragActive) {\r\n                                    if (this.state.imageStatus !== 'accepted') {\r\n                                        this.setState({imageStatus: 'accepted'});\r\n                                    }\r\n\r\n                                    return [(<span key=\"text\" className={this.props.classes.text}>{I18n.t('All files will be accepted')}</span>),\r\n                                        (<IconPlus key=\"icon\" className={this.props.classes.icon}/>)];\r\n                                } else {\r\n                                    if (this.state.imageStatus !== 'wait') {\r\n                                        this.setState({imageStatus: 'wait'});\r\n                                    }\r\n                                    return [(<span key=\"text\" className={this.props.classes.text}>{I18n.t('Drop some files here or click...')}</span>),\r\n                                        (<IconUpload key=\"icon\" className={this.props.classes.icon}/>)];\r\n                                }\r\n                            }\r\n                        }\r\n                    </Dropzone>\r\n                    {this.state.error ? (<DialogError text={this.state.error} onClose={() => this.setState({error: ''})}/>) : null}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => this.handleCancel()} color=\"secondary\">{I18n.t('Close')}</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nDialogImportFile.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    onClose: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(DialogImportFile);\r\n","import React, {Component} from 'react';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport SplitterLayout from 'react-splitter-layout';\r\nimport {MdMenu as IconMenuClosed} from 'react-icons/md';\r\nimport {MdClose as IconMenuOpened} from 'react-icons/md';\r\n\r\nimport SideMenu from './SideMenu';\r\nimport Log from './Log';\r\nimport Editor from './Editor';\r\nimport Theme from './Theme';\r\nimport Connection from './Connection';\r\nimport {PROGRESS} from './Connection';\r\nimport Loader from './Components/Loader'\r\nimport I18n from './i18n';\r\nimport DialogMessage from './Dialogs/Message';\r\nimport DialogError from './Dialogs/Error';\r\nimport DialogConfirm from './Dialogs/Confirmation';\r\nimport DialogImportFile from './Dialogs/ImportFile';\r\nimport BlocklyEditor from './Components/BlocklyEditor';\r\n\r\nconst styles = theme => ({\r\n    root: Theme.root,\r\n    menuDiv: {\r\n        overflow: 'hidden',\r\n    },\r\n    splitterDivs: {\r\n        '&>div': {\r\n            overflow: 'hidden',\r\n            width: '100%',\r\n            height: '100%',\r\n        },\r\n        '& .layout-splitter': {\r\n           background: Theme.type === 'dark' ? '#595858' : '#ccc;'\r\n        }\r\n    },\r\n    mainDiv: {\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'hidden',\r\n    },\r\n    /*appBarWithMenu: {\r\n        width: `calc(100% - ${Theme.menu.width}px)`,\r\n        marginLeft: Theme.menu.width,\r\n    },\r\n    appBarWithoutMenu: {\r\n        width: `100%`,\r\n        marginLeft: 0,\r\n    },*/\r\n    content: {\r\n        width: '100%',\r\n        height: '100%',\r\n        backgroundColor: theme.palette.background.default,\r\n        position: 'relative'\r\n    },\r\n    splitterDivWithMenu: {\r\n        width: `calc(100% - ${Theme.menu.width}px)`,\r\n        height: '100%'\r\n    },\r\n    menuDivWithoutMenu: {\r\n        '&>div:first-child': {\r\n            display: 'none'\r\n        },\r\n        '&>.layout-splitter': {\r\n            display: 'none'\r\n        },\r\n    },\r\n    progress: {\r\n        margin: 100\r\n    },\r\n    menuOpenCloseButton: {\r\n        position: 'absolute',\r\n        left: 0,\r\n        borderRadius: '0 5px 5px 0',\r\n        top: 6,\r\n        paddingTop: 8,\r\n        cursor: 'pointer',\r\n        zIndex: 1,\r\n        height: 25,\r\n        width: 20,\r\n        background: Theme.colors.secondary,\r\n        color: Theme.colors.primary,\r\n        paddingLeft: 3,\r\n        '&:hover': {\r\n            color: 'white'\r\n        }\r\n    }\r\n});\r\n\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.objects = {};\r\n        this.state = {\r\n            connected: false,\r\n            progress: 0,\r\n            ready: false,\r\n            updateScripts: 0,\r\n            scriptsHash: 0,\r\n            instances: [],\r\n            updating: false,\r\n            resizing: false,\r\n            selected: null,\r\n            logMessage: {},\r\n            editing: [],\r\n            menuOpened: window.localStorage ? window.localStorage.getItem('App.menuOpened') !== 'false' : true,\r\n            menuSelectId: '',\r\n            errorText: '',\r\n            expertMode: window.localStorage ? window.localStorage.getItem('App.expertMode') === 'true' : false,\r\n            runningInstances: {},\r\n            confirm: '',\r\n            importFile: false,\r\n            message: '',\r\n            searchText: '',\r\n            themeType: window.localStorage ? window.localStorage.getItem('App.theme') || 'light' : 'light',\r\n        };\r\n        // this.logIndex = 0;\r\n        this.logSize = window.localStorage ? parseFloat(window.localStorage.getItem('App.logSize')) || 150 : 150;\r\n        this.menuSize = window.localStorage ? parseFloat(window.localStorage.getItem('App.menuSize')) || 500 : 500;\r\n        this.scripts = {};\r\n        this.hosts = [];\r\n        this.importFile = null;\r\n\r\n        this.socket = new Connection({\r\n            autoSubscribes: ['script.*', 'system.adapter.javascript.*'],\r\n            autoSubscribeLog: true,\r\n            onProgress: progress => {\r\n                if (progress === PROGRESS.CONNECTING) {\r\n                    this.setState({connected: false});\r\n                } else if (progress === PROGRESS.READY) {\r\n                    this.setState({connected: true, progress: 100});\r\n                } else {\r\n                    this.setState({connected: true, progress: Math.round(PROGRESS.READY / progress * 100)});\r\n                }\r\n            },\r\n            onReady: (objects, scripts) => {\r\n                I18n.setLanguage(this.socket.systemLang);\r\n                window.systemLang = this.socket.systemLang;\r\n                this.onObjectChange(objects, scripts, true);\r\n            },\r\n            onObjectChange: (objects, scripts) => this.onObjectChange(objects, scripts),\r\n            onError: err => {\r\n                console.error(err);\r\n            },\r\n            onBlocklyChanges: () => {\r\n                this.confirmCallback = result => result && window.location.reload();\r\n                this.setState({confirm: I18n.t('Some blocks were updated. Reload admin?')});\r\n            },\r\n            onLog: message => {\r\n                //this.logIndex++;\r\n                //this.setState({logMessage: {index: this.logIndex, message}})\r\n            }\r\n        });\r\n\r\n        this.socket.subscribeState('system.adapter.javascript.*.alive', (id, state) => {\r\n            id = id && id.substring(0, id.length - 6); // - .alive\r\n            if (this.state.runningInstances[id] !== (state ? state.val : false)) {\r\n                const runningInstances = JSON.parse(JSON.stringify(this.state.runningInstances));\r\n                runningInstances[id] = (state ? state.val : false);\r\n                this.setState({runningInstances});\r\n            }\r\n        });\r\n    }\r\n\r\n    onObjectChange(objects, scripts, isReady) {\r\n        this.objects = objects;\r\n        // extract scripts and instances\r\n        const nScripts = {};\r\n        const newState = {};\r\n\r\n        scripts.list.forEach(id => nScripts[id] = objects[id]);\r\n        scripts.groups.forEach(id => nScripts[id] = objects[id]);\r\n        this.hosts = scripts.hosts;\r\n\r\n        if (window.localStorage && window.localStorage.getItem('App.expertMode') !== 'true' && window.localStorage.getItem('App.expertMode') !== 'false') {\r\n            // detect if some global scripts exists\r\n            if (scripts.list.find(id => id.startsWith('script.js.global.'))) {\r\n                newState.expertMode = true;\r\n            }\r\n        }\r\n\r\n        let scriptsHash = this.state.scriptsHash;\r\n        if (this.compareScripts(scripts)) {\r\n            scriptsHash++;\r\n        }\r\n        scripts.instances.sort();\r\n        this.scripts = nScripts;\r\n        newState.instances = scripts.instances;\r\n        newState.scriptsHash = scriptsHash;\r\n\r\n        if (isReady !== undefined) {\r\n            newState.ready = isReady;\r\n        }\r\n\r\n        BlocklyEditor.loadCustomBlockly(objects, () => this.setState(newState));\r\n    }\r\n\r\n    compareScripts(newScripts) {\r\n        const oldIds = Object.keys(this.scripts);\r\n        const newIds = Object.keys(newScripts);\r\n        if (oldIds.length !== newIds.length) {\r\n            this.scripts = this.newScripts;\r\n            return true;\r\n        }\r\n        if (JSON.stringify(oldIds) !== JSON.stringify(newIds)) {\r\n            this.scripts = this.newScripts;\r\n            return true;\r\n        }\r\n        for (let i = 0; i < oldIds.length; i++) {\r\n            let oldScript = this.scripts[oldIds[i]].common;\r\n            let newScript = newScripts[oldIds[i]].common;\r\n            if (oldScript.name !== newScript.name) {\r\n                this.scripts = this.newScripts;\r\n                return true;\r\n            }\r\n            if (oldScript.engine !== newScript.engine) {\r\n                this.scripts = this.newScripts;\r\n                return true;\r\n            }\r\n            if (oldScript.engineType !== newScript.engineType) {\r\n                this.scripts = this.newScripts;\r\n                return true;\r\n            }\r\n            if (oldScript.enabled !== newScript.enabled) {\r\n                this.scripts = this.newScripts;\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n\r\n    onRename(oldId, newId, newName, newInstance) {\r\n        console.log(`Rename ${oldId} => ${newId}`);\r\n        let promise;\r\n        this.setState({updating: true});\r\n        if (this.scripts[oldId] && this.scripts[oldId].type === 'script') {\r\n            const common = JSON.parse(JSON.stringify(this.scripts[oldId].common));\r\n            common.name = newName || common.name;\r\n            if (newInstance !== undefined) {\r\n                common.engine = 'system.adapter.javascript.' + newInstance;\r\n            }\r\n            promise = this.socket.updateScript(oldId, newId, common);\r\n        } else {\r\n            promise = this.socket.renameGroup(oldId, newId, newName);\r\n        }\r\n\r\n        promise\r\n            .then(() => this.setState({updating: false}))\r\n            .catch(err => err !== 'canceled' && this.showError(err));\r\n    }\r\n\r\n    onUpdateScript(id, common) {\r\n        if (this.scripts[id] && this.scripts[id].type === 'script') {\r\n            this.socket.updateScript(id, id, common)\r\n                .then(() => {})\r\n                .catch(err => err !== 'canceled' && this.showError(err));\r\n        }\r\n    }\r\n\r\n    onSelect(selected) {\r\n        if (this.objects[selected] && this.objects[selected].common && this.objects[selected].type === 'script') {\r\n            this.setState({selected, menuSelectId: selected}, () =>\r\n                setTimeout(() => this.setState({menuSelectId: ''})), 300);\r\n        }\r\n    }\r\n\r\n    onExpertModeChange(expertMode) {\r\n        if (this.state.expertMode !== expertMode) {\r\n            window.localStorage && window.localStorage.setItem('App.expertMode', expertMode ? 'true' : 'false');\r\n            this.setState({expertMode});\r\n        }\r\n    }\r\n\r\n    showError(err) {\r\n        this.setState({errorText: err});\r\n    }\r\n\r\n    showMessage(message) {\r\n        this.setState({message});\r\n    }\r\n\r\n    onDelete(id) {\r\n        this.socket.delObject(id)\r\n        .then(() => {})\r\n        .catch(err => {\r\n            this.showError(err);\r\n        });\r\n    }\r\n\r\n    onEdit(id) {\r\n        if (this.state.selected !== id) {\r\n            this.setState({selected: id});\r\n        }\r\n    }\r\n\r\n    onAddNew(id, name, isFolder, instance, type, source) {\r\n        if (this.objects[id]) {\r\n            this.showError(I18n.t('Yet exists!'));\r\n            return;\r\n        }\r\n\r\n        if (isFolder) {\r\n            this.socket.setObject(id, {\r\n                common: {\r\n                    name,\r\n                    expert: true\r\n                },\r\n                type: 'channel'\r\n            }).then(() => {\r\n                setTimeout(() => this.setState({menuSelectId: id}, () =>\r\n                    setTimeout(() => this.setState({menuSelectId: ''})), 300), 1000);\r\n            }).catch(err => {\r\n                this.showError(err);\r\n            });\r\n        } else {\r\n            this.socket.setObject(id, {\r\n                common: {\r\n                    name,\r\n                    expert: true,\r\n                    engineType: type,\r\n                    engine: 'system.adapter.javascript.' + (instance || 0),\r\n                    source: source || '',\r\n                    debug: false,\r\n                    verbose: false\r\n                },\r\n                type: 'script'\r\n            }).then(() => {\r\n                setTimeout(() => this.onSelect(id), 1000);\r\n            }).catch(err => {\r\n                this.showError(err);\r\n            });\r\n        }\r\n    }\r\n\r\n    onEnableDisable(id, enabled) {\r\n        if (this.scripts[id] && this.scripts[id].type === 'script') {\r\n            const common = this.objects[id].common;\r\n            common.enabled = enabled;\r\n            common.expert = true;\r\n            this.socket.updateScript(id, id, common)\r\n                .then(() => {})\r\n                .catch(err => err !== 'canceled' && this.showError(err));\r\n        }\r\n    }\r\n\r\n    getLiveHost(cb, _list) {\r\n        if (!_list) {\r\n            _list = JSON.parse(JSON.stringify(this.hosts)) || [];\r\n        }\r\n\r\n        if (_list.length) {\r\n            const id = _list.shift();\r\n            this.socket.getState(id + '.alive', (err, state) => {\r\n                if (!err && state && state.val) {\r\n                    cb(id);\r\n                } else {\r\n                    setTimeout(() => this.getLiveHost(cb, _list));\r\n                }\r\n            });\r\n        } else {\r\n            cb();\r\n        }\r\n    }\r\n\r\n    onExport() {\r\n        this.getLiveHost(host => {\r\n            if (!host) {\r\n                this.showError(I18n.t('No active host found'));\r\n                return;\r\n            }\r\n\r\n            const d = new Date();\r\n            let date = d.getFullYear();\r\n            let m = d.getMonth() + 1;\r\n            if (m < 10) m = '0' + m;\r\n            date += '-' + m;\r\n            m = d.getDate();\r\n            if (m < 10) m = '0' + m;\r\n            date += '-' + m + '-';\r\n\r\n            this.socket.socket.emit('sendToHost', host, 'readObjectsAsZip', {\r\n                adapter: 'javascript',\r\n                id: 'script.js',\r\n                link: date + 'scripts.zip' // request link to file and not the data itself\r\n            }, data => {\r\n                if (typeof data === 'string') {\r\n                    // it is a link to created file\r\n                    const a = document.createElement('a');\r\n                    a.href = '/zip/' + date + 'scripts.zip';\r\n                    document.body.appendChild(a);\r\n                    a.click();\r\n                    a.remove();\r\n                } else {\r\n                    data.error && this.showError(data.error);\r\n                    if (data.data) {\r\n                        const a = document.createElement('a');\r\n                        a.href = 'data: application/zip;base64,' + data.data;\r\n                        a.download = date + 'scripts.zip';\r\n                        document.body.appendChild(a);\r\n                        a.click();\r\n                        a.remove();\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    onImport(data) {\r\n        this.importFile = data;\r\n        if (data) {\r\n            this.confirmCallback = this.onImportConfirmed.bind(this);\r\n            this.setState({importFile: false, confirm: I18n.t('Existing scripts will be overwritten.')});\r\n        } else {\r\n            this.setState({importFile: false});\r\n        }\r\n    }\r\n\r\n    onImportConfirmed(ok) {\r\n        let data = this.importFile;\r\n        this.importFile = null;\r\n        if (ok && data) {\r\n            data = data.split(',')[1];\r\n            this.getLiveHost(host => {\r\n                if (!host) {\r\n                    this.showError(I18n.t('No active host found'));\r\n                    return;\r\n                }\r\n                this.socket.socket.emit('sendToHost', host, 'writeObjectsAsZip', {\r\n                    data: data,\r\n                    adapter: 'javascript',\r\n                    id: 'script.js'\r\n                }, data => {\r\n                    if (data === 'permissionError') {\r\n                        this.showError(I18n.t(data));\r\n                    } else if (!data || data.error) {\r\n                        this.showError(data ? I18n.t(data.error) : I18n.t('Unknown error'));\r\n                    } else {\r\n                        this.showMessage(I18n.t('Done'));\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    renderMain() {\r\n        const {classes} = this.props;\r\n        return [\r\n            (<div className={classes.content} key=\"main\">\r\n                <div key=\"closeMenu\" className={classes.menuOpenCloseButton} onClick={() => {\r\n                    window.localStorage && window.localStorage.setItem('App.menuOpened', this.state.menuOpened ? 'false' : 'true');\r\n                    this.setState({menuOpened: !this.state.menuOpened, resizing: true});\r\n                    setTimeout(() => this.setState({resizing: false}), 300);\r\n                }}>\r\n                    {this.state.menuOpened ? (<IconMenuOpened />) : (<IconMenuClosed />)}\r\n                </div>\r\n                <SplitterLayout\r\n                    key=\"splitterLayout\"\r\n                    vertical={true}\r\n                    primaryMinSize={100}\r\n                    secondaryInitialSize={this.logSize}\r\n                    //customClassName={classes.menuDiv + ' ' + classes.splitterDivWithoutMenu}\r\n                    onDragStart={() => this.setState({resizing: true})}\r\n                    onSecondaryPaneSizeChange={size => this.logSize = parseFloat(size)}\r\n                    onDragEnd={() => {\r\n                        this.setState({resizing: false});\r\n                        window.localStorage && window.localStorage.setItem('App.logSize', this.logSize.toString());\r\n                    }}\r\n                >\r\n                    <Editor\r\n                        key=\"editor\"\r\n                        visible={!this.state.resizing}\r\n                        connection={this.socket}\r\n                        onLocate={menuSelectId => this.setState({menuSelectId})}\r\n                        runningInstances={this.state.runningInstances}\r\n                        menuOpened={this.state.menuOpened}\r\n                        searchText={this.state.searchText}\r\n                        theme={this.state.themeType}\r\n                        onChange={(id, common) => this.onUpdateScript(id, common)}\r\n                        onSelectedChange={(id, editing) => {\r\n                            const newState = {};\r\n                            let changed = false;\r\n                            if (id !== this.state.selected) {\r\n                                changed = true;\r\n                                newState.selected = id;\r\n                            }\r\n                            if (JSON.stringify(editing) !== JSON.stringify(this.state.editing)) {\r\n                                changed = true;\r\n                                newState.editing = JSON.parse(JSON.stringify(editing));\r\n                            }\r\n                            changed && this.setState(newState);\r\n                        }}\r\n                        onRestart={id => this.socket.extendObject(id, {})}\r\n                        selected={this.state.selected && this.objects[this.state.selected] && this.objects[this.state.selected].type === 'script' ? this.state.selected : ''}\r\n                        objects={this.objects}\r\n                    />\r\n                    <Log key=\"log\" editing={this.state.editing} connection={this.socket} selected={this.state.selected}/>\r\n                </SplitterLayout>\r\n            </div>),\r\n            this.state.message ? (<DialogMessage key=\"dialogMessage\" onClose={() => this.setState({message: ''})} text={this.state.message}/>) : null,\r\n            this.state.errorText ? (<DialogError key=\"dialogError\" onClose={() => this.setState({errorText: ''})} text={this.state.errorText}/>) : null,\r\n            this.state.importFile ? (<DialogImportFile key=\"dialogImportFile\" onClose={data => this.onImport(data)} />) : null,\r\n            this.state.confirm ? (<DialogConfirm key=\"dialogConfirm\" onClose={() => {\r\n                this.setState({confirm: ''});\r\n                this.confirmCallback();\r\n                this.confirmCallback = null;\r\n            }} onOk={() => {\r\n                this.setState({confirm: ''});\r\n                this.confirmCallback(true);\r\n                this.confirmCallback = null;\r\n            }} question={this.state.confirm}/>) : null,\r\n        ];\r\n    }\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n\r\n        if (!this.state.ready) {\r\n            // return (<CircularProgress className={classes.progress} size={50} />);\r\n            return (<Loader theme={this.state.themeType}/>);\r\n        }\r\n\r\n        return (\r\n                <div className={classes.root}>\r\n                    <SplitterLayout\r\n                        key=\"menuSplitter\"\r\n                        vertical={false}\r\n                        primaryMinSize={300}\r\n                        primaryIndex={1}\r\n                        secondaryMinSize={300}\r\n                        secondaryInitialSize={this.menuSize}\r\n                        customClassName={classes.splitterDivs + ' ' + (!this.state.menuOpened ? classes.menuDivWithoutMenu : '')}\r\n                        onDragStart={() => this.setState({resizing: true})}\r\n                        onSecondaryPaneSizeChange={size => this.menuSize = parseFloat(size)}\r\n                        onDragEnd={() => {\r\n                            this.setState({resizing: false});\r\n                            window.localStorage && window.localStorage.setItem('App.menuSize', this.menuSize.toString());\r\n                        }}\r\n                    >\r\n                        <div className={classes.mainDiv} key=\"menu\">\r\n                            <SideMenu\r\n                                key=\"sidemenu\"\r\n                                scripts={this.scripts}\r\n                                objects={this.objects}\r\n                                scriptsHash={this.state.scriptsHash}\r\n                                instances={this.state.instances}\r\n                                update={this.state.updateScripts}\r\n                                onRename={this.onRename.bind(this)}\r\n                                onSelect={this.onSelect.bind(this)}\r\n                                selectId={this.state.menuSelectId}\r\n                                onEdit={this.onEdit.bind(this)}\r\n                                expertMode={this.state.expertMode}\r\n                                theme={this.state.themeType}\r\n                                onThemeChange={theme => {\r\n                                    window.localStorage && window.localStorage.setItem('App.theme', theme);\r\n                                    this.setState({themeType: theme}, () => this.props.onThemeChange(theme))\r\n                                }}\r\n                                runningInstances={this.state.runningInstances}\r\n                                onExpertModeChange={this.onExpertModeChange.bind(this)}\r\n                                onDelete={this.onDelete.bind(this)}\r\n                                onAddNew={this.onAddNew.bind(this)}\r\n                                onEnableDisable={this.onEnableDisable.bind(this)}\r\n                                onExport={this.onExport.bind(this)}\r\n                                width={this.menuSize}\r\n                                onImport={() => this.setState({importFile: true})}\r\n                                onSearch={searchText => this.setState({searchText})}\r\n                            />\r\n                        </div>\r\n                        {this.renderMain()}}\r\n                    </SplitterLayout>\r\n                </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(App);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { MuiThemeProvider} from '@material-ui/core/styles';\nimport createTheme from './createTheme';\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nlet theme = window.localStorage ? window.localStorage.getItem('App.theme') || 'light' : 'light';\n\nfunction build() {\n    if (typeof Map === 'undefined') {\n        console.log('Something is wrong')\n    }\n    return ReactDOM.render(<MuiThemeProvider theme={createTheme(theme)}>\n        <App onThemeChange={_theme => {\n            theme = _theme;\n            build();\n        }}/>\n    </MuiThemeProvider>, document.getElementById('root'));\n\n}\n\nbuild();\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS4xYyqcSwAAB8xJREFUaEPtmflzVFUWx+ePsYQk3e/1ls7rTu/pdHrvFivOsAlBE2IQUAajjiw6iqhYoowgg1gzLKXEsSQ6YhDDMk4CcTQJhWAgCdmgZlyKfZOZX+bz+nY63Z2gI4F5UtVV3wrd75177vmec89ym1+d70vemUic74vxFwJ8ukMR5y8E+OdORJrGHR0BFQUCWqNAQGsUCGiNAgGtUSCgNQoEtEaBgNYoENAaBQJao0BAaxQIaI0CAa1x6wmc601cOgnilwcSgA98Fc+zxTJPLvQjhnD822Ox3o7wsbbQSHf0PA+HkpcGcuQnxG2JwJKH7fdPt86ZYZ07s2zmr61LF9r3Nwcu9ufIpHkOJI63R9avcdfPU35TbY1HLdGw+d6kpWZW2cpGR8sOv8rkR2ncegJ4NBgw6yVJkiXZIBcVS+GQuXlrhYiDwLne+NWhBJ7eusE7e7q1wmc0mWW9LJfogaSTJINRttsM98TNyx8r79obvFEMwW0hEA6aZQNGSEaTXKKTcKpKYNSRqu8HEsOdkU2vuKsqTVOLJdhiMcImswEYTUCWDOpaS6nc8KDS2Ro8e0L9Qfdc7l7gthCIhCwZg3R6ORaxfLDNn3Wg4xdPJra/4VOtL9JjrrCbJZKsxoG4ibW8whE6nbRkga2nPaz+KD0uCBoQ4Dwc/SxcO1e5awrWC0Nl5EtLDT6vqcJnstmMfE1pgJUEJUupgSw6eyJ2IXcvoAGBa8PJN9d6K/0mnZS2HmD0Qw8of3jBvWGN53dLyhNRC1lBQHiF5G8X2rtaQ2eOj/23QAYaEPj36WTjYrtsVM89AnwotRoeechGGSWzLw8mrp9K7n638r57S80WeVrS0rytgqRHLWvH57EGBP5z+p5F9TYSVAhw4h0O456/BPIcvH9n4KVnnEOd0eyH46ENgYXzleKSdAJwTsrLjZSpMz05boYPMcH3YtWNoM0RerTBptNLhpQAaUqO1tWUnTocvTKkLs9Wlfl8I2hA4IeR5CvPuVxOI75HADFgsxkaahXEvjkauz6S7r4Tdq48aEDgymDiQHNgenXplCLSQHQutWiSDNMSlmVLy9/+o/frtvDVoeTV4eRPBkEDAhf64t9+HVu9wmmxyKKSCiBfrFO7cjBgokxt3+jrag0iT10SCyeEBgQ4GLSCQy3BxfU2BOhTmWYsaMBhSpFesRkW1yvv/anixMEwnVssFBqyoQEBQG25NpQ4+HFwQa2tTFEraUY+A4YIAkIrePpxx5H9oTNiFvol9AEBTKFt9R4KP/eU0+sxWa1wUDtDCmM01FFCku+fae1sDZ1NldQ8DpoRAMIU6n33vhBjs8ulDtWpVTk0UMVkXjun7MiB0OVBOOR0Bu0JAEblb45Gj/09vGmtJxm3yEY1DbIJAL0svbXO888jsYv9vxgC2WAVrsU+xuamt3ycGXEfQgNMAI1v3mxrR0vw2nDOQi1zAEnKS/Ydha+0MCaIL1uDq5Y50YAeEQfCYrcbP9hWQR/MyIObJ8BmPwwnx7fMnySgmp4aqr/viZ/ujqIhezlAM27+Yk+wrkbhLAkCzB1cUps2+65PngAm0ibp+bve8XNwU9EfA4amCRjVvSHAlXLnlrErJcWHJdj32mr3a6td/R0RenNmOYAPrIY6I0wcJbp0BHAHZHa8WXF9+GYJCD+pQe+Nd+4NbX7VE42YX1jp7P88gsOwCfCWATjg504si1mNsZnbye6mSl6xnHztaQu/v8W/oE7BJrvd8Ooq10h3hDGOm1paSX+CcYhpYukiOxd8QQCPMDtNNgJsj2Namirr5ik0mqISyeM2vvGym4cc3O+OxSBDJWEy460x5baiEv2MautXf0sH6vjB0IpGB/cv1qaui5LbaVj3ootL5kh3lEOVqkixgS8iWzd43W7iOJoDBnXgY+q++RzAhf/6KvrOJp9wBtujl+LAXMnosnOL/8Pt/ueXO7idYLdIgFQbkpj+1bE+FcCWHX7iI344QYDyAlWsrJ5m5T75ybuVn31Y1bS5gnkbPdATMgA9c2ZaD35cNakqRNP59L0AN0DsSzXO9OnEGowA6tFPmS6es6vPZ1q/xkPcRbW5NBB/9imn04lo+kY2auKoEhjxctQFQP1qVH8vItSnuqOT6gMX+uMjXdE1v3emlI4RyMOoWUyX+kcabJwrNXPSSuKnD8caF9kYciRD+nwLAuMh3rIXEauZbT28b3KdWCTxuT7SILpqmQPVeAXtYps84OC7p+prZpUd2Bm4dHJsV6Fk8MvIutUur8d4dxEqsDV/uQDKOUWc0ppZ1n/sCd6CWUgsJh1x6vaN3hnVpfRLDCUjmRwpOHyYWqw+cToMzzzp6Gip+r4nhnzerhQcIsmJX/6Yw+c1crNhfhZKMnp4guMTUfP6l9xde9Vf5sbrAT+PABAqKOrUira/Vv35de/Kx8sbHlTq5iq1c5X5NcqjC2xrV7mat/qZ43F8quzmaBAQ1xQGh11v+ze+7FnRWF7/gELnAuh5eL7t6SccDD/73g9AlbZA75tQz88mkAGWUdHwSl9H5PPdwfaPqto+qmLE794XhBu3QWHihLsCnrOWFkY7x7snDoW54rTvqmrfFUQPbY4gw58t8maQPNw8AUBeYgTuEfdXgSuDSdGz/neMV8Jn1eua/Crxf0aBgLboS/wXkZ9EqXSS7ZwAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}